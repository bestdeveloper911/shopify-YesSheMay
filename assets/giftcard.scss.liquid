// {% assign font_settings = 'type_body:bolder|type_heading:bolder,lighter|type_button|type_menu|type_section:bold|type_product_card_title|type_product_price|type_product_vendor|type_footer_heading|type_highlights_bar|type_signpost' %}

// {% if settings.type_body_custom == blank and settings.type_body_enable_bold %}
//   {% assign font_settings = font_settings | append: '|type_body_bold'  %}
// {% endif %}

// {% assign font_display_value = settings.font_display %}
// {% assign font_family_override = false %}
// {% if settings.font_family_override %}
//  {% assign font_family_override = 'inherit' %}
// {% endif %}

{% assign font_settings = font_settings | split: '|' %}
{% assign font_font_display = font_display_value | default: 'auto' %}
{% assign font_font_family_override = font_family_override | default: false %}

{% assign font_scss_variables = '' %}

{% for font_setting in font_settings %}
  {% assign font_info = font_setting | split: ':' %}

  {% comment %}Get setting name{% endcomment %}
  {% assign font_setting_name = font_info[0] %}
  {% assign font_setting_name_custom = font_info[0] | append: '_custom' %}

  {% comment %}Get additional weights{% endcomment %}
  {% assign font_additional_weights = font_info[1] | split: ',' | uniq %}

  {% comment %}Create variables for use in SCSS{% endcomment %}
  {% assign font_scss_base = font_setting_name | replace: '_', '-' | prepend: '$' %}
  {% assign font_scss_reference = font_scss_base %}
  {% assign font_scss_family = font_scss_base | append: '-family' %}
  {% assign font_scss_weights = font_scss_base | append: '-weights' %}
  {% assign font_scss_named_weights = font_scss_base | append: '-named-weights' %}
  {% assign font_scss_styles = font_scss_base | append: '-styles' %}
  {% assign font_scss_named_styles = font_scss_base | append: '-named-styles' %}

  {% comment %}Add the current setting to a list of reference variables{% endcomment %}
  {% assign font_scss_variables = font_scss_variables | append: '|' | append: font_scss_reference %}

  {% assign use_custom_font = false %}
  {% if settings[font_setting_name_custom] != blank %}
    {% assign use_custom_font = true %}
  {% endif %}

  {% if use_custom_font %}
    {% comment %}
  Gets the font family name, the weights and styles, and outputs the font faces
  of the custom font setting textarea.

  Will fallback on the native font setting if a normal font setting isnt supplied

  @param font_setting_name_custom [string]

  @renders [text]
    Each font face found in the custom font setting textarea

  @returns font_named_styles [string]
  @returns font_named_styles_bolder [string]
  @returns font_named_weights [string]
  @returns font_styles [string]
  @returns font_weights [string]
  @returns use_custom_font [boolean]
{% endcomment %}
{% assign font_family = font_setting_name_custom %}

{% assign font_textarea = settings[font_setting_name_custom] %}
{% assign font_textarea_split = font_textarea | newline_to_br | split: '<br />' %}

{% assign font_faces = '@pxu@' | split: '@pxu@' %}
{% assign font_weight_normal = blank %}
{% assign font_weight_lighter = blank %}
{% assign font_weight_bolder = blank %}
{% assign font_styles_normal = '@pxu@' | split: '@pxu@' %}
{% assign font_styles_lighter = '@pxu@' | split: '@pxu@' %}
{% assign font_styles_bolder = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_normal = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_lighter = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_bolder = '@pxu@' | split: '@pxu@' %}

{% for font in font_textarea_split %}
  {% assign font_split = font | split: ':' %}
  {% assign font_weight = 400 %}
  {% assign font_weight_name = 'initial' %}
  {% assign font_style = 'normal' %}
  {% assign font_style_name = 'initial' %}

  {% if font_split.size == 1 %}
    {% assign font_file = font_split[0] | strip %}
  {% else %}
    {% assign font_weight_style_space_to_hyphen = font_split[0] | replace: ' ', '-' %}
    {% assign font_weight_style = font_weight_style_space_to_hyphen | split: '-' %}

    {% if font_weight_style.size == 1 %}
      {% assign font_weight_style = font_weight_style[0] | strip | downcase %}

      {% if font_weight_style == 'italic' %}
        {% assign font_style_name = font_weight_style %}
      {% else %}
        {% assign font_weight_name = font_weight_style %}
      {% endif %}
    {% else %}
      {% assign font_weight_name = font_weight_style[0] | strip | downcase %}
      {% assign font_style_name = font_weight_style[1] | strip | downcase %}
    {% endif %}

    {% comment %}
      At this point we should have valid a valid weight and style variables,
      we can continue onto the new iteration if it isnt valid.
    {% endcomment %}
    {% if font_weight_name contains 'initial' != true and font_weight_name contains 'lighter' != true and font_weight_name contains 'bolder' != true %}
      {% continue %}
    {% endif %}
    {% if font_style_name != 'initial' and font_style_name != 'italic' %}
      {% continue %}
    {% endif %}

    {% if font_weight_name contains 'initial' %}
      {% if font_weight_name == 'initial' %}
        {% assign font_weight = 400 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'initial' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 400 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% elsif font_weight_name contains 'lighter' %}
      {% if font_weight_name == 'lighter' %}
        {% assign font_weight = 300 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'lighter' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 300 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% elsif font_weight_name contains 'bolder' %}
      {% if font_weight_name == 'bolder' %}
        {% assign font_weight = 700 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'bolder' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 700 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% endif %}

    {% if font_style_name == 'italic' %}
      {% assign font_style = 'italic' %}
    {% endif %}

    {% assign font_file = font_split[1] | strip %}
  {% endif %}

  {% unless font_weight_name == 'initial' %}
    {% unless font_additional_weights contains font_weight_name %}
      {% continue %}
    {% endunless %}
  {% endunless %}

  {% assign font_file_split = font_file | split: '.' %}

  {% comment %}
    If the assumed file component has a format associated with it,
    treat it as a file otherwise treat it as a family name and dont output a font face.
  {% endcomment %}
  {% if font_file_split.size > 1 %}
    {% assign font_file_format_index = font_file_split | size | minus: 1 %}
    {% assign font_format = font_file_split[font_file_format_index] | strip %}

    {% comment %}
      By checking if a font_file contains a forward slash we can
      determine whether we should treat the file as absolute URL
      or a file that must be sent through the file_url filter.

      This allows externally hosted files to be used as custom fonts.
    {% endcomment %}
    {% capture font_face %}
    @font-face {
      font-family: "{{ font_family }}";
      font-weight: {{ font_weight }};
      font-style: {{ font_style }};
      src:
        url("{% if font_file contains '/' %}{{ font_file }}{% else %}{{ font_file | file_url }}{% endif %}")
        format("{{ font_format }}");
    }
    {% endcapture %}
    {% assign font_face = font_face | append: '@pxu@' | split: '@pxu@' %}
    {% assign font_faces = font_faces | concat: font_face %}
  {% else %}
    {% assign font_family = font_file %}
  {% endif %}

  {% assign font_style_concat = font_style_name | append: '@pxu@' | split: '@pxu@' %}

  {% if font_weight_name == 'initial' %}
    {% assign font_weight_normal = font_weight %}
    {% assign font_styles_normal = font_styles_normal | concat: font_style_concat %}
    {% assign font_named_styles_normal = font_named_styles_normal | concat: font_style_concat %}
  {% elsif font_weight_name == 'lighter' %}
    {% assign font_weight_lighter = font_weight %}
    {% assign font_styles_lighter = font_styles_lighter | concat: font_style_concat %}
    {% assign font_named_styles_lighter = font_named_styles_lighter | concat: font_style_concat %}
  {% elsif font_weight_name == 'bolder' %}
    {% assign font_weight_bolder = font_weight %}
    {% assign font_styles_bolder = font_styles_bolder | concat: font_style_concat %}
    {% assign font_named_styles_bolder = font_named_styles_bolder | concat: font_style_concat %}
  {% endif %}
{% endfor %}

{% comment %}
  If we dont have a normal font, well want to use the native Shopify font picker
  as we assume that a normal font exists.
{% endcomment %}
{% if font_styles_normal.size > 0 %}
  {% assign font_styles_normal = font_styles_normal | join: ',' | prepend: '(' | append: ')' %}
  {% assign font_named_styles_normal = font_named_styles_normal | join: ',' | prepend: '(' | append: ')' %}

  {% assign font_weights = font_weight_normal %}
  {% assign font_named_weights = 'initial' %}
  {% assign font_styles = font_styles_normal %}
  {% assign font_named_styles = font_named_styles_normal %}

  {% if font_styles_lighter.size > 0 %}
    {% assign font_weights = font_weights | append: '|' | append: font_weight_lighter %}
    {% assign font_named_weights = font_named_weights | append: '|' | append: 'lighter' %}
    {% assign font_styles_lighter = font_styles_lighter | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_named_styles_lighter = font_named_styles_lighter | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_styles = font_styles | append: '|' | append: font_styles_lighter %}
    {% assign font_named_styles = font_named_styles | append: '|' | append: font_named_styles_lighter %}
  {% endif %}

  {% if font_styles_bolder.size > 0 %}
    {% assign font_weights = font_weights | append: '|' | append: font_weight_bolder %}
    {% assign font_named_weights = font_named_weights | append: '|' | append: 'bolder' %}
    {% assign font_styles_bolder = font_styles_bolder | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_named_styles_bolder = font_named_styles_bolder | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_styles = font_styles | append: '|' | append: font_styles_bolder %}
    {% assign font_named_styles = font_named_styles | append: '|' | append: font_named_styles_bolder %}
  {% endif %}

  {% comment %}
    If only one weight, add an empty list to styles
    `length()` reports length of nested list if list only has 1 index
  {% endcomment %}
  {% assign font_weights_size = font_weights | split: '|' %}
  {% if font_weights_size.size == 1 %}
    {% assign font_styles = font_styles | append: '|()' %}
    {% assign font_named_styles = font_named_styles | append: '|()' %}
  {% endif %}

  {% comment %}
    Render the font faces
  {% endcomment %}
  {% for font_face in font_faces %}
    {{ font_face }}
  {% endfor %}
{% else %}
  {% assign font_family = blank %}
  {% assign font_named_styles = blank %}
  {% assign font_named_weights = blank %}
  {% assign font_styles = blank %}
  {% assign font_weights = blank %}
  {% assign use_custom_font = false %}
{% endif %}

{% comment %}
  Ensure that all local variables are reset before exiting snippet
{% endcomment %}
{% assign font_face = blank %}
{% assign font_faces = blank %}
{% assign font_file = blank %}
{% assign font_file_format_index = blank %}
{% assign font_file_split = blank %}
{% assign font_format = blank %}
{% assign font_named_styles_bolder = blank %}
{% assign font_named_styles_lighter = blank %}
{% assign font_named_styles_normal = blank %}
{% assign font_split = blank %}
{% assign font_style = blank %}
{% assign font_style_concat = blank %}
{% assign font_style_name = blank %}
{% assign font_styles_bolder = blank %}
{% assign font_styles_lighter = blank %}
{% assign font_styles_normal = blank %}
{% assign font_textarea = blank %}
{% assign font_textarea_split = blank %}
{% assign font_weight = blank %}
{% assign font_weight_bolder = blank %}
{% assign font_weight_json = blank %}
{% assign font_weight_lighter = blank %}
{% assign font_weight_name = blank %}
{% assign font_weight_normal = blank %}
{% assign font_weight_split = blank %}
{% assign font_weight_style = blank %}
{% assign font_weight_style_space_to_hyphen = blank %}
{% assign font_weights_size = blank %}

  {% endif %}

  {% unless use_custom_font %}
    {% comment %}Get the initial FontDrop, and an italic style FontDrop{% endcomment %}
{% assign font_initial = settings[font_setting_name] %}
{% assign font_initial_weight = font_initial.weight | times: 1 %}
{% assign font_italic = font_initial | font_modify: 'style', 'italic' %}
{% assign font_family = font_initial.family | append: ',' | append: font_initial.fallback_families %}
{% assign font_styles = '(' | append: font_initial.style %}
{% assign font_named_styles = '(initial' %}
{% assign font_weights = font_initial_weight %}
{% assign font_named_weights = 'initial' %}

{% unless font_font_family_override %}
  {{ font_initial | font_face: font_display: font_font_display }}
  {{ font_italic | font_face: font_display: font_font_display }}
{% endunless %}

{% comment %}Use the font face italic style if possible, otherwise use something browser friendly{% endcomment %}
{% assign font_initial_italic_style = font_italic.style | default: 'italic' %}
{% assign font_styles = font_styles | append: ', ' | append: font_initial_italic_style %}
{% assign font_named_styles = font_named_styles | append: ', italic' %}

{% assign font_styles = font_styles | append: ')' %}
{% assign font_named_styles = font_named_styles | append: ')' %}

{% comment %}Iterate over each additional weight to load font face, and weights{% endcomment %}
{% for font_adjustment in font_additional_weights %}
  {% assign font_weighted = font_initial | font_modify: 'weight', font_adjustment %}
  {% assign font_styled = font_weighted | font_modify: 'style', 'italic' %}

  {% comment %}If additional weight exists, generate font face{% endcomment %}
  {% unless font_font_family_override %}
    {{ font_weighted | font_face: font_display: font_font_display }}
  {% endunless %}

  {% comment %}Create a default value of the weight adjustment is not possible{% endcomment %}
  {% assign font_adjustment_default = '' %}
  {% case font_adjustment %}
    {% when 'lighter' %}
      {% comment %}Shopify requirement: If lighter variant is not found, use default value of 300{% endcomment %}
      {% assign font_adjustment_default = 300 %}
      {% if font_initial_weight < 300 %}
        {% assign font_adjustment_default = font_initial_weight %}
      {% endif %}
    {% when 'bolder' %}
      {% comment %}Shopify requirement: If bolder variant is not found, use default value of 700{% endcomment %}
      {% assign font_adjustment_default = 700 %}
      {% if font_initial_weight > 700 %}
        {% assign font_adjustment_default = font_initial_weight %}
      {% endif %}
    {% else %}
      {% assign font_adjustment_default = font_adjustment %}
  {% endcase %}
  {% assign font_weighted_value = font_weighted.weight | default: font_adjustment_default %}
  {% assign font_weighted_style = font_weighted.style | default: 'normal' %}

  {% assign font_weights = font_weights | append: '|' | append: font_weighted_value %}
  {% assign font_named_weights = font_named_weights | append: '|' | append: font_adjustment %}
  {% assign font_weighted_styles = font_weighted_styles | append: font_weighted_style %}
  {% assign font_weighted_named_styles = font_weighted_named_styles | append: 'initial' %}

  {% comment %}If italic exists for weight, generate font face{% endcomment %}
  {% unless font_font_family_override %}
    {{ font_styled | font_face: font_display: font_font_display }}
  {% endunless %}
  {% assign font_weighted_italic_style = font_styled.style | default: 'italic' %}
  {% assign font_weighted_styles = font_weighted_styles | append: '|' | append: font_weighted_italic_style %}
  {% assign font_weighted_named_styles = font_weighted_named_styles | append: '|italic' %}

  {% if font_weighted_styles != blank %}
    {% assign font_weighted_styles = font_weighted_styles | split: '|' | join: ', ' %}
    {% assign font_weighted_named_styles = font_weighted_named_styles | split: '|' | join: ', ' %}

    {% assign font_styles = font_styles | append: '|(' | append: font_weighted_styles | append: ')'%}
    {% assign font_named_styles = font_named_styles | append: '|(' | append: font_weighted_named_styles | append: ')'%}
  {% endif %}

  {% assign font_weighted = blank %}
  {% assign font_styled = blank %}
  {% assign font_weighted_styles = blank %}
  {% assign font_weighted_named_styles = blank %}
  {% assign font_adjustment_default = blank %}
  {% assign font_weighted_value = blank %}
  {% assign font_weighted_style = blank %}
  {% assign font_weighted_italic_style = blank %}
{% endfor %}

{% comment %}If only one weight, add an empty list to styles{% endcomment %}
{% comment %}`length()` reports length of nested list if list only has 1 index{% endcomment %}
{% assign font_weights_size = font_weights | split: '|' %}
{% if font_weights_size.size == 1 %}
  {% assign font_styles = font_styles | append: '|()' %}
  {% assign font_named_styles = font_named_styles | append: '|()' %}
{% endif %}

{% comment %}Blank used variables to prevent bleeding{% endcomment %}
{% assign font_italic = blank %}
{% assign font_initial_italic_style = blank %}

  {% endunless %}

  {% comment %}Output variables for setting to SCSS{% endcomment %}
  {{ font_scss_reference }}: {{ font_setting_name }};
  {{ font_scss_family }}: {{ font_family }};
  {{ font_scss_styles }}: ({{ font_styles | split: '|' | join: ', ' }});
  {{ font_scss_named_styles }}: ({{ font_named_styles | split: '|' | join: ', ' }});
  {{ font_scss_weights }}: ({{ font_weights | split: '|' | join: ', ' }});
  {{ font_scss_named_weights }}: ({{ font_named_weights | split: '|' | join: ', ' }});

  {% comment %}Blank used variables to prevent bleeding{% endcomment %}
  {% assign font_info = blank %}
  {% assign font_setting_name = blank %}
  {% assign font_additional_weights = blank %}
  {% assign font_scss_base = blank %}
  {% assign font_scss_reference = blank %}
  {% assign font_scss_family = blank %}
  {% assign font_scss_styles = blank %}
  {% assign font_scss_named_styles = blank %}
  {% assign font_scss_weights = blank %}
  {% assign font_scss_named_weights = blank %}
  {% assign font_family = blank %}
  {% assign font_weights = blank %}
  {% assign font_named_weights = blank %}
  {% assign font_styles = blank %}
  {% assign font_named_styles = blank %}
{% endfor %}

{% assign font_scss_variables = font_scss_variables | remove_first: '|' | split: '|' %}

{% comment %}Build SCSS friendly lists of weights{% endcomment %}
{% assign font_variable_families = '' %}
{% assign font_variable_weights = '' %}
{% assign font_variable_named_weights = '' %}
{% assign font_variable_styles = '' %}
{% assign font_variable_named_styles = '' %}

{% for variable in font_scss_variables %}
  {% assign font_variable_families = font_variable_families | append: ' ' | append: variable | append: '-family' %}
  {% assign font_variable_weights = font_variable_weights | append: ' ' | append: variable | append: '-weights' %}
  {% assign font_variable_named_weights = font_variable_named_weights | append: ' ' | append: variable | append: '-named-weights' %}
  {% assign font_variable_styles = font_variable_styles | append: ' ' | append: variable | append: '-styles' %}
  {% assign font_variable_named_styles = font_variable_named_styles | append: ' ' | append: variable | append: '-named-styles' %}
{% endfor %}

{% comment %}Create SCSS lists of variables, which are used as references in functions{% endcomment %}
$font-variables: ({{ font_scss_variables | join: ' ' }});
$font-variables-families: ({{ font_variable_families | strip }});
$font-variables-weights: ({{ font_variable_weights | strip }});
$font-variables-named-weights: ({{ font_variable_named_weights | strip }});
$font-variables-styles: ({{ font_variable_styles | strip }});
$font-variables-named-styles: ({{ font_variable_named_styles | strip }});

// Find the index of the font setting for cross referencing
@function font-setting-index($font-type) {
  @return index($font-variables, $font-type);
}

// Font
// --------
// Find the index of a font weight from its relative name
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight-index($font-type, $font-weight: initial) {
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $named-weights: nth($font-variables-named-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: index($named-weights, $font-weight);

  // Return index of named weight, or return initial weight
  @return if($weight-index, $weight-index, 1);
}

// Font
// --------
// Find the font family for a font setting
// - [$font-type]: Variable of font to look up
@function font-family($font-type) {
  {% if font_font_family_override %}
    @return {{ font_font_family_override }};
  {% else %}
    @return nth($font-variables-families, font-setting-index($font-type));
  {% endif %}
}

// Font
// --------
// Find a font style relative to a font weight
// - [$font-type]: Variable of font to look up
// - [$font-style]: initial/italic
// - [$font-weight]: lighter/initial/bolder
@function font-style($font-type, $font-style: initial, $font-weight: initial) {
  $style: null;
  $styles: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Get styles based on index of font setting
  $font-styles: nth($font-variables-styles, $font-setting-index);
  $font-named-styles: nth($font-variables-named-styles, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-named-index: font-weight-index($font-type, $font-weight);

  // Get styles available for $font-weight
  $named-weight-style: nth($font-styles, $weight-named-index);
  $named-weight-named-style: nth($font-named-styles, $weight-named-index);

  // Find position of $font-style
  $style-named-index: index($named-weight-named-style, $font-style);

  @if $style-named-index {
    @return nth($named-weight-style, $style-named-index);
  } @else {
    // Return initial font style
    @return nth($named-weight-style, 1);
  }
}

// Font weight
// --------
// Find a font sensitive relative weight
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight($font-type, $font-weight: initial) {
  $weight: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $weights: nth($font-variables-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: font-weight-index($font-type, $font-weight);

  // Return numerical weight of font
  @return nth($weights, $weight-index);
}

// Font
// --------
// Generate complete font styles for a font setting
// - [$font-type]: Variable of font to look up
// - [$font-family]: true/false
// - [$font-size]: unit/false
// - [$font-style]: initial/italic/false
// - [$font-weight]: lighter/initial/bolder/false
@mixin font(
  $font-type,
  $font-family: true,
  $font-size: false,
  $font-style: initial,
  $font-weight: initial
) {
  @if $font-family { font-family: font-family($font-type); }
  @if $font-size { font-size: $font-size; }
  @if $font-style { font-style: font-style($font-type, $font-style: $font-style, $font-weight: $font-weight ); }
  @if $font-weight { font-weight: font-weight($font-type, $font-weight: $font-weight); }
}

{% assign font_scss_variables = blank %}
{% assign font_font_display = blank %}
{% assign font_font_family_override = blank %}
{% assign font_variable_families = blank %}
{% assign font_variable_weights = blank %}
{% assign font_variable_named_weights = blank %}
{% assign font_variable_styles = blank %}
{% assign font_variable_named_styles = blank %}


/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */

/**
 * 1. Change the default font family in all browsers (opinionated).
 * 2. Correct the line height in all browsers.
 * 3. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

/* Document
   ========================================================================== */

html {
  font-family: sans-serif; /* 1 */
  line-height: 1.15; /* 2 */
  -ms-text-size-adjust: 100%; /* 3 */
  -webkit-text-size-adjust: 100%; /* 3 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */

figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * Remove the outline on focused links when they are also active or hovered
 * in all browsers (opinionated).
 */

a:active,
a:hover {
  outline-width: 0;
}

/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Change the border, margin, and padding in all browsers (opinionated).
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}


// Setting abstracted libraries
@function strip-units($value) {
  @return ($value / ($value * 0 + 1));
}

@function rem($pxval, $rem-base: 16px) {
  @return (strip-units($pxval) / strip-units($rem-base)) * 1rem;
}

@function rem2px($remval, $px-base: 16px) {
  @return (strip-units($px-base) * strip-units($remval)) * 1px;
}

@function morph($color, $adjustment-value: 2) {
  $lightness: lightness($color);
  $light-color: false;

  @if $lightness > 35% { $light-color: true; }

  @if $light-color {
    $lightness: ($lightness / 20) * $adjustment-value;
    $color: darken($color, $lightness);
  } @else {
    @if $lightness < 2.5% {
      $lightness: 30%;
    } @else if $lightness < 7.5% {
      $lightness: 15%;
    }

    $lightness: ($lightness / 10) * $adjustment-value;
    $color: lighten($color, $lightness);
  }

  $saturation: saturation($color);
  $saturated-color: false;

  @if $saturation > 0% { $saturated-color: true; }

  $saturation: ($saturation / 20);

  @if $saturated-color {
    @if $light-color {
      $color: desaturate($color, $saturation);
    } @else {
      $color: saturate($color, $saturation);
    }
  }

  @return $color;
}

// Check to see if a color is black and transparent
@function color-transparent($color) {
  @if (alpha($color) == 0 and red($color) == 0 and green($color) == 0 and blue($color) == 0) {
    // Color is fully transparent, but black. Return opaque white for further adjustments
    @return rgba(255, 255, 255, 1);
  } @else {
    @return $color;
  }
}

// If background is dark return appropriate color for mixin
@function border-mix($local-background, $local-dark, $local-light) {
  @if(lightness($local-background) >= 50%) {
    @return $local-dark;
  } @else {
    @return $local-light;
  }
}

@function vw($pxval) {
  $vw-context: $max-width / 100;
  @return ($pxval/$vw-context) * 1vw;
}


// ! Colors


// Header colors

$color-header-text: {{ settings.color_header_text }};
$color-header-text-hover: {{ settings.color_header_text | color_modify: 'alpha', 0.7 }};
$color-header-text-light: transparentize($color-header-text, 0.8);
$color-header-logo-text: {{ settings.color_header_logo_text }};
$color-header-background: color-transparent({{ settings.color_header_background }});
$color-header-cart-count-badge: {{ settings.color_header_cart_count_background}};
$color-header-cart-count-text: {{ settings.color_header_cart_count_text }};
$color-header-shadow: {{ settings.color_header_shadow }};

// Header search bar

$color-header-search-bar-background: {{ settings.color_header_search_bar_background }};
$color-header-search-bar-border: {{ settings.color_header_search_bar_border }};
$color-header-search-bar-text: {{ settings.color_header_search_bar_text }};
$color-header-search-bar-button-icon: {{ settings.color_header_search_bar_button_icon }};
$color-header-search-bar-button-background: {{ settings.color_header_search_bar_button_background }};

// Header navigation

$color-header-navigation-background: {{ settings.color_header_navigation_background }};
$color-header-navigation-main-menu-text: {{ settings.color_header_navigation_main_menu_text }};
$color-header-navigation-main-menu-text-hover: {{ settings.color_header_navigation_main_menu_text_hover }};
$color-header-navigation-secondary-menu-text: {{ settings.color_header_navigation_secondary_menu_text }};
$color-header-navigation-secondary-menu-text-hover: {{ settings.color_header_navigation_secondary_menu_text_hover }};
$color-header-navigation-dropdown-menu-background: {{ settings.color_header_navigation_dropdown_menu_background }};
$color-header-navigation-dropdown-menu-links: {{ settings.color_header_navigation_dropdown_menu_links }};
$color-header-navigation-dropdown-menu-links-hover: {{ settings.color_header_navigation_dropdown_menu_links_hover }};
$color-header-navigation-meganavigation-promo-text: {{ settings.color_header_navigation_meganavigation_promo_text }};
$color-header-navigation-meganavigation-menu-headings: {{ settings.color_header_navigation_meganavigation_menu_headings }};
$color-header-navigation-mobile-submenu-background: {{ settings.color_header_navigation_mobile_submenu_background }};
$color-header-navigation-sale-link: {{ settings.color_header_navigation_sale_link }};
$color-header-navigation-sale-link-hover: {{ settings.color_header_navigation_sale_link | color_modify: 'alpha', 0.7 }};

// Text

$color-text-headings: {{ settings.color_text_headings }};
$color-text-regular-text: {{ settings.color_text_regular_text }};
$color-text-light-text: {{ settings.color_text_light_text }};
$color-text-links: {{ settings.color_text_links }};
$color-text-links-hover: {{ settings.color_text_links_hover }};
$color-text-regular-text-encoded: "{{ settings.color_text_headings | color_to_hex | replace: '#', '' }}";

// Buttons

$color-buttons-primary-button-background: {{ settings.color_buttons_primary_button_background }};
$color-buttons-primary-button-text: {{ settings.color_buttons_primary_button_text }};
$color-buttons-primary-button-background-hover: {{ settings.color_buttons_primary_button_background_hover }};
$color-buttons-secondary-button-background: {{ settings.color_buttons_secondary_button_background }};
$color-buttons-secondary-button-border: {{ settings.color_buttons_secondary_button_border }};
$color-buttons-secondary-button-text: {{ settings.color_buttons_secondary_button_text }};
$color-buttons-secondary-button-text-hover: {{ settings.color_buttons_secondary_button_text_hover }};
$color-buttons-secondary-button-border-hover: {{ settings.color_buttons_secondary_button_border_hover }};
$color-buttons-secondary-button-background-hover: {{ settings.color_buttons_secondary_button_background_hover }};
$color-buttons-sold-out-button-text: {{ settings.color_buttons_sold_out_button_text }};
$color-buttons-sold-out-button-background: {{ settings.color_buttons_sold_out_button_background }};

$color-buttons-disabled-text: #696969;
$color-buttons-disabled-background: #ebebeb;

// Forms

$color-forms-input-placeholder-text: {{ settings.color_forms_input_placeholder_text }};
$color-forms-input-text: {{ settings.color_forms_input_text }};
$color-forms-input-background: {{ settings.color_forms_input_background }};
$color-forms-input-border: {{ settings.color_forms_input_border }};
$color-forms-selected-input: {{ settings.color_forms_selected_input }};

$color-forms-input-border-hover: morph($color-forms-input-border, 2);

// Products

$color-products-vendor-name: {{ settings.color_products_vendor_name }};
$color-products-regular-price: {{ settings.color_products_regular_price }};
$color-products-compare-at-price: {{ settings.color_products_compare_at_price }};
$color-products-sale-price: {{ settings.color_products_sale_price }};
$color-products-sale-badge-text: {{ settings.color_products_sale_badge_text }};
$color-products-sale-badge: {{ settings.color_products_sale_badge }};
$color-products-sold-out-badge-text: {{ settings.color_products_sold_out_badge_text }};
$color-products-sold-out-badge: {{ settings.color_products_sold_out_badge }};
$color-products-product-gallery-active-thumbnail: {{ settings.color_products_product_gallery_active_thumbnail }};
$color-products-product-image-backgrounds: {{ settings.color_products_product_image_backgrounds }};
$color-products-in-stock: {{ settings.color_products_in_stock }};
$color-products-low-stock: {{ settings.color_products_low_stock }};
$color-products-no-stock: {{ settings.color_products_no_stock }};

// Product cards

$color-product-cards-background: {{ settings.color_product_cards_background }};

// Product reviews

$color-product-reviews-star-rating-border: {{ settings.color_product_reviews_star_rating_border }};
$color-product-reviews-star-rating-active: {{ settings.color_product_reviews_star_rating_active }};

// Layout

$color-layout-site-background: {{ settings.color_layout_site_background }};
$color-layout-secondary-backgrounds: {{ settings.color_layout_secondary_backgrounds }};
$color-layout-dividers: {{ settings.color_layout_dividers }};

// Content containers

$color-content-containers-background: {{ settings.color_content_containers_background }};

// Popups

$color-popups-background: {{ settings.color_popups_background }};

// Site overlays

$color-site-overlays-background: rgba({{ settings.color_site_overlays_overlay }}, {{ settings.color_site_overlays_opacity | divided_by: '100.00' }});

// Footer

$color-footer-background: {{ settings.color_footer_background }};
$color-footer-headings: {{ settings.color_footer_headings }};
$color-footer-text: {{ settings.color_footer_text }};
$color-footer-text-link: {{ settings.color_footer_text_link }};
$color-footer-text-link-hover: {{ settings.color_footer_text_link_hover }};
$color-footer-menu-list-link: {{ settings.color_footer_menu_list_link }};
$color-footer-menu-list-link-hover: {{ settings.color_footer_menu_list_link_hover }};
$color-footer-additional-menu-link: {{ settings.color_footer_additional_menu_link }};
$color-footer-additional-menu-link-hover: {{ settings.color_footer_additional_menu_link_hover }};
$color-footer-copyright-text: {{ settings.color_footer_copyright_text }};

$color-additional-accent: transparentize($color-footer-text, 0.5);

// Social icons

$color-facebook: #4267b1;
$color-twitter: #1da1f2;
$color-pinterest: #cc2129;
$color-instagram: #000;
$color-tumblr: #001935;
$color-vimeo: #1eb8ea;
$color-youtube: #ff0000;
$color-linkedin: #0077b5;

// Placeholders
$color-placeholder-background: mix($color-text-regular-text, $color-layout-site-background, 8%);
$color-placeholder-fill: mix($color-text-regular-text, $color-layout-site-background, 35%);

// General
$color-black: #000;
$color-white: #fff;
$color-border: mix($color-layout-site-background, border-mix($color-layout-site-background, $color-black, $color-white));
$color-border-soft: transparentize(border-mix($color-layout-site-background, $color-black, $color-white), 0.85);

$color-box-shadow-border: transparentize($color-border, 0.84);
$color-box-shadow-shadow: transparentize($color-border, 0.89);
$color-box-shadow-border-focused: transparentize($color-border, 0.5);
$color-box-shadow-shadow-focused: transparentize($color-border, 0.5);

$color-error: #f05d5d;
$color-success: #51a551;
$color-highlight: #fffbd9;


// ! Typography

// Fonts
$font-heading: $type-heading;
$font-body: $type-body;
{% if settings.type_body_custom == blank and settings.type_body_enable_bold %}
  $font-body-bold: $type-body-bold;
  $use-alternate-font-body-bold: true;
{% else %}
  $font-body-bold: $type-body;
  $use-alternate-font-body-bold: false;
{% endif %}
$font-button: $type-button;
$font-menu: $type-menu;
$type-menu-sizing: {{ settings.type_menu_size | divided_by: 100.0 }};
$font-section: $type-section;
$font-product-card-title: $type-product-card-title;
$font-product-price: $type-product-price;
$font-product-vendor: $type-product-vendor;
$font-footer-heading: $type-footer-heading;
$font-highlights-bar: $type-highlights-bar;
$font-signpost: $type-signpost;

// Base Size
$font-size-base: {{ settings.type_size_base }};
$font-size-base-mobile: 15px;
$font-size-base-form: 16px;

// Headings size adjustment
$font-heading-sizing: {{ settings.type_heading_size | divided_by: '100.00' }};
$section-heading-sizing: {{ settings.type_section_heading_size | divided_by: '100.00' }};
$section-subheading-sizing: {{ settings.type_section_subheading_size | divided_by: '100.00' | append: 'em' }};
$font-footer-heading-sizing: {{ settings.type_footer_heading_size | divided_by: 100.0 | append: 'em' }};

// Letter spacing
$font-heading-spacing: {{ settings.type_heading_spacing | divided_by: 100.0 | append: 'em' }};
$font-body-spacing: {{ settings.type_body_spacing | divided_by: 100.0 | append: 'em' }};
$font-menu-spacing: {{ settings.type_menu_spacing | divided_by: 100.0 | append: 'em' }};
$font-button-spacing: {{ settings.type_button_spacing | divided_by: 100.0 | append: 'em' }};
$font-button-sizing: {{ settings.type_button_sizing | divided_by: 100.0 }};
$font-section-spacing: {{ settings.type_section_spacing | divided_by: 100.0 | append: 'em' }};
$font-product-vendor-spacing: {{ settings.type_product_vendor_spacing | divided_by: 100.0 | append: 'em' }};
$font-footer-heading-spacing: {{ settings.type_footer_heading_spacing | divided_by: 100.0 | append: 'em' }};
$font-highlights-spacing: {{ settings.type_highlights_spacing | divided_by: 100.0 | append: 'em' }};

// Capitalization
$font-heading-capitalize: {{ settings.type_heading_capitalize }};
$font-menu-capitalize: {{ settings.type_menu_capitalize }};
$font-button-capitalize: {{ settings.type_button_capitalize }};
$font-section-capitalize: {{ settings.type_section_capitalize }};
$font-product-capitalize: {{ settings.type_product_capitalize }};
$font-footer-heading-capitalize: {{ settings.type_footer_heading_capitalize }};
$font-highlights-capitalize: {{ settings.type_highlights_capitalize }};

// Other
$font-body-underline-links: {{ settings.type_body_underline_links }};

// font sizes should be adjusted by this much if all caps.
$capitalize_adjustment: -1;

// Font sizes
$font-body-size: $font-size-base;
$font-body-size-small: rem($font-size-base - 1px); // 15px
$font-body-size-smaller: rem($font-size-base - 2px); // 14px
$font-body-size-smallest: rem($font-size-base - 3px); // 13px
$font-heading-large: rem($font-size-base * 2.125); // 34px
$font-heading-medium: rem($font-size-base * 1.875); // 32px
$font-h1-size: rem($font-size-base * 1.75); // 28px
$font-h2-size: rem($font-size-base * 1.625); // 26px
$font-h3-size: rem($font-size-base * 1.5); // 24px
$font-h4-size: rem($font-size-base * 1.25); // 20px
$font-h5-size: rem($font-size-base * 1.125); // 18px
$font-h6-size: rem($font-size-base); // 16px
$font-product-card-sizing: {{ settings.type_product_card_size | divided_by: 100.0 }};
$font-highlights-sizing: {{ settings.type_highlights_size | divided_by: 100.0 }};
$font-signpost-sizing: {{ settings.type_signpost_sizing | divided_by: 100.0 }};
// ! Spacing

// Vertical spaces
$space-xxx-small: rem($font-body-size * 0.25); // 4px
$space-xx-small: rem($font-body-size * 0.5); // 8px
$space-x-small: rem($font-body-size * 0.75); // 12px
$space-small: rem($font-body-size); // 16px
$space-medium: rem($font-body-size * 1.25); // 20px
$space-large: rem($font-body-size * 1.75); // 28px
$space-x-large: rem($font-body-size * 2); // 36px
$space-xx-large: rem($font-body-size * 3.125); // 50px
$space-xxx-large: rem($font-body-size * 4.25); // 68px
$space-section-heading: rem(42px);

$space-input-padding-horizontal: rem(14px);
$space-input-padding-vertical-base: rem(15px);
$space-input-padding-vertical-bottom: rem(15px);
$space-input-padding-vertical-top: rem(15px);

// Layout
$max-width: {{ settings.layout_max_width | append: 'px' }};
$page-max-width: {{ settings.page_content_width | append: 'px' }};
$gutter-outer-small: 10px;
$gutter-outer-medium: 15px;
$gutter-outer: 25px;
$gutter-content: 20px;

// ! Z-Indices

$index-header: 700;
$index-header-navmenu: $index-header + 2;
$index-banner: 800;
$index-main: 500;
$index-footer: 500;
$index-mobile-nav: $index-header + 100;
$index-modal: $index-mobile-nav + 100;

$index-header-search: 150;
$index-header-internal-icons: 125;

// ! Breakpoints

$bp-xxs: 375px;
$bp-xs: 525px;
$bp-smaller: 680px;
$bp-small: 720px;
$bp-medium: 860px;
$bp-large: 1024px;
$bp-larger: 1080px;
$bp-xl: 1280px;

{% if settings.layout_max_width == 1200 %}
  $bp-xxl: 1250px;
{% elsif settings.layout_max_width == 1300 %}
  $bp-xxl: 1350px;
{% elsif settings.layout_max_width == 1400 %}
  $bp-xxl: 1450px;
{% elsif settings.layout_max_width == 1500 %}
  $bp-xxl: 1550px;
{% elsif settings.layout_max_width == 1600 %}
  $bp-xxl: 1660px;
{% endif %}

// ! Components

// Container

$container-border-radius: {{ settings.container_border_radius | append: 'px' }};
$container-border-radius-sm: {{ settings.container_border_radius | divided_by: 2.0 | append: 'px' }};

// Button font sizes
$button-x-large-size: rem($font-size-base * 1.3125); // 21px
$button-large-size: rem($font-size-base * 1.125); // 18px
$button-medium-size: rem($font-size-base); // 16px
$button-small-size: rem($font-size-base * 0.875); // 14px
$button-border-radius: {{ settings.button_border_radius | append: 'px' }};

// Checkbox settings
$checkbox-size: (13px, 13px);
$checkbox-border: $color-forms-input-border;
$checkbox-inactive: $color-forms-input-background;
$checkbox-active: $color-text-links;

// Form input settings
$form-border-radius: {{ settings.form_border_radius | append: 'px' }};
$form-border-radius-sm: {{ settings.form_border_radius | divided_by: 2.0 | append: 'px' }};

// Transitions
$ease-out-quad: cubic-bezier(0.250, 0.460, 0.450, 0.940);
$ease-out-ripple: cubic-bezier(0.330, 0.810, 0.585, 0.990);
$ease-bubble: cubic-bezier(0.3, 0, 0, 1);

// Logo widths
$header-logo-image-max-width: 100px;
$header-content-offset-right: 305px; // My account + Logout

$site-nav-item-space: 8px;
$site-nav-link-space: 7px;
$site-nav-link-space-vertical: 12px;
$site-nav-link-space-horizontal: 15px;
$site-subnav-space: 15px;

 // Header Settings
$header-content-height: 46px;
$header-padding-vertical-mobile: 10px;
$header-padding-vertical: 20px;
$header-padding-vertical-sticky: 10px;
$header-line-height: $font-body-size + 2px;

// Product grid settings
$grid-column-space-desktop: {{ settings.product_grid_column_space_desktop | append: 'px' }};
$grid-row-space-desktop: {{ settings.product_grid_row_space_desktop | append: 'px' }};
$grid-column-space-mobile: {{ settings.product_grid_column_space_mobile | append: 'px' }};
$grid-row-space-mobile: {{ settings.product_grid_row_space_mobile | append: 'px' }};
$sidebar-width: 185px;
$product-card-border-radius: {{ settings.product_card_border_radius | append: 'px' }};

// Product page settings
$color-slider-accent: $color-text-links;
$color-slider-dot: mix($color-text-regular-text, $color-layout-site-background, 23%);
$quantity-width: rem(115px);

// Featured blog post
$color-featured-post-background: $color-text-links;
$color-featured-post-foreground: $color-layout-site-background;

// Swatch settings
$swatches-size-product-page: {{ settings.swatches_product_page_size }}px;
$swatches-size-product-card: {{ settings.swatches_product_card_size }}px;
$swatches-size-sidebar-filter: {{ settings.swatches_sidebar_filter_size }}px;
$swatches-shape: {{ settings.swatches_shape }};

@mixin media($max: false, $min: false) {
  @if $max {
    @if $min {
      @media screen and (max-width: $max - 1) and (min-width: $min) { @content; }
    } @else {
      @media screen and (max-width: $max - 1) { @content; }
    }
  } @else {
    @media screen and (min-width: $min) { @content; }
  }
}

// Reusable button style for changing button sizes at different break points
@mixin button-size($button-size) {
  $padding: false;

  @if $button-size == small {
    @include font-size-button-small($font-button-capitalize, -2);
    $padding: (11px, 22px);
  } @else if $button-size == medium {
    @include font-size-button-medium($font-button-capitalize, -2);
    $padding: (14px, 22px);
  } @else if $button-size == large {
    @include font-size-button-large($font-button-capitalize, -2);
    $padding: (14px, 34px);
  } @else if $button-size == x-large {
    @include font-size-button-x-large($font-button-capitalize, -2);
    $padding: (14px, 42px);
  }

  @include capitalize($font-button-capitalize);
  padding: rem(nth($padding, 1)) rem(nth($padding, 2));
  letter-spacing: $font-button-spacing;
}

@mixin header-shadow {
  $color-header-shadow-alpha: {{ settings.color_header_shadow | color_extract: 'alpha' }};

  @if ($color-header-shadow-alpha != 0) {
    box-shadow: 0 1px 4px transparentize($color-header-shadow, 0.75);
  }
}

@mixin grid-gutter($size) {
  margin-right: -$size;
  margin-left: -$size;

  > * {
    margin-right: $size;
    margin-left: $size;
  }
}

@mixin mobile-scrolling() {
  overflow-x: scroll;
  white-space: nowrap;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }
}

// ! Font mixins

@mixin capitalize($capitalize) {
  @if $capitalize == true {
    text-transform: uppercase;
  } @else {
    text-transform: none;
  }
}


@function capitalize_adjustment($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  @if $use_capitalize_adjustment {
    @return $adjustment_amount;
  } @else {
    @return 0;
  }
}

@mixin font-body-bold($font-style: initial) {
  @if $use-alternate-font-body-bold {
    @include font($font-body-bold, $font-weight: initial, $font-style: $font-style);
  } @else {
    @include font($font-body-bold, $font-weight: bolder, $font-style: $font-style);
  }
}

@mixin font-body-underline-links {
  @if $font-body-underline-links {
    text-decoration: underline;
  }
}

@mixin font-size-heading-large($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 2.125 * $heading-size-setting + $adjustment); // 34px

  @include media($bp-small) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 2.125 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-medium($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.875 * $heading-size-setting + $adjustment); // 32px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.875 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-1($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.75 * $heading-size-setting + $adjustment); // 28px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.75 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-2($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.625 * $heading-size-setting + $adjustment); // 26px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.625 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-3($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: $capitalize_adjustment, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount: -2);

  font-size: rem($font-size-base * 1.5 * $heading-size-setting + $adjustment); // 24px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.5 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-4($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 * $heading-size-setting + $adjustment); // 20px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.25 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-5($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-heading-6($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-section-heading($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.5 * $heading-size-setting + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.5 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-highlight-banner-heading($use_capitalize_adjustment: $font-highlights-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 * $font-highlights-sizing + $adjustment); // 18px

  @include media($bp-large) {
    $mobile-scale: mobile-font-scaling($font-highlights-sizing, 0.6);
    font-size: rem($font-size-base-mobile * $mobile-scale + $adjustment);
  }
}

@mixin font-size-body-larger($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.375 + $adjustment); // 22px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.375 + $adjustment);
  }
}

@mixin font-size-body-large($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 + $adjustment); // 20px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.25 + $adjustment);
  }
}

@mixin font-size-body-medium($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-body($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile + $adjustment);
  }
}

@mixin font-size-form($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-form + $adjustment);
  }
}

@mixin font-size-body-small($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.9375 + $adjustment); // 15px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.9375 + $adjustment);
  }
}

@mixin font-size-body-smaller($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875 + $adjustment);
  }
}

@mixin font-size-body-smallest($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.8125 + $adjustment); // 13px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.8125 + $adjustment);
  }
}

@mixin font-size-body-tiny($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.75 + $adjustment); // 12px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.75 + $adjustment);
  }
}
@mixin font-size-product-card($base-size: $font-size-base) {

  font-size: rem($base-size * $font-product-card-sizing);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($font-product-card-sizing);
    font-size: rem($font-size-base-mobile * $mobile-scale);
  }
}

@mixin font-size-button-small($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 * $font-button-sizing + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875 * $font-button-sizing);
  }
}

@mixin font-size-button-medium($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $font-button-sizing + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * $font-button-sizing  + -1);
  }
}

@mixin font-size-button-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 * $font-button-sizing + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 * $font-button-sizing + -1);
  }
}

@mixin font-size-button-x-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.3125 * $font-button-sizing + $adjustment); // 21px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.3125 * $font-button-sizing + -1);
  }
}

@mixin font-size-button-signpost() {
  font-size: rem($font-size-base * $font-signpost-sizing);

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * $font-signpost-sizing);
  }
}

@mixin font-size-menu-large($use_capitalize_adjustment: false, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $type-menu-sizing * 1.0625 + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($type-menu-sizing, 0.5);
    font-size: rem($font-size-base-mobile * 1.0625 * $mobile-scale + -1);
  }
}

@mixin font-size-menu($use_capitalize_adjustment: $font-menu-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $type-menu-sizing + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($type-menu-sizing, 0.5);
    font-size: rem($font-size-base-mobile * $mobile-scale + $adjustment);
  }
}

@mixin font-size-footer-heading($use_capitalize_adjustment: false, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $font-footer-heading-sizing * 1.125 + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($font-footer-heading-sizing, 0.4);
    font-size: rem($font-size-base-mobile * $mobile-scale * 1.125 + $adjustment);
  }
}

@mixin font-size-input {
  font-size: rem($font-size-base); // 16px

  @include media($bp-medium) {
    font-size: rem(16px); // Force 16px regardless of base size
  }
}

@function mobile-font-scaling($selected_scale: 1, $font_adjustment: 0.6) {
  @return ($selected_scale - 1) * $font_adjustment + 1;
}

// Typography

%heading {
  @include font($font-heading);
  @include capitalize($font-heading-capitalize);
  letter-spacing: $font-heading-spacing;

  b,
  strong {
    font-weight: font-weight($font-heading, $font-weight: bolder);
  }

  em {
    font-style: font-style($font-heading, $font-style: italic);
  }

  b em,
  strong em,
  em b,
  em strong {
    font-style: font-style($font-heading, $font-weight: bolder, $font-style: italic);
  }
}

%h1 {
  @extend %heading;
  @include font-size-heading-1($font-heading-capitalize, -3);
}

%h2 {
  @extend %heading;
  @include font-size-heading-2($font-heading-capitalize, -2);
}

%h3 {
  @extend %heading;
  @include font-size-heading-3($font-heading-capitalize, -2);
}

%h4 {
  @extend %heading;
  @include font-size-heading-4($font-heading-capitalize, -2);
}

%h5 {
  @extend %heading;
  @include font-size-heading-5($font-heading-capitalize, -2);
}

%h6 {
  @extend %heading;
  @include font-size-heading-6($font-heading-capitalize, -2);
}

%menu {
  @include font($font-menu);
  @include font-size-menu($font-menu-capitalize);
  @include capitalize($font-menu-capitalize);
  letter-spacing: $font-menu-spacing;
}

%button-base {
  @include button-size(small);
  @include font($font-button);
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  border-radius: $button-border-radius;
  transition: (
    border-color 0.2s ease,
    background-color 0.2s ease,
    width 0.2s ease,
    height 0.2s ease
  );
}

%button-disable {
  &,
  &:active,
  &:focus {
    color: $color-buttons-disabled-text;
    cursor: default;
    background-color: $color-buttons-disabled-background;
    border: 1px solid $color-buttons-disabled-background;
  }
}

%button-primary {
  @extend %button-base;
  color: $color-buttons-primary-button-text;
  background-color: $color-buttons-primary-button-background;
  border: 1px solid $color-buttons-primary-button-background;

  &:not(.disabled):hover {
    background: $color-buttons-primary-button-background-hover;
    border: 1px solid $color-buttons-primary-button-background-hover;
  }

  &:active,
  &:focus {
    background: $color-buttons-primary-button-background-hover;
    border: 1px solid $color-buttons-primary-button-background-hover;
  }

  &.disabled { @extend %button-disable; }
}

%button-secondary {
  @extend %button-base;
  color: $color-buttons-secondary-button-text;
  background-color: $color-buttons-secondary-button-background;
  border: 1px solid $color-buttons-secondary-button-border;

  &:not(.disabled):hover {
    color: $color-buttons-secondary-button-text-hover;
    background: $color-buttons-secondary-button-background-hover;
    border: 1px solid $color-buttons-secondary-button-border-hover;
  }

  &:active,
  &:focus {
    background: $color-buttons-secondary-button-background-hover;
    border: 1px solid $color-buttons-secondary-button-border-hover;
  }

  &.disabled { @extend %button-disable; }
}

// Layout
%layout-container {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-small, $max: $bp-larger) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: $gutter-content * 2;
    padding-left: $gutter-content * 2;
  }
}


%section-container {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-small) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: calc(#{$gutter-content * 2});
    padding-left: calc(#{$gutter-content * 2});
  }
}

%layout-container--reset {
  max-width: 100%;
  padding-right: 0;
  padding-left: 0;

  @include media($min: $bp-large) {
    padding-right: 0;
    padding-left: 0;
  }
}

%page-content {
  margin-top: $gutter-content * 1.5;
  margin-bottom: $gutter-content * 1.5;

  @include media($min: $bp-large) {
    margin-top: $gutter-content * 2.5;
    margin-bottom: $gutter-content * 2.5;
  }
}

%clearfix {
  &::before,
  &::after {
    display: table;
    content: "";
  }

  &::after {
    clear: both;
  }
}

%link--text {
  color: $color-text-regular-text;
  text-decoration: none;
  transition: color 0.1s ease;

  &:hover {
    color: $color-text-links;
  }
}

%link--default {
  color: $color-text-links;
  text-decoration: none;
  transition: color 0.1s ease;

  &:hover {
    color: $color-text-links-hover;
  }
}

%box-shadow {
  border: 1px solid $color-box-shadow-border;
  box-shadow: 0 1px 4px $color-box-shadow-shadow;
}

%inline-chevron {
  display: inline-block;
  margin-left: rem(5px);
  vertical-align: middle;

  svg {
    display: block;
    margin-top: rem(-2px);
    transform: rotate(-90deg);
  }
}

%icon-checkbox {
  display: inline-block;
  width: nth($checkbox-size, 1);
  height: nth($checkbox-size, 2);
  color: $checkbox-inactive;
  vertical-align: middle;

  svg {
    display: block;
    width: 100%;
    height: 100%;
    background-color: $checkbox-inactive;
    border: 1px solid $checkbox-border;
    border-radius: $form-border-radius-sm;
    fill: currentColor;
  }
}

%icon-checkbox--active {
  color: $checkbox-active;

  svg {
    background-color: transparent;
    border: 0;
    border-radius: $form-border-radius-sm;
    fill: currentColor;
  }
}

%button-reset {
  @include font($font-body, $font-weight: bolder);
  padding: 0;
  letter-spacing: $font-body-spacing;
  cursor: pointer;
  background: transparent;
  border: 0;
  -webkit-appearance: normal;
     -moz-appearance: normal;
          appearance: normal;
}

%atc-button {
  position: relative;

  .atc-button--text {
    opacity: 1;
  }

  .atc-button--icon {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.6s linear infinite;
    transition: opacity 0.1s ease 0.1s;

    svg {
      display: block;
      width: 26px;
      height: 26px;
    }
  }

  &.processing {
    .atc-button--text {
      opacity: 0;
    }

    .atc-button--icon {
      opacity: 1;
      visibility: visible;
    }
  }
}

%search-button {
  position: relative;
  padding-left: 15px;
  padding-right: 15px;

  .search-icon--inactive,
  .search-icon--active {
    display: inline-block;
  }

  svg {
    display: block;
    width: 100%;
    height: 100%;
  }

  .search-icon--inactive {
    height: 23px;
    opacity: 1;
    transition: opacity 0.1s ease;
  }

  .search-icon--active {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 26px;
    height: 26px;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.7s cubic-bezier(0.69, 0.31, 0.56, 0.83) infinite;
  }

  &.search-icon--processing {
    .search-icon--inactive {
      opacity: 0;
      transition-delay: 0s;
    }

    .search-icon--active {
      opacity: 1;
      visibility: visible;
    }
  }
}

%message--base {
  @include font($font-body, $font-weight: bolder, $font-family: false);
  @include font-size-body;
  letter-spacing: $font-body-spacing;

  a {
    color: currentColor;
  }
}

%message--error {
  @extend %message--base;
  color: $color-error;
  background-color: mix($color-error, $color-layout-site-background, 18%);
}

%message--success {
  @extend %message--base;
  color: $color-success;
  background-color: mix($color-success, $color-layout-site-background, 18%);
}

%sneak-in {

  &.animating,
  &.visible:not(.animating) {
    display: block;
  }

  &.visible:not(.animating) {
    opacity: 1;
    transform: translate(0);
  }

  &.animating-in {
    animation-delay: 0s;
    animation-duration: 0.27s;
    animation-name: sneak-in;
    animation-timing-function: linear;
    animation-fill-mode: both;
    animation-direction: normal;
  }

  &.animating-out {
    opacity: 0;
    transform: translateY(-5px);
    transition: all 0.12s cubic-bezier(1, 0, 0.7, 1);
  }
}

%fade-in {
  animation-delay: 0s;
  animation-duration: 0.27s;
  animation-name: fade-in;
  animation-timing-function: linear;
  animation-fill-mode: both;
  animation-direction: normal;
}

%no-results--wrapper {
  width: 100%;
  margin-top: $space-xx-large;
  text-align: center;

  @include media($min: $bp-small) {
    margin-top: $space-xx-large - $space-large;
  }
}

%no-results--title {
  @include font($font-body);
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: 0;
  letter-spacing: $font-body-spacing;
  color: $color-text-headings;
}

%no-results--button {
  @extend %button-primary;
  @include button-size(medium);
  margin-top: $space-medium;
}

// Buttons

.button-primary {
  @extend %button-primary;
}

.button-secondary {
  @extend %button-secondary;
}

.button-icon {
  @extend %inline-chevron;
  margin-left: 3px;

  svg {
    width: rem(14px * $font-button-sizing);
    height: rem(14px * $font-button-sizing);
    margin-top: rem(-3px);
  }
}

.button-signpost {
  @include font($font-signpost);
  @include font-size-button-signpost;
  display: block;
  padding: 0;
  margin-top: $space-medium;
  letter-spacing: 0;
  text-decoration: none;
  text-transform: none;

  @include media($min: $bp-medium) {
    margin-top: $space-large;
  }

  .signpost-icon {
    @extend %inline-chevron;
    margin-left: 2px;

    svg {
      width: 0.75rem;
      height: 0.75rem;
      margin-top: 0;
    }
  }
}

#messageus_button {
  z-index:9999;
}


// Global styles
html,
body {
  background-color: $color-layout-site-background;
}

html {
  height: 100%;
  &::before {
    display: none;
    content: "XS,S,M,L,L+,XL,XXL";
  }

  &::after {
    display: none;
    content: "XS";

    @include media($min: $bp-small) {
      content: "S";
    }

    @include media($min: $bp-medium) {
      content: "M";
    }

    @include media($min: $bp-large) {
      content: "L";
    }

    @include media($min: $bp-larger) {
      content: "L+";
    }

    @include media($min: $bp-xl) {
      content: "XL";
    }

    @include media($min: $bp-xxl) {
      content: "XXL";
    }
  }
}

body {
  @include font($font-body);
  @include font-size-body;
  width: 100%;
  // {% if settings.font_family_override %}
  // {% comment %}This is a hybrid of the Github font stack, with added support for certain Linux fonts{% endcomment %}
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-sans, Ubuntu, Cantarell, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  // {% endif %}
  letter-spacing: $font-body-spacing;
  color: $color-text-regular-text;

  @include media($bp-small) {
    @include font-size-body-small;
  }

  &.scroll-lock {
    height: 100vh;
    overflow: hidden;
    touch-action: manipulation;
  }
}

th,
b,
strong {
  @include font-body-bold;
  letter-spacing: $font-body-spacing;
}

em {
  font-style: font-style($font-body, $font-style: italic);
}

th em,
b em,
strong em,
em b,
em strong {
  @include font-body-bold($font-style: italic);
  letter-spacing: $font-body-spacing;
}

// Headings

h1 {
  @extend %h1;
}

h2 {
  @extend %h2;
}

h3 {
  @extend %h3;
}

h4 {
  @extend %h4;
}

h5 {
  @extend %h5;
}

h6 {
  @extend %h6;
}

%show-for-sr,
.visually-hidden {
  //scss-lint:disable ImportantRule
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  border: 0;
}

.skip-to-main {
  @include font-size-body;
  position: absolute;
  top: 0;
  left: -9999px;
  color: $color-text-links;
  background: $color-layout-site-background;
  text-decoration: none;
  padding: 1em;

  &:focus,
  &:active {
    left: 0;
    z-index: $index-header + 2;
  }
}


/*================ #Giftcard Template ================*/

.giftcard__apple-wallet-image {
  display: block;
  margin: 0 auto;
}

/*================ Print Giftcard Styles ================*/
@media print {
  @page {
    margin: 0.5cm;
  }

  p {
    orphans: 3;
    widows: 3;
  }

  .giftcard__print-link,
  .giftcard__apple-wallet {
    display: none;
  }
}

/*================ Custom Giftcard Styles ================*/

.giftcard-header {
  padding: $space-small $space-large;
  background-color: $color-header-background;
  text-align: center;
}

.giftcard-header-logo {
  display: inline-block;
  color: currentColor;
  text-decoration: none;
}

.giftcard-header-logo-text {
  @include font-size-body;
  display: block;
  width: 100%;
  text-decoration: none;
}

.giftcard--container {
  @extend %layout-container;
  max-width: 488px;
  margin-bottom: $space-xxx-large;
  text-align: center;
}

.giftcard-title {
  margin-top: $space-x-large;
  margin-bottom: $space-x-large;
}

.giftcard-message {
  @extend %message--base;

  &.message--error {
    @extend %message--error;
  }
}

.giftcard-qr {
  width: 120px;
  margin-right: auto;
  margin-left: auto;
}

.giftcard-actions {
  display: flex;
  justify-content: center;
  margin-top: $space-medium;

  .button-secondary {
    margin-left: $gutter-content;
  }
}

/*================ Gift Card image ================*/
.giftcard-image {
  position: relative;
  text-align: center;

  img {
    position: relative;
    display: block;
    max-width: 100%;
    border-radius: 10px;
    z-index: 2;
  }

  // White corner caps that overlap gift card image
  &::before,
  &::after {
    content: '';
    position: absolute;
    width: 47px; // asset width
    height: 47px; // asset width
    z-index: 3;
  }

  &::before {
    background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE3LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0N3B4IiB2aWV3Qm94PSIwIDAgNDcgNDciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ3IDQ3IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8ZyBvcGFjaXR5PSIwLjEiPgoJCTxwYXRoIGQ9Ik00NC41ODYsMUwxLDQ0LjU4NlYxMGMwLTQuOTYzLDQuMDM3LTksOS05SDQ0LjU4NiBNNDcsMEgxMEM0LjQ3NywwLDAsNC40NzcsMCwxMHYzN0w0NywwTDQ3LDB6Ii8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDQuNTg2LDFMMSw0NC41ODZWMTBjMC00Ljk2Myw0LjAzNy05LDktOUg0NC41ODYiLz4KCTwvZz4KPC9nPgo8L3N2Zz4K') 0 0 no-repeat;
    top: -1px;
    left: -1px;
  }

  &::after {
    background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE3LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0N3B4IiB2aWV3Qm94PSIwIDAgNDcgNDciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ3IDQ3IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8ZyBvcGFjaXR5PSIwLjEiPgoJCTxwYXRoIGQ9Ik0yLjQxNCw0Nkw0NiwyLjQxNFYzN2MwLDQuOTYzLTQuMDM3LDktOSw5SDIuNDE0IE0wLDQ3aDM3YzUuNTIzLDAsMTAtNC40NzcsMTAtMTBWMEwwLDQ3TDAsNDd6Ii8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMi40MTQsNDZMNDYsMi40MTRWMzdjMCw0Ljk2My00LjAzNyw5LTksOUgyLjQxNCIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo=') 0 0 no-repeat;
    bottom: -1px;
    right: -1px;
  }
}

/*================ Gift card code ================*/
.giftcard-code {
  position: absolute;
  bottom: 20px;
  text-align: center;
  width: 100%;
  z-index: 5;
}

.giftcard-code--medium {
  font-size: 0.875em;
}

.giftcard-code--small {
  font-size: 0.75em;
}

.giftcard-code--inner {
  display: inline-block;
  max-width: 450px;
  padding: 0.5em;
  vertical-align: baseline;
  border-radius: 4px;
}

.giftcard-code-text {
  @include font($font-body, $font-family: false);
  display: inline-block;
  padding: 0.4em 0.5em;
  font-size: 1.875em;
  line-height: 1;
  letter-spacing: $font-body-spacing;
  text-transform: uppercase;
  vertical-align: baseline;
  background-color: $color-white;
  border: 1px dashed $color-border;

  &.disabled {
    text-decoration: line-through;
  }
}

/*================ Gift card amount ================*/
.giftcard-amount {
  position: absolute;
  top: 0;
  right: 0;
  font-size: 2.75em;
  line-height: 1.2;
  padding: 10px;
  z-index: 5;
  color: $color-white;

  strong {
    display: block;
  }
}

/*================ Tooltip ================*/
.giftcard-tooltip {
  display: block;
  position: absolute;
  top: -50%;
  right: 50%;
  margin-top: 16px;
  z-index: 4;
  text-align: center;
  white-space: nowrap;

  &::before {
    content: '';
    display: block;
    position: absolute;
    left: 100%;
    bottom: 0;
    width: 0;
    height: 0;
    margin-left: -5px;
    margin-bottom: -5px;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 5px solid $color-white;
  }
}

.giftcard-tooltip-label {
  @include font($font-body, $font-family: false);
  position: relative;
  right: -50%;
  display: block;
  min-height: 14px;
  padding: 0.5em 0.75em;
  margin-left: 0.25em;
  font-size: 12px;
  line-height: 16px;
  letter-spacing: $font-body-spacing;
  text-decoration: none;
  text-shadow: none;
  background-color: $color-white;
  border: 0;
  border-radius: 4px;

  small {
    font-size: 0.875em;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }
}

/*================ Medium-down width ================*/
@media screen and (max-width: 580px) {
  .print-link {
    display: none;
  }
}

/*================ Small width ================*/
@media screen and (max-width: 400px) {
  .giftcard-image::before,
  .giftcard-image::after {
    display: none;
  }

  .giftcard-code {
    font-size: 0.75em;
  }

  .giftcard-code--medium {
    font-size: 0.65em;
  }

  .giftcard-code--small {
    font-size: 0.55em;
  }
}


/*============================================================================
  #Print Styles
==============================================================================*/

@media print {
  .giftcard-image::before,
  .giftcard-image::after,
  .giftcard-tooltip {
    display: none;
  }

  .giftcard-actions {
    display: none;
  }
}

