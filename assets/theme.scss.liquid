// {% assign font_settings = 'type_body:bolder|type_heading:bolder,lighter|type_button|type_menu|type_section:bold|type_product_card_title|type_product_price|type_product_vendor|type_footer_heading|type_highlights_bar|type_signpost' %}

// {% if settings.type_body_custom == blank and settings.type_body_enable_bold %}
//   {% assign font_settings = font_settings | append: '|type_body_bold'  %}
// {% endif %}

// {% assign font_display_value = settings.font_display %}
// {% assign font_family_override = false %}
// {% if settings.font_family_override %}
//  {% assign font_family_override = 'inherit' %}
// {% endif %}

{% assign font_settings = font_settings | split: '|' %}
{% assign font_font_display = font_display_value | default: 'auto' %}
{% assign font_font_family_override = font_family_override | default: false %}

{% assign font_scss_variables = '' %}

{% for font_setting in font_settings %}
  {% assign font_info = font_setting | split: ':' %}

  {% comment %}Get setting name{% endcomment %}
  {% assign font_setting_name = font_info[0] %}
  {% assign font_setting_name_custom = font_info[0] | append: '_custom' %}

  {% comment %}Get additional weights{% endcomment %}
  {% assign font_additional_weights = font_info[1] | split: ',' | uniq %}

  {% comment %}Create variables for use in SCSS{% endcomment %}
  {% assign font_scss_base = font_setting_name | replace: '_', '-' | prepend: '$' %}
  {% assign font_scss_reference = font_scss_base %}
  {% assign font_scss_family = font_scss_base | append: '-family' %}
  {% assign font_scss_weights = font_scss_base | append: '-weights' %}
  {% assign font_scss_named_weights = font_scss_base | append: '-named-weights' %}
  {% assign font_scss_styles = font_scss_base | append: '-styles' %}
  {% assign font_scss_named_styles = font_scss_base | append: '-named-styles' %}

  {% comment %}Add the current setting to a list of reference variables{% endcomment %}
  {% assign font_scss_variables = font_scss_variables | append: '|' | append: font_scss_reference %}

  {% assign use_custom_font = false %}
  {% if settings[font_setting_name_custom] != blank %}
    {% assign use_custom_font = true %}
  {% endif %}

  {% if use_custom_font %}
    {% comment %}
  Gets the font family name, the weights and styles, and outputs the font faces
  of the custom font setting textarea.

  Will fallback on the native font setting if a normal font setting isnt supplied

  @param font_setting_name_custom [string]

  @renders [text]
    Each font face found in the custom font setting textarea

  @returns font_named_styles [string]
  @returns font_named_styles_bolder [string]
  @returns font_named_weights [string]
  @returns font_styles [string]
  @returns font_weights [string]
  @returns use_custom_font [boolean]
{% endcomment %}
{% assign font_family = font_setting_name_custom %}

{% assign font_textarea = settings[font_setting_name_custom] %}
{% assign font_textarea_split = font_textarea | newline_to_br | split: '<br />' %}

{% assign font_faces = '@pxu@' | split: '@pxu@' %}
{% assign font_weight_normal = blank %}
{% assign font_weight_lighter = blank %}
{% assign font_weight_bolder = blank %}
{% assign font_styles_normal = '@pxu@' | split: '@pxu@' %}
{% assign font_styles_lighter = '@pxu@' | split: '@pxu@' %}
{% assign font_styles_bolder = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_normal = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_lighter = '@pxu@' | split: '@pxu@' %}
{% assign font_named_styles_bolder = '@pxu@' | split: '@pxu@' %}

{% for font in font_textarea_split %}
  {% assign font_split = font | split: ':' %}
  {% assign font_weight = 400 %}
  {% assign font_weight_name = 'initial' %}
  {% assign font_style = 'normal' %}
  {% assign font_style_name = 'initial' %}

  {% if font_split.size == 1 %}
    {% assign font_file = font_split[0] | strip %}
  {% else %}
    {% assign font_weight_style_space_to_hyphen = font_split[0] | replace: ' ', '-' %}
    {% assign font_weight_style = font_weight_style_space_to_hyphen | split: '-' %}

    {% if font_weight_style.size == 1 %}
      {% assign font_weight_style = font_weight_style[0] | strip | downcase %}

      {% if font_weight_style == 'italic' %}
        {% assign font_style_name = font_weight_style %}
      {% else %}
        {% assign font_weight_name = font_weight_style %}
      {% endif %}
    {% else %}
      {% assign font_weight_name = font_weight_style[0] | strip | downcase %}
      {% assign font_style_name = font_weight_style[1] | strip | downcase %}
    {% endif %}

    {% comment %}
      At this point we should have valid a valid weight and style variables,
      we can continue onto the new iteration if it isnt valid.
    {% endcomment %}
    {% if font_weight_name contains 'initial' != true and font_weight_name contains 'lighter' != true and font_weight_name contains 'bolder' != true %}
      {% continue %}
    {% endif %}
    {% if font_style_name != 'initial' and font_style_name != 'italic' %}
      {% continue %}
    {% endif %}

    {% if font_weight_name contains 'initial' %}
      {% if font_weight_name == 'initial' %}
        {% assign font_weight = 400 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'initial' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 400 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% elsif font_weight_name contains 'lighter' %}
      {% if font_weight_name == 'lighter' %}
        {% assign font_weight = 300 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'lighter' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 300 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% elsif font_weight_name contains 'bolder' %}
      {% if font_weight_name == 'bolder' %}
        {% assign font_weight = 700 %}
      {% else %}
        {% assign font_weight_json = font_weight_name | split: 'bolder' | last | plus: 0 | json %}
        {% assign font_weight_name = font_weight_name | split: font_weight_json | first %}
        {% if font_weight_json contains '"' %}
          {% assign font_weight = 700 %}
        {% else %}
          {% assign font_weight = font_weight_json %}
        {% endif %}
      {% endif %}
    {% endif %}

    {% if font_style_name == 'italic' %}
      {% assign font_style = 'italic' %}
    {% endif %}

    {% assign font_file = font_split[1] | strip %}
  {% endif %}

  {% unless font_weight_name == 'initial' %}
    {% unless font_additional_weights contains font_weight_name %}
      {% continue %}
    {% endunless %}
  {% endunless %}

  {% assign font_file_split = font_file | split: '.' %}

  {% comment %}
    If the assumed file component has a format associated with it,
    treat it as a file otherwise treat it as a family name and dont output a font face.
  {% endcomment %}
  {% if font_file_split.size > 1 %}
    {% assign font_file_format_index = font_file_split | size | minus: 1 %}
    {% assign font_format = font_file_split[font_file_format_index] | strip %}

    {% comment %}
      By checking if a font_file contains a forward slash we can
      determine whether we should treat the file as absolute URL
      or a file that must be sent through the file_url filter.

      This allows externally hosted files to be used as custom fonts.
    {% endcomment %}
    {% capture font_face %}
    @font-face {
      font-family: "{{ font_family }}";
      font-weight: {{ font_weight }};
      font-style: {{ font_style }};
      src:
        url("{% if font_file contains '/' %}{{ font_file }}{% else %}{{ font_file | file_url }}{% endif %}")
        format("{{ font_format }}");
    }
    {% endcapture %}
    {% assign font_face = font_face | append: '@pxu@' | split: '@pxu@' %}
    {% assign font_faces = font_faces | concat: font_face %}
  {% else %}
    {% assign font_family = font_file %}
  {% endif %}

  {% assign font_style_concat = font_style_name | append: '@pxu@' | split: '@pxu@' %}

  {% if font_weight_name == 'initial' %}
    {% assign font_weight_normal = font_weight %}
    {% assign font_styles_normal = font_styles_normal | concat: font_style_concat %}
    {% assign font_named_styles_normal = font_named_styles_normal | concat: font_style_concat %}
  {% elsif font_weight_name == 'lighter' %}
    {% assign font_weight_lighter = font_weight %}
    {% assign font_styles_lighter = font_styles_lighter | concat: font_style_concat %}
    {% assign font_named_styles_lighter = font_named_styles_lighter | concat: font_style_concat %}
  {% elsif font_weight_name == 'bolder' %}
    {% assign font_weight_bolder = font_weight %}
    {% assign font_styles_bolder = font_styles_bolder | concat: font_style_concat %}
    {% assign font_named_styles_bolder = font_named_styles_bolder | concat: font_style_concat %}
  {% endif %}
{% endfor %}

{% comment %}
  If we dont have a normal font, well want to use the native Shopify font picker
  as we assume that a normal font exists.
{% endcomment %}
{% if font_styles_normal.size > 0 %}
  {% assign font_styles_normal = font_styles_normal | join: ',' | prepend: '(' | append: ')' %}
  {% assign font_named_styles_normal = font_named_styles_normal | join: ',' | prepend: '(' | append: ')' %}

  {% assign font_weights = font_weight_normal %}
  {% assign font_named_weights = 'initial' %}
  {% assign font_styles = font_styles_normal %}
  {% assign font_named_styles = font_named_styles_normal %}

  {% if font_styles_lighter.size > 0 %}
    {% assign font_weights = font_weights | append: '|' | append: font_weight_lighter %}
    {% assign font_named_weights = font_named_weights | append: '|' | append: 'lighter' %}
    {% assign font_styles_lighter = font_styles_lighter | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_named_styles_lighter = font_named_styles_lighter | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_styles = font_styles | append: '|' | append: font_styles_lighter %}
    {% assign font_named_styles = font_named_styles | append: '|' | append: font_named_styles_lighter %}
  {% endif %}

  {% if font_styles_bolder.size > 0 %}
    {% assign font_weights = font_weights | append: '|' | append: font_weight_bolder %}
    {% assign font_named_weights = font_named_weights | append: '|' | append: 'bolder' %}
    {% assign font_styles_bolder = font_styles_bolder | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_named_styles_bolder = font_named_styles_bolder | join: ',' | prepend: '(' | append: ')' %}
    {% assign font_styles = font_styles | append: '|' | append: font_styles_bolder %}
    {% assign font_named_styles = font_named_styles | append: '|' | append: font_named_styles_bolder %}
  {% endif %}

  {% comment %}
    If only one weight, add an empty list to styles
    `length()` reports length of nested list if list only has 1 index
  {% endcomment %}
  {% assign font_weights_size = font_weights | split: '|' %}
  {% if font_weights_size.size == 1 %}
    {% assign font_styles = font_styles | append: '|()' %}
    {% assign font_named_styles = font_named_styles | append: '|()' %}
  {% endif %}

  {% comment %}
    Render the font faces
  {% endcomment %}
  {% for font_face in font_faces %}
    {{ font_face }}
  {% endfor %}
{% else %}
  {% assign font_family = blank %}
  {% assign font_named_styles = blank %}
  {% assign font_named_weights = blank %}
  {% assign font_styles = blank %}
  {% assign font_weights = blank %}
  {% assign use_custom_font = false %}
{% endif %}

{% comment %}
  Ensure that all local variables are reset before exiting snippet
{% endcomment %}
{% assign font_face = blank %}
{% assign font_faces = blank %}
{% assign font_file = blank %}
{% assign font_file_format_index = blank %}
{% assign font_file_split = blank %}
{% assign font_format = blank %}
{% assign font_named_styles_bolder = blank %}
{% assign font_named_styles_lighter = blank %}
{% assign font_named_styles_normal = blank %}
{% assign font_split = blank %}
{% assign font_style = blank %}
{% assign font_style_concat = blank %}
{% assign font_style_name = blank %}
{% assign font_styles_bolder = blank %}
{% assign font_styles_lighter = blank %}
{% assign font_styles_normal = blank %}
{% assign font_textarea = blank %}
{% assign font_textarea_split = blank %}
{% assign font_weight = blank %}
{% assign font_weight_bolder = blank %}
{% assign font_weight_json = blank %}
{% assign font_weight_lighter = blank %}
{% assign font_weight_name = blank %}
{% assign font_weight_normal = blank %}
{% assign font_weight_split = blank %}
{% assign font_weight_style = blank %}
{% assign font_weight_style_space_to_hyphen = blank %}
{% assign font_weights_size = blank %}

  {% endif %}

  {% unless use_custom_font %}
    {% comment %}Get the initial FontDrop, and an italic style FontDrop{% endcomment %}
{% assign font_initial = settings[font_setting_name] %}
{% assign font_initial_weight = font_initial.weight | times: 1 %}
{% assign font_italic = font_initial | font_modify: 'style', 'italic' %}
{% assign font_family = font_initial.family | append: ',' | append: font_initial.fallback_families %}
{% assign font_styles = '(' | append: font_initial.style %}
{% assign font_named_styles = '(initial' %}
{% assign font_weights = font_initial_weight %}
{% assign font_named_weights = 'initial' %}

{% unless font_font_family_override %}
  {{ font_initial | font_face: font_display: font_font_display }}
  {{ font_italic | font_face: font_display: font_font_display }}
{% endunless %}

{% comment %}Use the font face italic style if possible, otherwise use something browser friendly{% endcomment %}
{% assign font_initial_italic_style = font_italic.style | default: 'italic' %}
{% assign font_styles = font_styles | append: ', ' | append: font_initial_italic_style %}
{% assign font_named_styles = font_named_styles | append: ', italic' %}

{% assign font_styles = font_styles | append: ')' %}
{% assign font_named_styles = font_named_styles | append: ')' %}

{% comment %}Iterate over each additional weight to load font face, and weights{% endcomment %}
{% for font_adjustment in font_additional_weights %}
  {% assign font_weighted = font_initial | font_modify: 'weight', font_adjustment %}
  {% assign font_styled = font_weighted | font_modify: 'style', 'italic' %}

  {% comment %}If additional weight exists, generate font face{% endcomment %}
  {% unless font_font_family_override %}
    {{ font_weighted | font_face: font_display: font_font_display }}
  {% endunless %}

  {% comment %}Create a default value of the weight adjustment is not possible{% endcomment %}
  {% assign font_adjustment_default = '' %}
  {% case font_adjustment %}
    {% when 'lighter' %}
      {% comment %}Shopify requirement: If lighter variant is not found, use default value of 300{% endcomment %}
      {% assign font_adjustment_default = 300 %}
      {% if font_initial_weight < 300 %}
        {% assign font_adjustment_default = font_initial_weight %}
      {% endif %}
    {% when 'bolder' %}
      {% comment %}Shopify requirement: If bolder variant is not found, use default value of 700{% endcomment %}
      {% assign font_adjustment_default = 700 %}
      {% if font_initial_weight > 700 %}
        {% assign font_adjustment_default = font_initial_weight %}
      {% endif %}
    {% else %}
      {% assign font_adjustment_default = font_adjustment %}
  {% endcase %}
  {% assign font_weighted_value = font_weighted.weight | default: font_adjustment_default %}
  {% assign font_weighted_style = font_weighted.style | default: 'normal' %}

  {% assign font_weights = font_weights | append: '|' | append: font_weighted_value %}
  {% assign font_named_weights = font_named_weights | append: '|' | append: font_adjustment %}
  {% assign font_weighted_styles = font_weighted_styles | append: font_weighted_style %}
  {% assign font_weighted_named_styles = font_weighted_named_styles | append: 'initial' %}

  {% comment %}If italic exists for weight, generate font face{% endcomment %}
  {% unless font_font_family_override %}
    {{ font_styled | font_face: font_display: font_font_display }}
  {% endunless %}
  {% assign font_weighted_italic_style = font_styled.style | default: 'italic' %}
  {% assign font_weighted_styles = font_weighted_styles | append: '|' | append: font_weighted_italic_style %}
  {% assign font_weighted_named_styles = font_weighted_named_styles | append: '|italic' %}

  {% if font_weighted_styles != blank %}
    {% assign font_weighted_styles = font_weighted_styles | split: '|' | join: ', ' %}
    {% assign font_weighted_named_styles = font_weighted_named_styles | split: '|' | join: ', ' %}

    {% assign font_styles = font_styles | append: '|(' | append: font_weighted_styles | append: ')'%}
    {% assign font_named_styles = font_named_styles | append: '|(' | append: font_weighted_named_styles | append: ')'%}
  {% endif %}

  {% assign font_weighted = blank %}
  {% assign font_styled = blank %}
  {% assign font_weighted_styles = blank %}
  {% assign font_weighted_named_styles = blank %}
  {% assign font_adjustment_default = blank %}
  {% assign font_weighted_value = blank %}
  {% assign font_weighted_style = blank %}
  {% assign font_weighted_italic_style = blank %}
{% endfor %}

{% comment %}If only one weight, add an empty list to styles{% endcomment %}
{% comment %}`length()` reports length of nested list if list only has 1 index{% endcomment %}
{% assign font_weights_size = font_weights | split: '|' %}
{% if font_weights_size.size == 1 %}
  {% assign font_styles = font_styles | append: '|()' %}
  {% assign font_named_styles = font_named_styles | append: '|()' %}
{% endif %}

{% comment %}Blank used variables to prevent bleeding{% endcomment %}
{% assign font_italic = blank %}
{% assign font_initial_italic_style = blank %}

  {% endunless %}

  {% comment %}Output variables for setting to SCSS{% endcomment %}
  {{ font_scss_reference }}: {{ font_setting_name }};
  {{ font_scss_family }}: {{ font_family }};
  {{ font_scss_styles }}: ({{ font_styles | split: '|' | join: ', ' }});
  {{ font_scss_named_styles }}: ({{ font_named_styles | split: '|' | join: ', ' }});
  {{ font_scss_weights }}: ({{ font_weights | split: '|' | join: ', ' }});
  {{ font_scss_named_weights }}: ({{ font_named_weights | split: '|' | join: ', ' }});

  {% comment %}Blank used variables to prevent bleeding{% endcomment %}
  {% assign font_info = blank %}
  {% assign font_setting_name = blank %}
  {% assign font_additional_weights = blank %}
  {% assign font_scss_base = blank %}
  {% assign font_scss_reference = blank %}
  {% assign font_scss_family = blank %}
  {% assign font_scss_styles = blank %}
  {% assign font_scss_named_styles = blank %}
  {% assign font_scss_weights = blank %}
  {% assign font_scss_named_weights = blank %}
  {% assign font_family = blank %}
  {% assign font_weights = blank %}
  {% assign font_named_weights = blank %}
  {% assign font_styles = blank %}
  {% assign font_named_styles = blank %}
{% endfor %}

{% assign font_scss_variables = font_scss_variables | remove_first: '|' | split: '|' %}

{% comment %}Build SCSS friendly lists of weights{% endcomment %}
{% assign font_variable_families = '' %}
{% assign font_variable_weights = '' %}
{% assign font_variable_named_weights = '' %}
{% assign font_variable_styles = '' %}
{% assign font_variable_named_styles = '' %}

{% for variable in font_scss_variables %}
  {% assign font_variable_families = font_variable_families | append: ' ' | append: variable | append: '-family' %}
  {% assign font_variable_weights = font_variable_weights | append: ' ' | append: variable | append: '-weights' %}
  {% assign font_variable_named_weights = font_variable_named_weights | append: ' ' | append: variable | append: '-named-weights' %}
  {% assign font_variable_styles = font_variable_styles | append: ' ' | append: variable | append: '-styles' %}
  {% assign font_variable_named_styles = font_variable_named_styles | append: ' ' | append: variable | append: '-named-styles' %}
{% endfor %}

{% comment %}Create SCSS lists of variables, which are used as references in functions{% endcomment %}
$font-variables: ({{ font_scss_variables | join: ' ' }});
$font-variables-families: ({{ font_variable_families | strip }});
$font-variables-weights: ({{ font_variable_weights | strip }});
$font-variables-named-weights: ({{ font_variable_named_weights | strip }});
$font-variables-styles: ({{ font_variable_styles | strip }});
$font-variables-named-styles: ({{ font_variable_named_styles | strip }});

// Find the index of the font setting for cross referencing
@function font-setting-index($font-type) {
  @return index($font-variables, $font-type);
}

// Font
// --------
// Find the index of a font weight from its relative name
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight-index($font-type, $font-weight: initial) {
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $named-weights: nth($font-variables-named-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: index($named-weights, $font-weight);

  // Return index of named weight, or return initial weight
  @return if($weight-index, $weight-index, 1);
}

// Font
// --------
// Find the font family for a font setting
// - [$font-type]: Variable of font to look up
@function font-family($font-type) {
  {% if font_font_family_override %}
    @return {{ font_font_family_override }};
  {% else %}
    @return nth($font-variables-families, font-setting-index($font-type));
  {% endif %}
}

// Font
// --------
// Find a font style relative to a font weight
// - [$font-type]: Variable of font to look up
// - [$font-style]: initial/italic
// - [$font-weight]: lighter/initial/bolder
@function font-style($font-type, $font-style: initial, $font-weight: initial) {
  $style: null;
  $styles: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Get styles based on index of font setting
  $font-styles: nth($font-variables-styles, $font-setting-index);
  $font-named-styles: nth($font-variables-named-styles, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-named-index: font-weight-index($font-type, $font-weight);

  // Get styles available for $font-weight
  $named-weight-style: nth($font-styles, $weight-named-index);
  $named-weight-named-style: nth($font-named-styles, $weight-named-index);

  // Find position of $font-style
  $style-named-index: index($named-weight-named-style, $font-style);

  @if $style-named-index {
    @return nth($named-weight-style, $style-named-index);
  } @else {
    // Return initial font style
    @return nth($named-weight-style, 1);
  }
}

// Font weight
// --------
// Find a font sensitive relative weight
// - [$font-type]: Variable of font to look up
// - [$font-weight]: lighter/initial/bolder
@function font-weight($font-type, $font-weight: initial) {
  $weight: null;

  // Find index of font setting
  $font-setting-index: font-setting-index($font-type);

  // Look up available weights based on index of font setting
  $weights: nth($font-variables-weights, $font-setting-index);

  // Try to find index of desired font weight by cross referencing
  $weight-index: font-weight-index($font-type, $font-weight);

  // Return numerical weight of font
  @return nth($weights, $weight-index);
}

// Font
// --------
// Generate complete font styles for a font setting
// - [$font-type]: Variable of font to look up
// - [$font-family]: true/false
// - [$font-size]: unit/false
// - [$font-style]: initial/italic/false
// - [$font-weight]: lighter/initial/bolder/false
@mixin font(
  $font-type,
  $font-family: true,
  $font-size: false,
  $font-style: initial,
  $font-weight: initial
) {
  @if $font-family { font-family: font-family($font-type); }
  @if $font-size { font-size: $font-size; }
  @if $font-style { font-style: font-style($font-type, $font-style: $font-style, $font-weight: $font-weight ); }
  @if $font-weight { font-weight: font-weight($font-type, $font-weight: $font-weight); }
}

{% assign font_scss_variables = blank %}
{% assign font_font_display = blank %}
{% assign font_font_family_override = blank %}
{% assign font_variable_families = blank %}
{% assign font_variable_weights = blank %}
{% assign font_variable_named_weights = blank %}
{% assign font_variable_styles = blank %}
{% assign font_variable_named_styles = blank %}


// External libraries
/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */

/**
 * 1. Change the default font family in all browsers (opinionated).
 * 2. Correct the line height in all browsers.
 * 3. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

/* Document
   ========================================================================== */

html {
  font-family: sans-serif; /* 1 */
  line-height: 1.15; /* 2 */
  -ms-text-size-adjust: 100%; /* 3 */
  -webkit-text-size-adjust: 100%; /* 3 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */

figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * Remove the outline on focused links when they are also active or hovered
 * in all browsers (opinionated).
 */

a:active,
a:hover {
  outline-width: 0;
}

/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Change the border, margin, and padding in all browsers (opinionated).
 */

fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}


// Setting abstracted libraries
@function strip-units($value) {
  @return ($value / ($value * 0 + 1));
}

@function rem($pxval, $rem-base: 16px) {
  @return (strip-units($pxval) / strip-units($rem-base)) * 1rem;
}

@function rem2px($remval, $px-base: 16px) {
  @return (strip-units($px-base) * strip-units($remval)) * 1px;
}

@function morph($color, $adjustment-value: 2) {
  $lightness: lightness($color);
  $light-color: false;

  @if $lightness > 35% { $light-color: true; }

  @if $light-color {
    $lightness: ($lightness / 20) * $adjustment-value;
    $color: darken($color, $lightness);
  } @else {
    @if $lightness < 2.5% {
      $lightness: 30%;
    } @else if $lightness < 7.5% {
      $lightness: 15%;
    }

    $lightness: ($lightness / 10) * $adjustment-value;
    $color: lighten($color, $lightness);
  }

  $saturation: saturation($color);
  $saturated-color: false;

  @if $saturation > 0% { $saturated-color: true; }

  $saturation: ($saturation / 20);

  @if $saturated-color {
    @if $light-color {
      $color: desaturate($color, $saturation);
    } @else {
      $color: saturate($color, $saturation);
    }
  }

  @return $color;
}

// Check to see if a color is black and transparent
@function color-transparent($color) {
  @if (alpha($color) == 0 and red($color) == 0 and green($color) == 0 and blue($color) == 0) {
    // Color is fully transparent, but black. Return opaque white for further adjustments
    @return rgba(255, 255, 255, 1);
  } @else {
    @return $color;
  }
}

// If background is dark return appropriate color for mixin
@function border-mix($local-background, $local-dark, $local-light) {
  @if(lightness($local-background) >= 50%) {
    @return $local-dark;
  } @else {
    @return $local-light;
  }
}

@function vw($pxval) {
  $vw-context: $max-width / 100;
  @return ($pxval/$vw-context) * 1vw;
}


// Internal libraries
// ! Colors


// Header colors

$color-header-text: {{ settings.color_header_text }};
$color-header-text-hover: {{ settings.color_header_text | color_modify: 'alpha', 0.7 }};
$color-header-text-light: transparentize($color-header-text, 0.8);
$color-header-logo-text: {{ settings.color_header_logo_text }};
$color-header-background: color-transparent({{ settings.color_header_background }});
$color-header-cart-count-badge: {{ settings.color_header_cart_count_background}};
$color-header-cart-count-text: {{ settings.color_header_cart_count_text }};
$color-header-shadow: {{ settings.color_header_shadow }};

// Header search bar

$color-header-search-bar-background: {{ settings.color_header_search_bar_background }};
$color-header-search-bar-border: {{ settings.color_header_search_bar_border }};
$color-header-search-bar-text: {{ settings.color_header_search_bar_text }};
$color-header-search-bar-button-icon: {{ settings.color_header_search_bar_button_icon }};
$color-header-search-bar-button-background: {{ settings.color_header_search_bar_button_background }};

// Header navigation

$color-header-navigation-background: {{ settings.color_header_navigation_background }};
$color-header-navigation-main-menu-text: {{ settings.color_header_navigation_main_menu_text }};
$color-header-navigation-main-menu-text-hover: {{ settings.color_header_navigation_main_menu_text_hover }};
$color-header-navigation-secondary-menu-text: {{ settings.color_header_navigation_secondary_menu_text }};
$color-header-navigation-secondary-menu-text-hover: {{ settings.color_header_navigation_secondary_menu_text_hover }};
$color-header-navigation-dropdown-menu-background: {{ settings.color_header_navigation_dropdown_menu_background }};
$color-header-navigation-dropdown-menu-links: {{ settings.color_header_navigation_dropdown_menu_links }};
$color-header-navigation-dropdown-menu-links-hover: {{ settings.color_header_navigation_dropdown_menu_links_hover }};
$color-header-navigation-meganavigation-promo-text: {{ settings.color_header_navigation_meganavigation_promo_text }};
$color-header-navigation-meganavigation-menu-headings: {{ settings.color_header_navigation_meganavigation_menu_headings }};
$color-header-navigation-mobile-submenu-background: {{ settings.color_header_navigation_mobile_submenu_background }};
$color-header-navigation-sale-link: {{ settings.color_header_navigation_sale_link }};
$color-header-navigation-sale-link-hover: {{ settings.color_header_navigation_sale_link | color_modify: 'alpha', 0.7 }};

// Text

$color-text-headings: {{ settings.color_text_headings }};
$color-text-regular-text: {{ settings.color_text_regular_text }};
$color-text-light-text: {{ settings.color_text_light_text }};
$color-text-links: {{ settings.color_text_links }};
$color-text-links-hover: {{ settings.color_text_links_hover }};
$color-text-regular-text-encoded: "{{ settings.color_text_headings | color_to_hex | replace: '#', '' }}";

// Buttons

$color-buttons-primary-button-background: {{ settings.color_buttons_primary_button_background }};
$color-buttons-primary-button-text: {{ settings.color_buttons_primary_button_text }};
$color-buttons-primary-button-cta-text: {{ settings.color_buttons_primary_button_cta_text }};
$color-buttons-primary-button-cta-background: {{ settings.color_buttons_primary_button_cta_background }};
$color-buttons-primary-button-background-hover: {{ settings.color_buttons_primary_button_background_hover }};
$color-buttons-secondary-button-background: {{ settings.color_buttons_secondary_button_background }};
$color-buttons-secondary-button-border: {{ settings.color_buttons_secondary_button_border }};
$color-buttons-secondary-button-text: {{ settings.color_buttons_secondary_button_text }};
$color-buttons-secondary-button-text-hover: {{ settings.color_buttons_secondary_button_text_hover }};
$color-buttons-secondary-button-border-hover: {{ settings.color_buttons_secondary_button_border_hover }};
$color-buttons-secondary-button-background-hover: {{ settings.color_buttons_secondary_button_background_hover }};
$color-buttons-sold-out-button-text: {{ settings.color_buttons_sold_out_button_text }};
$color-buttons-sold-out-button-background: {{ settings.color_buttons_sold_out_button_background }};

$color-buttons-disabled-text: #696969;
$color-buttons-disabled-background: #ebebeb;

// Forms

$color-forms-input-placeholder-text: {{ settings.color_forms_input_placeholder_text }};
$color-forms-input-text: {{ settings.color_forms_input_text }};
$color-forms-input-background: {{ settings.color_forms_input_background }};
$color-forms-input-border: {{ settings.color_forms_input_border }};
$color-forms-selected-input: {{ settings.color_forms_selected_input }};

$color-forms-input-border-hover: morph($color-forms-input-border, 2);

// Products

$color-products-vendor-name: {{ settings.color_products_vendor_name }};
$color-products-regular-price: {{ settings.color_products_regular_price }};
$color-products-compare-at-price: {{ settings.color_products_compare_at_price }};
$color-products-sale-price: {{ settings.color_products_sale_price }};
$color-products-sale-badge-text: {{ settings.color_products_sale_badge_text }};
$color-products-sale-badge: {{ settings.color_products_sale_badge }};
$color-products-sold-out-badge-text: {{ settings.color_products_sold_out_badge_text }};
$color-products-sold-out-badge: {{ settings.color_products_sold_out_badge }};
$color-products-product-gallery-active-thumbnail: {{ settings.color_products_product_gallery_active_thumbnail }};
$color-products-product-image-backgrounds: {{ settings.color_products_product_image_backgrounds }};
$color-products-in-stock: {{ settings.color_products_in_stock }};
$color-products-low-stock: {{ settings.color_products_low_stock }};
$color-products-no-stock: {{ settings.color_products_no_stock }};

// Product cards

$color-product-cards-background: {{ settings.color_product_cards_background }};

// Product reviews

$color-product-reviews-star-rating-border: {{ settings.color_product_reviews_star_rating_border }};
$color-product-reviews-star-rating-active: {{ settings.color_product_reviews_star_rating_active }};

// Layout

$color-layout-site-background: {{ settings.color_layout_site_background }};
$color-layout-secondary-backgrounds: {{ settings.color_layout_secondary_backgrounds }};
$color-layout-dividers: {{ settings.color_layout_dividers }};

// Content containers

$color-content-containers-background: {{ settings.color_content_containers_background }};

// Popups

$color-popups-background: {{ settings.color_popups_background }};

// Site overlays

$color-site-overlays-background: rgba({{ settings.color_site_overlays_overlay }}, {{ settings.color_site_overlays_opacity | divided_by: '100.00' }});

// Footer

$color-footer-background: {{ settings.color_footer_background }};
$color-footer-headings: {{ settings.color_footer_headings }};
$color-footer-text: {{ settings.color_footer_text }};
$color-footer-text-link: {{ settings.color_footer_text_link }};
$color-footer-text-link-hover: {{ settings.color_footer_text_link_hover }};
$color-footer-menu-list-link: {{ settings.color_footer_menu_list_link }};
$color-footer-menu-list-link-hover: {{ settings.color_footer_menu_list_link_hover }};
$color-footer-additional-menu-link: {{ settings.color_footer_additional_menu_link }};
$color-footer-additional-menu-link-hover: {{ settings.color_footer_additional_menu_link_hover }};
$color-footer-copyright-text: {{ settings.color_footer_copyright_text }};

$color-additional-accent: transparentize($color-footer-text, 0.5);

// Social icons

$color-facebook: #4267b1;
$color-twitter: #1da1f2;
$color-pinterest: #cc2129;
$color-instagram: #000;
$color-tumblr: #001935;
$color-vimeo: #1eb8ea;
$color-youtube: #ff0000;
$color-linkedin: #0077b5;

// Placeholders
$color-placeholder-background: mix($color-text-regular-text, $color-layout-site-background, 8%);
$color-placeholder-fill: mix($color-text-regular-text, $color-layout-site-background, 35%);

// General
$color-black: #000;
$color-white: #fff;
$color-border: mix($color-layout-site-background, border-mix($color-layout-site-background, $color-black, $color-white));
$color-border-soft: transparentize(border-mix($color-layout-site-background, $color-black, $color-white), 0.85);

$color-box-shadow-border: transparentize($color-border, 0.84);
$color-box-shadow-shadow: transparentize($color-border, 0.89);
$color-box-shadow-border-focused: transparentize($color-border, 0.5);
$color-box-shadow-shadow-focused: transparentize($color-border, 0.5);

$color-error: #f05d5d;
$color-success: #51a551;
$color-highlight: #fffbd9;


// ! Typography

// Fonts
$font-heading: $type-heading;
$font-body: $type-body;
{% if settings.type_body_custom == blank and settings.type_body_enable_bold %}
  $font-body-bold: $type-body-bold;
  $use-alternate-font-body-bold: true;
{% else %}
  $font-body-bold: $type-body;
  $use-alternate-font-body-bold: false;
{% endif %}
$font-button: $type-button;
$font-menu: $type-menu;
$type-menu-sizing: {{ settings.type_menu_size | divided_by: 100.0 }};
$font-section: $type-section;
$font-product-card-title: $type-product-card-title;
$font-product-price: $type-product-price;
$font-product-vendor: $type-product-vendor;
$font-footer-heading: $type-footer-heading;
$font-highlights-bar: $type-highlights-bar;
$font-signpost: $type-signpost;

// Base Size
$font-size-base: {{ settings.type_size_base }};
$font-size-base-mobile: 15px;
$font-size-base-form: 16px;

// Headings size adjustment
$font-heading-sizing: {{ settings.type_heading_size | divided_by: '100.00' }};
$section-heading-sizing: {{ settings.type_section_heading_size | divided_by: '100.00' }};
$section-subheading-sizing: {{ settings.type_section_subheading_size | divided_by: '100.00' | append: 'em' }};
$font-footer-heading-sizing: {{ settings.type_footer_heading_size | divided_by: 100.0 | append: 'em' }};

// Letter spacing
$font-heading-spacing: {{ settings.type_heading_spacing | divided_by: 100.0 | append: 'em' }};
$font-body-spacing: {{ settings.type_body_spacing | divided_by: 100.0 | append: 'em' }};
$font-menu-spacing: {{ settings.type_menu_spacing | divided_by: 100.0 | append: 'em' }};
$font-button-spacing: {{ settings.type_button_spacing | divided_by: 100.0 | append: 'em' }};
$font-button-sizing: {{ settings.type_button_sizing | divided_by: 100.0 }};
$font-section-spacing: {{ settings.type_section_spacing | divided_by: 100.0 | append: 'em' }};
$font-product-vendor-spacing: {{ settings.type_product_vendor_spacing | divided_by: 100.0 | append: 'em' }};
$font-footer-heading-spacing: {{ settings.type_footer_heading_spacing | divided_by: 100.0 | append: 'em' }};
$font-highlights-spacing: {{ settings.type_highlights_spacing | divided_by: 100.0 | append: 'em' }};

// Capitalization
$font-heading-capitalize: {{ settings.type_heading_capitalize }};
$font-menu-capitalize: {{ settings.type_menu_capitalize }};
$font-button-capitalize: {{ settings.type_button_capitalize }};
$font-section-capitalize: {{ settings.type_section_capitalize }};
$font-product-capitalize: {{ settings.type_product_capitalize }};
$font-footer-heading-capitalize: {{ settings.type_footer_heading_capitalize }};
$font-highlights-capitalize: {{ settings.type_highlights_capitalize }};

// Other
$font-body-underline-links: {{ settings.type_body_underline_links }};

// font sizes should be adjusted by this much if all caps.
$capitalize_adjustment: -1;

// Font sizes
$font-body-size: $font-size-base;
$font-body-size-small: rem($font-size-base - 1px); // 15px
$font-body-size-smaller: rem($font-size-base - 2px); // 14px
$font-body-size-smallest: rem($font-size-base - 3px); // 13px
$font-heading-large: rem($font-size-base * 2.125); // 34px
$font-heading-medium: rem($font-size-base * 1.875); // 32px
$font-h1-size: rem($font-size-base * 1.75); // 28px
$font-h2-size: rem($font-size-base * 1.625); // 26px
$font-h3-size: rem($font-size-base * 1.5); // 24px
$font-h4-size: rem($font-size-base * 1.25); // 20px
$font-h5-size: rem($font-size-base * 1.125); // 18px
$font-h6-size: rem($font-size-base); // 16px
$font-product-card-sizing: {{ settings.type_product_card_size | divided_by: 100.0 }};
$font-highlights-sizing: {{ settings.type_highlights_size | divided_by: 100.0 }};
$font-signpost-sizing: {{ settings.type_signpost_sizing | divided_by: 100.0 }};
// ! Spacing

// Vertical spaces
$space-xxx-small: rem($font-body-size * 0.25); // 4px
$space-xx-small: rem($font-body-size * 0.5); // 8px
$space-x-small: rem($font-body-size * 0.75); // 12px
$space-small: rem($font-body-size); // 16px
$space-medium: rem($font-body-size * 1.25); // 20px
$space-large: rem($font-body-size * 1.75); // 28px
$space-x-large: rem($font-body-size * 2); // 36px
$space-xx-large: rem($font-body-size * 3.125); // 50px
$space-xxx-large: rem($font-body-size * 4.25); // 68px
$space-section-heading: rem(42px);

$space-input-padding-horizontal: rem(14px);
$space-input-padding-vertical-base: rem(15px);
$space-input-padding-vertical-bottom: rem(15px);
$space-input-padding-vertical-top: rem(15px);

// Layout
$max-width: {{ settings.layout_max_width | append: 'px' }};
$page-max-width: {{ settings.page_content_width | append: 'px' }};
$gutter-outer-small: 10px;
$gutter-outer-medium: 15px;
$gutter-outer: 25px;
$gutter-content: 20px;

// ! Z-Indices

$index-header: 700;
$index-header-navmenu: $index-header + 2;
$index-banner: 800;
$index-main: 500;
$index-footer: 500;
$index-mobile-nav: $index-header + 100;
$index-modal: $index-mobile-nav + 100;

$index-header-search: 150;
$index-header-internal-icons: 125;

// ! Breakpoints

$bp-xxs: 375px;
$bp-xs: 525px;
$bp-smaller: 680px;
$bp-small: 720px;
$bp-medium: 860px;
$bp-large: 1024px;
$bp-larger: 1080px;
$bp-xl: 1280px;

{% if settings.layout_max_width == 1200 %}
  $bp-xxl: 1250px;
{% elsif settings.layout_max_width == 1300 %}
  $bp-xxl: 1350px;
{% elsif settings.layout_max_width == 1400 %}
  $bp-xxl: 1450px;
{% elsif settings.layout_max_width == 1500 %}
  $bp-xxl: 1550px;
{% elsif settings.layout_max_width == 1600 %}
  $bp-xxl: 1660px;
{% endif %}

// ! Components

// Container

$container-border-radius: {{ settings.container_border_radius | append: 'px' }};
$container-border-radius-sm: {{ settings.container_border_radius | divided_by: 2.0 | append: 'px' }};

// Button font sizes
$button-x-large-size: rem($font-size-base * 1.3125); // 21px
$button-large-size: rem($font-size-base * 1.125); // 18px
$button-medium-size: rem($font-size-base); // 16px
$button-small-size: rem($font-size-base * 0.875); // 14px
$button-border-radius: {{ settings.button_border_radius | append: 'px' }};

// Checkbox settings
$checkbox-size: (13px, 13px);
$checkbox-border: $color-forms-input-border;
$checkbox-inactive: $color-forms-input-background;
$checkbox-active: $color-text-links;

// Form input settings
$form-border-radius: {{ settings.form_border_radius | append: 'px' }};
$form-border-radius-sm: {{ settings.form_border_radius | divided_by: 2.0 | append: 'px' }};

// Transitions
$ease-out-quad: cubic-bezier(0.250, 0.460, 0.450, 0.940);
$ease-out-ripple: cubic-bezier(0.330, 0.810, 0.585, 0.990);
$ease-bubble: cubic-bezier(0.3, 0, 0, 1);

// Logo widths
$header-logo-image-max-width: 100px;
$header-content-offset-right: 305px; // My account + Logout

$site-nav-item-space: 8px;
$site-nav-link-space: 7px;
$site-nav-link-space-vertical: 12px;
$site-nav-link-space-horizontal: 15px;
$site-subnav-space: 15px;

 // Header Settings
$header-content-height: 46px;
$header-padding-vertical-mobile: 10px;
$header-padding-vertical: 20px;
$header-padding-vertical-sticky: 10px;
$header-line-height: $font-body-size + 2px;

// Product grid settings
$grid-column-space-desktop: {{ settings.product_grid_column_space_desktop | append: 'px' }};
$grid-row-space-desktop: {{ settings.product_grid_row_space_desktop | append: 'px' }};
$grid-column-space-mobile: {{ settings.product_grid_column_space_mobile | append: 'px' }};
$grid-row-space-mobile: {{ settings.product_grid_row_space_mobile | append: 'px' }};
$sidebar-width: 185px;
$product-card-border-radius: {{ settings.product_card_border_radius | append: 'px' }};

// Product page settings
$color-slider-accent: $color-text-links;
$color-slider-dot: mix($color-text-regular-text, $color-layout-site-background, 23%);
$quantity-width: rem(115px);

// Featured blog post
$color-featured-post-background: $color-text-links;
$color-featured-post-foreground: $color-layout-site-background;

// Swatch settings
$swatches-size-product-page: {{ settings.swatches_product_page_size }}px;
$swatches-size-product-card: {{ settings.swatches_product_card_size }}px;
$swatches-size-sidebar-filter: {{ settings.swatches_sidebar_filter_size }}px;
$swatches-shape: {{ settings.swatches_shape }};

@mixin media($max: false, $min: false) {
  @if $max {
    @if $min {
      @media screen and (max-width: $max - 1) and (min-width: $min) { @content; }
    } @else {
      @media screen and (max-width: $max - 1) { @content; }
    }
  } @else {
    @media screen and (min-width: $min) { @content; }
  }
}

// Reusable button style for changing button sizes at different break points
@mixin button-size($button-size) {
  $padding: false;

  @if $button-size == small {
    @include font-size-button-small($font-button-capitalize, -2);
    $padding: (11px, 22px);
  } @else if $button-size == medium {
    @include font-size-button-medium($font-button-capitalize, -2);
    $padding: (14px, 22px);
  } @else if $button-size == large {
    @include font-size-button-large($font-button-capitalize, -2);
    $padding: (14px, 34px);
  } @else if $button-size == x-large {
    @include font-size-button-x-large($font-button-capitalize, -2);
    $padding: (14px, 42px);
  }

  @include capitalize($font-button-capitalize);
  padding: rem(nth($padding, 1)) rem(nth($padding, 2));
  letter-spacing: $font-button-spacing;
}

@mixin header-shadow {
  $color-header-shadow-alpha: {{ settings.color_header_shadow | color_extract: 'alpha' }};

  @if ($color-header-shadow-alpha != 0) {
    box-shadow: 0 1px 4px transparentize($color-header-shadow, 0.75);
  }
}

@mixin grid-gutter($size) {
  margin-right: -$size;
  margin-left: -$size;

  > * {
    margin-right: $size;
    margin-left: $size;
  }
}

@mixin mobile-scrolling() {
  overflow-x: scroll;
  white-space: nowrap;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }
}

// ! Font mixins

@mixin capitalize($capitalize) {
  @if $capitalize == true {
    text-transform: uppercase;
  } @else {
    text-transform: none;
  }
}


@function capitalize_adjustment($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  @if $use_capitalize_adjustment {
    @return $adjustment_amount;
  } @else {
    @return 0;
  }
}

@mixin font-body-bold($font-style: initial) {
  @if $use-alternate-font-body-bold {
    @include font($font-body-bold, $font-weight: initial, $font-style: $font-style);
  } @else {
    @include font($font-body-bold, $font-weight: bolder, $font-style: $font-style);
  }
}

@mixin font-body-underline-links {
  @if $font-body-underline-links {
    text-decoration: underline;
  }
}

@mixin font-size-heading-large($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 2.125 * $heading-size-setting + $adjustment); // 34px

  @include media($bp-small) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 2.125 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-medium($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.875 * $heading-size-setting + $adjustment); // 32px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.875 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-1($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -3, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.75 * $heading-size-setting + $adjustment); // 28px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.75 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-2($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.625 * $heading-size-setting + $adjustment); // 26px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.625 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-3($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: $capitalize_adjustment, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount: -2);

  font-size: rem($font-size-base * 1.5 * $heading-size-setting + $adjustment); // 24px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.5 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-4($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 * $heading-size-setting + $adjustment); // 20px

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.25 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-heading-5($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-heading-6($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-section-heading($use_capitalize_adjustment: $font-heading-capitalize, $adjustment_amount: -2, $heading-size-setting: $font-heading-sizing) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.5 * $heading-size-setting + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($heading-size-setting, 0.4);
    font-size: rem($font-size-base-mobile * 1.5 * $mobile-scale + $adjustment);
  }
}

@mixin font-size-highlight-banner-heading($use_capitalize_adjustment: $font-highlights-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 * $font-highlights-sizing + $adjustment); // 18px

  @include media($bp-large) {
    $mobile-scale: mobile-font-scaling($font-highlights-sizing, 0.6);
    font-size: rem($font-size-base-mobile * $mobile-scale + $adjustment);
  }
}

@mixin font-size-body-larger($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.375 + $adjustment); // 22px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.375 + $adjustment);
  }
}

@mixin font-size-body-large($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.25 + $adjustment); // 20px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.25 + $adjustment);
  }
}

@mixin font-size-body-medium($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 + $adjustment);
  }
}

@mixin font-size-body($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile + $adjustment);
  }
}

@mixin font-size-form($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-form + $adjustment);
  }
}

@mixin font-size-body-small($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.9375 + $adjustment); // 15px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.9375 + $adjustment);
  }
}

@mixin font-size-body-smaller($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875 + $adjustment);
  }
}

@mixin font-size-body-smallest($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.8125 + $adjustment); // 13px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.8125 + $adjustment);
  }
}

@mixin font-size-body-tiny($use_capitalize_adjustment: false, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.75 + $adjustment); // 12px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.75 + $adjustment);
  }
}
@mixin font-size-product-card($base-size: $font-size-base) {

  font-size: rem($base-size * $font-product-card-sizing);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($font-product-card-sizing);
    font-size: rem($font-size-base-mobile * $mobile-scale);
  }
}

@mixin font-size-button-small($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 0.875 * $font-button-sizing + $adjustment); // 14px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 0.875 * $font-button-sizing);
  }
}

@mixin font-size-button-medium($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $font-button-sizing + $adjustment); // 16px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * $font-button-sizing  + -1);
  }
}

@mixin font-size-button-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.125 * $font-button-sizing + $adjustment); // 18px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.125 * $font-button-sizing + -1);
  }
}

@mixin font-size-button-x-large($use_capitalize_adjustment: $font-button-capitalize, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * 1.3125 * $font-button-sizing + $adjustment); // 21px

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * 1.3125 * $font-button-sizing + -1);
  }
}

@mixin font-size-button-signpost() {
  font-size: rem($font-size-base * $font-signpost-sizing);

  @include media($bp-medium) {
    font-size: rem($font-size-base-mobile * $font-signpost-sizing);
  }
}

@mixin font-size-menu-large($use_capitalize_adjustment: false, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $type-menu-sizing * 1.0625 + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($type-menu-sizing, 0.5);
    font-size: rem($font-size-base-mobile * 1.0625 * $mobile-scale + -1);
  }
}

@mixin font-size-menu($use_capitalize_adjustment: $font-menu-capitalize, $adjustment_amount: $capitalize_adjustment) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $type-menu-sizing + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($type-menu-sizing, 0.5);
    font-size: rem($font-size-base-mobile * $mobile-scale + $adjustment);
  }
}

@mixin font-size-footer-heading($use_capitalize_adjustment: false, $adjustment_amount: -2) {
  $adjustment: capitalize_adjustment($use_capitalize_adjustment, $adjustment_amount);

  font-size: rem($font-size-base * $font-footer-heading-sizing * 1.125 + $adjustment);

  @include media($bp-medium) {
    $mobile-scale: mobile-font-scaling($font-footer-heading-sizing, 0.4);
    font-size: rem($font-size-base-mobile * $mobile-scale * 1.125 + $adjustment);
  }
}

@mixin font-size-input {
  font-size: rem($font-size-base); // 16px

  @include media($bp-medium) {
    font-size: rem(16px); // Force 16px regardless of base size
  }
}

@function mobile-font-scaling($selected_scale: 1, $font_adjustment: 0.6) {
  @return ($selected_scale - 1) * $font_adjustment + 1;
}

// Typography

%heading {
  @include font($font-heading);
  @include capitalize($font-heading-capitalize);
  letter-spacing: $font-heading-spacing;

  b,
  strong {
    font-weight: font-weight($font-heading, $font-weight: bolder);
  }

  em {
    font-style: font-style($font-heading, $font-style: italic);
  }

  b em,
  strong em,
  em b,
  em strong {
    font-style: font-style($font-heading, $font-weight: bolder, $font-style: italic);
  }
}

%h1 {
  @extend %heading;
  @include font-size-heading-1($font-heading-capitalize, -3);
}

%h2 {
  @extend %heading;
  @include font-size-heading-2($font-heading-capitalize, -2);
}

%h3 {
  @extend %heading;
  @include font-size-heading-3($font-heading-capitalize, -2);
}

%h4 {
  @extend %heading;
  @include font-size-heading-4($font-heading-capitalize, -2);
}

%h5 {
  @extend %heading;
  @include font-size-heading-5($font-heading-capitalize, -2);
}

%h6 {
  @extend %heading;
  @include font-size-heading-6($font-heading-capitalize, -2);
}

%menu {
  @include font($font-menu);
  @include font-size-menu($font-menu-capitalize);
  @include capitalize($font-menu-capitalize);
  letter-spacing: $font-menu-spacing;
}

%button-base {
  @include button-size(small);
  @include font($font-button);
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  border-radius: $button-border-radius;
  transition: (
    border-color 0.2s ease,
    background-color 0.2s ease,
    width 0.2s ease,
    height 0.2s ease
  );
}

%button-disable {
  &,
  &:active,
  &:focus {
    color: $color-buttons-disabled-text;
    cursor: default;
    background-color: $color-buttons-disabled-background;
    border: 1px solid $color-buttons-disabled-background;
  }
}

%button-primary {
  @extend %button-base;
  color: $color-buttons-primary-button-text;
  background-color: $color-buttons-primary-button-background;
  border: 1px solid $color-buttons-primary-button-background;

  &:not(.disabled):hover {
    background: $color-buttons-primary-button-background-hover;
    border: 1px solid $color-buttons-primary-button-background-hover;
  }

  &:active,
  &:focus {
    background: $color-buttons-primary-button-background-hover;
    border: 1px solid $color-buttons-primary-button-background-hover;
  }

  &.disabled { @extend %button-disable; }
}

%button-secondary {
  @extend %button-base;
  color: $color-buttons-secondary-button-text;
  background-color: $color-buttons-secondary-button-background;
  border: 1px solid $color-buttons-secondary-button-border;

  &:not(.disabled):hover {
    color: $color-buttons-secondary-button-text-hover;
    background: $color-buttons-secondary-button-background-hover;
    border: 1px solid $color-buttons-secondary-button-border-hover;
  }

  &:active,
  &:focus {
    background: $color-buttons-secondary-button-background-hover;
    border: 1px solid $color-buttons-secondary-button-border-hover;
  }

  &.disabled { @extend %button-disable; }
}

// Layout
%layout-container {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-small, $max: $bp-larger) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: $gutter-content * 2;
    padding-left: $gutter-content * 2;
  }
}


%section-container {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-small) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: calc(#{$gutter-content * 2});
    padding-left: calc(#{$gutter-content * 2});
  }
}

%layout-container--reset {
  max-width: 100%;
  padding-right: 0;
  padding-left: 0;

  @include media($min: $bp-large) {
    padding-right: 0;
    padding-left: 0;
  }
}

%page-content {
  margin-top: $gutter-content * 1.5;
  margin-bottom: $gutter-content * 1.5;

  @include media($min: $bp-large) {
    margin-top: $gutter-content * 2.5;
    margin-bottom: $gutter-content * 2.5;
  }
}

%clearfix {
  &::before,
  &::after {
    display: table;
    content: "";
  }

  &::after {
    clear: both;
  }
}

%link--text {
  color: $color-text-regular-text;
  text-decoration: none;
  transition: color 0.1s ease;

  &:hover {
    color: $color-text-links;
  }
}

%link--default {
  color: $color-text-links;
  text-decoration: none;
  transition: color 0.1s ease;

  &:hover {
    color: $color-text-links-hover;
  }
}

%box-shadow {
  border: 1px solid $color-box-shadow-border;
  box-shadow: 0 1px 4px $color-box-shadow-shadow;
}

%inline-chevron {
  display: inline-block;
  margin-left: rem(5px);
  vertical-align: middle;

  svg {
    display: block;
    margin-top: rem(-2px);
    transform: rotate(-90deg);
  }
}

%icon-checkbox {
  display: inline-block;
  width: nth($checkbox-size, 1);
  height: nth($checkbox-size, 2);
  color: $checkbox-inactive;
  vertical-align: middle;

  svg {
    display: block;
    width: 100%;
    height: 100%;
    background-color: $checkbox-inactive;
    border: 1px solid $checkbox-border;
    border-radius: $form-border-radius-sm;
    fill: currentColor;
  }
}

%icon-checkbox--active {
  color: $checkbox-active;

  svg {
    background-color: transparent;
    border: 0;
    border-radius: $form-border-radius-sm;
    fill: currentColor;
  }
}

%button-reset {
  @include font($font-body, $font-weight: bolder);
  padding: 0;
  letter-spacing: $font-body-spacing;
  cursor: pointer;
  background: transparent;
  border: 0;
  -webkit-appearance: normal;
     -moz-appearance: normal;
          appearance: normal;
}

%atc-button {
  position: relative;

  .atc-button--text {
    opacity: 1;
  }

  .atc-button--icon {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.6s linear infinite;
    transition: opacity 0.1s ease 0.1s;

    svg {
      display: block;
      width: 26px;
      height: 26px;
    }
  }

  &.processing {
    .atc-button--text {
      opacity: 0;
    }

    .atc-button--icon {
      opacity: 1;
      visibility: visible;
    }
  }
}

%search-button {
  position: relative;
  padding-left: 15px;
  padding-right: 15px;

  .search-icon--inactive,
  .search-icon--active {
    display: inline-block;
  }

  svg {
    display: block;
    width: 100%;
    height: 100%;
  }

  .search-icon--inactive {
    height: 23px;
    opacity: 1;
    transition: opacity 0.1s ease;
  }

  .search-icon--active {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 26px;
    height: 26px;
    margin-top: -13px;
    margin-left: -13px;
    opacity: 0;
    visibility: hidden;
    animation: rotate 0.7s cubic-bezier(0.69, 0.31, 0.56, 0.83) infinite;
  }

  &.search-icon--processing {
    .search-icon--inactive {
      opacity: 0;
      transition-delay: 0s;
    }

    .search-icon--active {
      opacity: 1;
      visibility: visible;
    }
  }
}

%message--base {
  @include font($font-body, $font-weight: bolder, $font-family: false);
  @include font-size-body;
  letter-spacing: $font-body-spacing;

  a {
    color: currentColor;
  }
}

%message--error {
  @extend %message--base;
  color: $color-error;
  background-color: mix($color-error, $color-layout-site-background, 18%);
}

%message--success {
  @extend %message--base;
  color: $color-success;
  background-color: mix($color-success, $color-layout-site-background, 18%);
}

%sneak-in {

  &.animating,
  &.visible:not(.animating) {
    display: block;
  }

  &.visible:not(.animating) {
    opacity: 1;
    transform: translate(0);
  }

  &.animating-in {
    animation-delay: 0s;
    animation-duration: 0.27s;
    animation-name: sneak-in;
    animation-timing-function: linear;
    animation-fill-mode: both;
    animation-direction: normal;
  }

  &.animating-out {
    opacity: 0;
    transform: translateY(-5px);
    transition: all 0.12s cubic-bezier(1, 0, 0.7, 1);
  }
}

%fade-in {
  animation-delay: 0s;
  animation-duration: 0.27s;
  animation-name: fade-in;
  animation-timing-function: linear;
  animation-fill-mode: both;
  animation-direction: normal;
}

%no-results--wrapper {
  width: 100%;
  margin-top: $space-xx-large;
  text-align: center;

  @include media($min: $bp-small) {
    margin-top: $space-xx-large - $space-large;
  }
}

%no-results--title {
  @include font($font-body);
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: 0;
  letter-spacing: $font-body-spacing;
  color: $color-text-headings;
}

%no-results--button {
  @extend %button-primary;
  @include button-size(medium);
  margin-top: $space-medium;
}

// Buttons

.button-primary {
  @extend %button-primary;
}

.button-secondary {
  @extend %button-secondary;
}

.button-icon {
  @extend %inline-chevron;
  margin-left: 3px;

  svg {
    width: rem(14px * $font-button-sizing);
    height: rem(14px * $font-button-sizing);
    margin-top: rem(-3px);
  }
}

.button-signpost {
  @include font($font-signpost);
  @include font-size-button-signpost;
  display: block;
  padding: 0;
  margin-top: $space-medium;
  letter-spacing: 0;
  text-decoration: none;
  text-transform: none;

  @include media($min: $bp-medium) {
    margin-top: $space-large;
  }

  .signpost-icon {
    @extend %inline-chevron;
    margin-left: 2px;

    svg {
      width: 0.75rem;
      height: 0.75rem;
      margin-top: 0;
    }
  }
}

#messageus_button {
  z-index:9999;
}

%form-control-base {
  @include font($font-body);
  @include font-size-form;
  z-index: 1;
  width: 100%;
  padding: $space-input-padding-vertical-top $space-input-padding-horizontal $space-input-padding-vertical-bottom;
  letter-spacing: $font-body-spacing;
  color: $color-forms-input-text;
  background-color: $color-forms-input-background;
  border: 1px solid $color-forms-input-border;
  border-radius: $form-border-radius;

  &:focus {
    border-color: $color-forms-selected-input;
    outline: 0;
  }

  &.form-field-error {
    border-color: $color-error;
  }

  .no-label & {
    @extend %form-control-no-label;
  }
}

%form-label {
  @include font-size-body;
  line-height: 1;
  color: $color-forms-input-placeholder-text;
}

%form-control-no-label {
  padding-top: $space-input-padding-vertical-base;
  padding-bottom: $space-input-padding-vertical-base;
}

%form-control-input {
  width: 100%;

  &:-ms-input-placeholder {
    color: currentColor;
    opacity: 0;
    -ms-transition: opacity 0.12s $ease-out-quad;
    transition: opacity 0.12s $ease-out-quad;
  }

  &::placeholder {
    color: currentColor;
    opacity: 0;
    transition: opacity 0.12s $ease-out-quad;
  }

  + .form-field-title::before {
    position: absolute;
    top: 50%;
    left: -4px;
    z-index: -1;
    width: calc(100% + 8px);
    height: 1px;
    background-color: $color-forms-input-background;
    content: "";
    // Scaling 10% of height is necessary to avoid sub-pixel rendering issues
    transform: scaleY(1.1);
    transition-delay: 0.12s;
  }

  .no-js &,
  &:focus,
  &.form-field-filled,
  &.form-field-select {
    &:-ms-input-placeholder {
      z-index: 3;
      opacity: 0.6;
      transition-delay: 0.12s;
    }
    &::placeholder {
      z-index: 3;
      opacity: 0.6;
      transition-delay: 0.12s;
    }

    + .form-field-title {
      top: -0.5em;
      z-index: 3;
      font-size: rem(13px);
      transition-delay: 0.12s;
      transition-property: top, font-size;

      &::before {
        position: absolute;
        top: 0.5em;
        left: -4px;
        z-index: -1;
        width: calc(100% + 8px);
        height: 1px;
        background-color: $color-forms-input-background;
        content: "";
        transition-delay: 0s;
      }
    }
  }

  &:focus {
    + .form-field-title {
      color: $color-forms-selected-input;
    }
  }

  .no-label & {
    &:-ms-input-placeholder {
      opacity: 0.4;
    }
    &::placeholder {
      opacity: 0.4;
    }
  }
}

// TODO: Find way to prevent content scrolling in paddings
%form-control-textarea {
  line-height: 1.5;
  max-width: 100%;
  max-height: 500px;
  min-width: 100%;
  min-height: 150px;
}

// Form layout
.form-fields-columns {
  @extend %clearfix;

  @include media($min: $bp-small) {
    margin-right: -1 * $gutter-content / 2;
    margin-left: -1 * $gutter-content / 2;

    .form-field {
      float: left;
      margin-right: $gutter-content / 2;
      margin-left: $gutter-content / 2;
    }

    .form-field--half {
      width: calc(50% - #{$gutter-content});
    }
  }

  + .form-field {
    clear: left;
  }
}

.form-action-row {
  margin-top: $space-medium;

  .button-primary,
  .button-secondary {
    + .button-primary,
    + .button-secondary {
      margin-left: $space-xx-small;
    }
  }
}

.form-field {
  position: relative;
}

.form-field-input,
.form-field-select {
  @extend %form-control-base;
}

.form-field-input {
  @extend %form-control-input;
}
input[name="address[default]"]:focus ~ .form-icon--checkbox {
  outline: 1px dotted #212121;
  outline: 5px auto -webkit-focus-ring-color;
}

.form-field-title {
  @extend %form-label;
  position: absolute;
  top: $space-input-padding-vertical-base + rem(2px);
  left: $space-input-padding-horizontal;
  z-index: 2;
  pointer-events: none;
  transition: 0.12s;
  transition-delay: 0.12s;
  transition-timing-function: $ease-out-quad;

  .form-field-textarea + & {
    top: $space-input-padding-vertical-base;
  }
}

.form-field-title--inline {
  @extend %form-label;
  display: inline-block;
  margin-left: $space-xxx-small;
  vertical-align: middle;

  .form-field-checkbox & {
    color: $color-forms-input-text;
  }
}

.form-field-select-wrapper {
  position: relative;

  .form-field-select {
    z-index: 2;
    width: 100%; // needed for Firefox
    height: 100%; // needed for IE
    padding-right: ($space-input-padding-horizontal * 2) + rem(8px);
    color: $color-forms-input-text;
    cursor: pointer;
    background-color: $color-forms-input-background;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;

    &::-ms-expand {
      display: none; // Removes default arrow from IE10+
    }
  }

  svg {
    position: absolute;
    top: 50%;
    right: $space-input-padding-horizontal;
    margin-top: -3px;
    pointer-events: none;
    color: $color-forms-input-text;
  }
}

.form-field-textarea {
  @extend %form-control-textarea;
}

.form-fields--qty {
  position: relative;

  .form-field {
    opacity: 0;
    transition: opacity 0.15s ease;

    .no-js &.form-field--qty-input {
      z-index: 1;
      opacity: 1;
      visibility: visible;
    }

    .js &.form-field--qty-select {
      z-index: 1;
      opacity: 1;
      visibility: visible;
    }
  }

  .hidden {
    z-index: 0;
    opacity: 0;
    visibility: hidden;
  }

  .visible {
    z-index: 1;
    opacity: 1;
    visibility: visible;
  }

  .form-field--qty-select .form-field-select-wrapper {
    position: absolute;
    width: 100%;
  }
}

.form-field-checkbox {
  position: relative;
  display: block;
  margin-top: $space-input-padding-vertical-base;
  cursor: pointer;

  input {
    position: absolute;
    top: 0;
    bottom: 0;
    z-index: 1;
    width: 100%;
    cursor: pointer;
    opacity: 0;

    &:checked ~ .form-icon--checkbox {
      @extend %icon-checkbox--active;
    }

  }

  .form-icon--checkbox {
    @extend %icon-checkbox;
    margin-top: -2px;
  }
}

%form-message,
.form-message {
  &.message--success {
    @extend %message--success;
    padding: $space-xx-small $space-x-small;
  }

  &.message--error {
    @extend %message--error;
    padding: $space-xx-small $space-x-small;
  }

  ul,
  p {
    @include font($font-body, $font-family: false);
    margin-top: 0;
    margin-bottom: 0;
    letter-spacing: $font-body-spacing;
  }

  li:not(:first-child) {
    margin-top: $space-xx-small;
  }

  ul {
    padding-left: 0;
    list-style-type: none;
  }
}

.rte,
%rte {
  @include font-size-body;
  line-height: 1.625;

  h1 {
    @include font-size-heading-1;
  }

  h2 {
    @include font-size-heading-2;
  }

  h3 {
    @include font-size-heading-3;
  }

  h4 {
    @include font-size-heading-4;
  }

  h5 {
    @include font-size-heading-5;
  }

  h6 {
    @include font-size-heading-6;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-top: rem($font-body-size * 2);
    margin-bottom: rem($font-body-size);
    color: $color-text-headings;
  }

  a {
    @extend %link--default;
    @include font-body-underline-links;
  }

  blockquote {
    padding-left: rem($font-body-size);
    margin-left: 0;
    border-left: 2px solid $color-buttons-primary-button-background;
  }

  dl,
  ul,
  ol,
  p,
  blockquote,
  img:not([style]) {
    margin-top: rem($font-body-size);
    margin-bottom: rem($font-body-size);
  }

  ul,
  ol {
    padding-left: $gutter-content;
  }

  dl {
    dt {
      margin-top: rem($font-body-size);
    }

    dd {
      margin-left: $gutter-content;
    }
  }

  img {
    height: auto;
    max-width: 100%;
    margin-top: rem($font-body-size);
    margin-bottom: rem($font-body-size);

    &[style*="left"] {
      margin-top: 0;
      margin-right: rem($gutter-content);
    }

    &[style*="right"] {
      margin-top: 0;
      margin-left: rem($gutter-content);
    }
  }

  @include media($max: $bp-small) {
    td {
      display: block;
      width: 100%;
    }
  }

  input {
    @extend %form-control-base, %form-control-input;
    padding-top: rem(15px);
    padding-bottom: rem(15px);
    margin-bottom: 0;

    &:-ms-input-placeholder {
      color: $color-forms-input-text;
      opacity: 0.4;
    }

    &::placeholder {
      color: $color-forms-input-text;
      opacity: 0.4;
    }
  }

  button {
    @extend %button-secondary;
  }

  hr {
    width: 100%;
    height: 1px;
    margin-top: $space-large;
    margin-bottom: $space-large;
    background-color: $color-layout-dividers;
    border: 0;
  }
}

.accordion--icon {

  svg {
    display: block;
    fill: currentColor;
  }

  .icon-chevron-down-left,
  .icon-chevron-down-right {
    transition: transform 0.25s $ease-out-quad, fill 0.15s $ease-out-quad;
    transform-origin: 50% 50%;
  }

  .icon-chevron-down-left {
    transform: rotate(0);
  }

  .icon-chevron-down-right {
    transform: rotate(0);
  }

  .accordion--active & {
    .icon-chevron-down-left {
      transform: rotate(45deg);
    }

    .icon-chevron-down-right {
      transform: rotate(-45deg);
    }
  }
}

.accordion--content {
  //scss-lint:disable SpaceAfterPropertyColon
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition:
    max-height 0.25s ease,
    padding-bottom 0.25s ease,
    opacity 0.15s ease;

  .accordion--active & {
    max-height: 999999px;
    opacity: 1;
  }
}

.placeholder--image {
  display: block;
  background-color: $color-placeholder-background;
  fill: $color-placeholder-fill;
}

.placeholder--content-image {
  fill: $color-placeholder-background;
}

.placeholder--content-text {
  background-color: $color-placeholder-background;
}

// General styling for Shopify Product Reviews
.spr-badge {

  .spr-badge-starrating {
    margin-right: 0;

    .spr-icon {
      @include font-size-body-tiny;
    }
  }

  .spr-badge-caption {
    @include font-size-body-tiny;
    display: inline-block;
    margin-left: $space-xxx-small;
    color: $color-text-light-text;
    white-space: nowrap;
  }
}

.spr-starratings,
.spr-starrating {
  display: inline-block;
  font-size: 0;
  letter-spacing: 0;
  vertical-align: middle;

  .spr-icon {
    top: auto;
    display: inline-block;
    width: auto;
    height: auto;
    font-size: rem(14px);
    vertical-align: middle;

    &:before {
      font-size: 100%;
    }
  }
}

.spr-icon {
  color: $color-product-reviews-star-rating-active;

  &:not(:last-child) {
    margin-right: 0.1em;
  }

  &.spr-icon-star-empty {
    color: $color-product-reviews-star-rating-border;

    &.spr-icon-star-hover,
    &.spr-icon-star-hover:hover {
      color: $color-product-reviews-star-rating-active;
    }
  }

  .spr-starrating.spr-form-input-error & {
    color: $color-error;
  }
}

.flickity-prev-next-button {
  @extend %button-reset;
  position: absolute;
  top: 50%;
  width: 40px;
  height: 40px;
  padding: 5px;
  transform: translateY(-50%);
  opacity: 0.6;
  cursor: pointer;

  svg {
    top: 5px;
    left: 5px;
    width: 30px;
    height: 30px;
  }

  &:focus {
    outline: none;
    box-shadow: 0 0 0 5px #19F;
  }

  &:hover {
    background-color: transparent;

    &:not([disabled]) {
      opacity: 0.8;
    }
  }

  &.previous {
    left: rem(35px);
  }

  &.next {
    right: rem(35px);
  }
}

.flickity-page-dots {
  position: absolute;
  width: 100%;
  padding: 0;
  margin: 0;
  bottom: $gutter-outer;
  list-style: none;
  text-align: center;
  line-height: 1;


  .dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    margin: 0 8px;
    background-color: rgba($color-black, 0.3);
    border-radius: 50%;
    opacity: 0.25;
    cursor: pointer;
  }

  .dot.is-selected {
    opacity: 1;
  }
}

// Static background placeholders
.promo-block-mosaic,
.promo-block-grid,
.navmenu-meganav--image {
  background: $color-placeholder-background;
}

.article-image,
.article--excerpt-image {
  background: $color-placeholder-background;

  .article--excerpt-wrapper--featured & {
    background-color: transparent;
  }
}

// img element fade in
[data-rimg="lazy"],
[data-rimg="loading"],
[data-rimg="loaded"] {
  transition: opacity 0.1s ease-in;
}

img[data-rimg="lazy"],
img[data-rimg="loading"] {

  // Only target specific elements
  &.slideshow-image,
  .product-gallery--image & {
    opacity: 0;
  }
}

[data-rimg="loaded"] {
  opacity: 1;
}


.promo-block-mosaic,
.promo-block-grid {
  [data-rimg-canvas] {
    border-radius: $container-border-radius;
  }
}

.promo-block-grid--content-wrapper,
.promo-block-mosaic--content-wrapper {
  @include media($min: $bp-small) {
    position: relative;
    z-index: 1;
  }
}

// Sibling placeholder
[data-rimg-canvas] {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  animation: shimmer-background 1s ease-in-out infinite;
  animation-fill-mode: forwards;
  transition: (
    opacity 0.1s ease-out,
    visibility 0s linear 0.1s
  );
  animation-direction: alternate;

  [data-rimg="loaded"] + &,
  [data-rimg="loaded"] > &,
  .no-js & {
    opacity: 0;
    visibility: hidden;
  }

  .no-js & {
    display: none;
  }
}

//scss-lint:disable QualifyingElement
// Hide neighbouring lazy-loading image if javascript is disabled, so img in noscript tags will display
.no-js noscript + img[data-rimg="lazy"] {
  display: none;
}

//scss-lint:enable QualifyingElement

.article--excerpt-image {
  img {
    display: block;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    visibility: hidden;
    object-fit: cover;

    .no-js & {
      visibility: visible;
    }
  }
}

.promo-block-mosaic,
.promo-block-grid,
.video-cover,
.featured-collection--banner,
.search-section-background,
.search-section-overlay,
.article-image {
  img {
    position: absolute;
    width: 1px;
    height: 1px;
    opacity: 0;

    &[data-rimg="noscript"] {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 1;
      object-fit: cover;
    }
  }
}

.slideshow-image {
  width: 100%;
  height: 100%;
  opacity: 0;

  .slideshow-slide:not(.slideshow-height-original) &[data-rimg="noscript"] {
    opacity: 1;
    object-fit: cover;
  }
}


// Global styles
html {
  box-sizing: border-box;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

* {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  -webkit-text-size-adjust: none; // Prevent webkit from resizing text
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0); // Prevent tap highlight color / shadow
}

html,
body {
  background-color: $color-layout-site-background;
}

html {
  height: 100%;
  &::before {
    display: none;
    content: "XS,S,M,L,L+,XL,XXL";
  }

  &::after {
    display: none;
    content: "XS";

    @include media($min: $bp-small) {
      content: "S";
    }

    @include media($min: $bp-medium) {
      content: "M";
    }

    @include media($min: $bp-large) {
      content: "L";
    }

    @include media($min: $bp-larger) {
      content: "L+";
    }

    @include media($min: $bp-xl) {
      content: "XL";
    }

    @include media($min: $bp-xxl) {
      content: "XXL";
    }
  }
}

body {
  @include font($font-body);
  @include font-size-body;
  width: 100%;
  // {% if settings.font_family_override %}
  // {% comment %}This is a hybrid of the Github font stack, with added support for certain Linux fonts{% endcomment %}
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-sans, Ubuntu, Cantarell, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  // {% endif %}
  letter-spacing: $font-body-spacing;
  color: $color-text-regular-text;

  @include media($bp-small) {
    @include font-size-body-small;
  }

  &.scroll-lock {
    height: 100vh;
    overflow: hidden;
    touch-action: manipulation;
  }
}

th,
b,
strong {
  @include font-body-bold;
  letter-spacing: $font-body-spacing;
}

em {
  font-style: font-style($font-body, $font-style: italic);
}

th em,
b em,
strong em,
em b,
em strong {
  @include font-body-bold($font-style: italic);
  letter-spacing: $font-body-spacing;
}

// Headings

h1 {
  @extend %h1;
}

h2 {
  @extend %h2;
}

h3 {
  @extend %h3;
}

h4 {
  @extend %h4;
}

h5 {
  @extend %h5;
}

h6 {
  @extend %h6;
}

%show-for-sr,
.visually-hidden {
  //scss-lint:disable ImportantRule
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  border: 0;
}

.skip-to-main {
  @include font-size-body;
  position: absolute;
  top: 0;
  left: -9999px;
  color: $color-text-links;
  background: $color-layout-site-background;
  text-decoration: none;
  padding: 1em;

  &:focus,
  &:active {
    left: 0;
    z-index: $index-header + 2;
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    animation-timing-function: $ease-bubble;
  }

  76.92% {
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
  }
}

@keyframes sneak-in {
  0% {
    opacity: 0;
    transform: translateY(-10px);
    animation-timing-function: $ease-bubble;
  }

  76.92% {
    opacity: 1;
    transform: translateY(0);
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes overlay-fade-in {
  0% {
    opacity: 0;
    animation-timing-function: $ease-bubble;
  }

  76.92% {
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    opacity: 1;
  }
}

@keyframes overlay-fade-out {
  0% {
    opacity: 1;
    animation-timing-function: $ease-bubble;
  }

  76.92% {
    opacity: 0;
    animation-timing-function: linear;
  }

  to {
    opacity: 0;
  }
}

@keyframes sneak-in-mobilenav {
  0% {
    transform: translateX(-100px);
    opacity: 0;
    animation-timing-function: $ease-bubble;
  }

  76.92% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    animation-timing-function: linear;
  }

  to {
    left: 0;
    opacity: 1;
  }
}

@keyframes sneak-out-mobilenav {
  0% {
    transform: translate3d(0, 0, 0);
    opacity: 1;
    animation-timing-function: cubic-bezier(1, 0, 0.7, 1);
  }

  to {
    transform: translateX(-100px);
    opacity: 0;
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

@keyframes shimmer {
  from {
    opacity: 1;
  }

  to {
    opacity: 0.5;
  }
}

@keyframes shimmer-background {
  from {
    background-color: mix($color-text-regular-text, $color-layout-site-background, 8%);
  }

  to {
    background-color: mix($color-text-regular-text, $color-layout-site-background, 4%);
  }
}

@keyframes loading-video {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }

  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

@keyframes hide-zoom {
  0% {
    pointer-events: all;
    opacity: 1;
  }

  100% {
    pointer-events: none;
    opacity: 0;
  }
}

@keyframes slide-swatch-tooltip {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(110%) translateY(7px);
  }

  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(100%) translateY(7px);
  }
}


// Sections
$local-space-small: 10px;
$local-space-large: 20px;

$local-blog-width-xs: 280px;

.blogposts--container {
  @extend %section-container;
  position: relative;

  @include media($max: $bp-large) {
    overflow: hidden;
  }
}

.blogposts--inner {
  padding: 0;
  list-style-type: none;
  outline: 0;
  -webkit-margin-before: 0;
          margin-block-start: 0;
  -webkit-margin-after: 0;
          margin-block-end: 0;

  &:not(.flickity-enabled),
  .flickity-slider {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: space-between;
    transition: width 0.1s ease;
  }

  &.flickity-enabled {
    display: block;
    width: 100%;
    cursor: grab;
  }

  &:not(.flickity-enabled) {
    @include media($max: $bp-medium) {
      flex-direction: column;

      .article--excerpt-wrapper:not(:first-child) {
        @include media($max: $bp-large) {
          margin-top: $space-large;
        }
      }
    }
  }

  .article--excerpt-wrapper {
    @include font-size-body;
    width: 100%;
    min-width: $local-blog-width-xs;

    .blogposts--count-2 & {
      width: 50%;
    }

    .blogposts--count-3 & {
      width: percentage(1/3);
    }

    min-height: 100%;
    flex: 1 1 auto;

    &:not(:last-child) {
      margin-right: $local-space-small;
      @include media($min: $bp-larger) {
        margin-right: $local-space-large;
      }
    }

  }
}

.blogposts--footer {
  margin-top: $space-large;
  text-align: center;

  @include media($min: $bp-small) {
    margin-top: rem(40px);
  }
}

.blogposts--footer-button {
  @include button-size(small);

  @include media($min: $bp-small) {
    @include button-size(medium);
  }

  @include media($min: $bp-large) {
    @include button-size(large);
  }
}

.blogposts--footer-icon {
  @extend %inline-chevron;
  margin-left: rem(1px);
}

$local-space-small: 10px;
$local-space-large: 15px;

.dynamic-collection-list--container {
  @extend %section-container;
  text-align: center;
  width: 100%;
}

.dynamic-collection-list--inner {
  @extend %clearfix;
  list-style-type: none;
  -webkit-margin-before: 0;
          margin-block-start: 0;
  -webkit-margin-after: 0;
          margin-block-end: 0;
  padding-left: 0;
  margin: 0 auto;
}

.dynamic-collection-list--item {
  float: left;
  width: calc(50% - 5px);
  margin-left: $gutter-content;
  display: none;

  @include media($min: $bp-small) {
    &.active {
      display: block;
    }
  }

  @include media($max: $bp-small) {
    &.active-mobile {
      display: block;
    }
  }

  @include media($min: $bp-small) {
    .desktop-collections-per-row-3 & {
      &:nth-child(3n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(#{percentage(1 / 3)} - #{$gutter-content * (2 / 3)});
    }

    .desktop-collections-per-row-4 & {
      &:nth-child(4n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(25% - #{$gutter-content * (3 / 4)});
    }

    .desktop-collections-per-row-5 & {
      &:nth-child(5n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(20% - #{20px * (4 / 5)});
    }

    .desktop-collections-per-row-6 & {
      &:nth-child(6n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(#{percentage(1 / 6)} - #{$gutter-content * (5 / 6)});
    }
  }

  @include media($max: $bp-small) {
    margin-left: $gutter-content / 2;

    .mobile-collections-per-row-1 & {
      margin-left: 0;
      clear: left;
      width: 100%;
    }

    .mobile-collections-per-row-2 & {
      &:nth-child(2n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(50% - #{$gutter-content / 4});
    }

    .mobile-collections-per-row-3 & {
      &:nth-child(3n + 1) {
        margin-left: 0;
        clear: left;
      }

      width: calc(#{percentage(1 / 3)} - #{$gutter-content / 3});
    }
  }
}

.no-js .dynamic-collection-list--item {
  &.active,
  &.active-mobile {
    display: block;
  }
}

.dynamic-collection-list--item-title,
.dynamic-collection-list--item-title-mobile {
  @extend %link--default;
  @include font-body-bold;
  @include font-size-body;
  display: inline-block;
  margin-bottom: $space-large;
  line-height: 1.4;
  letter-spacing: $font-body-spacing;
  text-decoration: none;

  @include media($min: $bp-large) {
    margin-bottom: $space-medium * 2
  }

  .label-style-heading & {
    @include font($font-heading);
    @include capitalize($font-heading-capitalize);
    @include font-size-body($font-heading-capitalize);
    letter-spacing: $font-heading-spacing;
    color: $color-text-headings;

    &:hover {
      color: $color-text-links;
    }
  }

  .desktop-collections-per-row-5 &,
  .desktop-collections-per-row-6 & {
    @include media($min: $bp-small, $max: $bp-larger) {
      @include font-size-body-small;
    }
  }

  @include media($max: $bp-small) {
    margin-top: $space-xxx-small;
    margin-bottom: $space-large;
  }
}

.dynamic-collection-list--item-title {
  margin-top: $space-x-small;

  @include media($max: $bp-small) {
    display: none;
  }
}

.dynamic-collection-list--item-title-mobile {
  margin-top: $space-xx-small;

  @include media($min: $bp-small) {
    display: none;
  }
}

.dynamic-collection-list--item-info {
  margin: 0 auto;
}

.dynamic-collection-list--show-more-button {
  @include button-size(large);
  display: none;
  margin: $space-medium 0 auto;

  @include media($min: $bp-small) {
    .js &.active {
      display: inline-block;
    }
  }

  @include media($min: $bp-large) {
    @include button-size(large);
  }

  @include media($min: $bp-small, $max: $bp-large) {
    @include button-size(medium);
  }

  @include media($max: $bp-small) {
    @include button-size(small);
    margin-top: $space-xx-small;

    .js &.active-mobile {
      display: inline-block;
    }
  }
}

$local-padding-small: 15px;
$local-padding-medium: 20px;

.featured-collection--wrapper {
  position: relative;
  width: 100%;

  .featured-collection--overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-size: cover;
  }

  &.featured-collection--background-image {
    background-size: cover;

    &.left {
      background-position-x: 0;
    }

    &.middle {
      background-position-x: 50%;
    }

    &.right {
      background-position-x: 100%;
    }

    &.top {
      background-position-y: 0;
    }

    &.center {
      background-position-y: 50%;
    }

    &.bottom {
      background-position-y: 100%;
    }
  }
}

.featured-collection--container {
  @extend %section-container;

  @include media($min: $bp-small, $max: $bp-larger) {
    padding-right: 10px;
    padding-left: 10px;
  }


  .home-section--title {
    @include media($max: $bp-small) {
      padding-right: $gutter-outer-small;
      padding-left: $gutter-outer-small;
    }

    @include media($min: $bp-small, $max: $bp-large) {
      padding-right: $gutter-outer-medium;
      padding-left: $gutter-outer-medium;
    }
  }

  .featured-collection--cta-wrapper {
    margin: $space-xx-large auto 0;
    text-align: center;

    .featured-collection--cta {
      @include button-size(small);

      @include media($min: $bp-small) {
        @include button-size(medium);
      }

      @include media($min: $bp-larger) {
        @include button-size(large);
      }
    }
  }

  .featured-collection--content {
    position: relative;
    display: flex;
    width: 100%;
    padding: 0;
    margin-bottom: 16px;
    outline: none;

    .productgrid--item {
      width: calc(214px - #{$grid-column-space-mobile});
      margin-right: $grid-column-space-mobile;
    }

    @include media($min: $bp-larger) {
      padding: 0 $local-padding-medium;
    }

    @include media($min: $bp-xxl) {
      padding: 0;
    }

    &[data-layout="grid"] {
      flex-wrap: nowrap;
      padding: 0;

      @include media($max: $bp-larger) {
        &:not(.flickity-enabled) {
          overflow: hidden;
        }
      }

      @include media($min: $bp-larger) {
        flex-wrap: wrap;

        .productgrid--item {
          flex-grow: 1;
          width: calc(100% / 4 - #{$grid-column-space-desktop});
          margin-right: $grid-column-space-desktop;

          &:nth-child(n + 6) {
            margin-top: $grid-column-space-desktop;
          }

          &:nth-child(5n) {
            margin-right: 0;
          }
        }

        @supports(display: grid) {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          grid-row-gap: $grid-row-space-desktop;
          grid-column-gap: $grid-column-space-desktop;
          column-gap: $grid-column-space-desktop;
          row-gap: $grid-row-space-desktop;
          padding: 0;

          .productgrid--item {
            width: 100%;
            margin-right: 0;

            &:nth-child(n + 6) {
              margin-top: 0;
            }
          }
        }
      }
    }

   	&[data-layout="grid2"] {
      flex-wrap: nowrap;
      padding: 0;

      @include media($max: $bp-larger) {
        &:not(.flickity-enabled) {
          overflow: hidden;
        }
      }

      @include media($min: $bp-larger) {
        flex-wrap: wrap;

        .productgrid--item {
          flex-grow: 1;
          width: calc(100% / 4 - #{$grid-column-space-desktop});
          margin-right: $grid-column-space-desktop;

          &:nth-child(1) {
            grid-column: 1/3;
            grid-row: 1/3;
          }

          &:nth-child(n + 6) {
            margin-top: $grid-column-space-desktop;
          }

          &:nth-child(5n) {
            margin-right: 0;
          }
        }

        @supports(display: grid) {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          grid-row-gap: $grid-row-space-desktop;
          grid-column-gap: $grid-column-space-desktop;
          column-gap: $grid-column-space-desktop;
          row-gap: 20px;
          padding: 0;

          .productgrid--item {
            width: 100%;
            margin-right: 0;

            &:nth-child(n + 6) {
              margin-top: 0;
            }
          }
        }
      }
    }

    &[data-layout="slideshow"] {
      .productgrid--item {
        width: calc(214px - #{$grid-column-space-mobile});

        @include media($min: $bp-larger) {
          // Calculate the approximate spacing between where x equals $grid-columns-space-desktop
          // -x subtracts the margin from the width and x/5 adds the 5th items margin back
          // (-x + x/4) = -4x/4 + x/4 = (-4x + x)/4 = (x(-4 + 1))/4 = -3x/4
          width: calc(100% / 4 - #{(3 * $grid-column-space-desktop) / 4});
          margin-right: $grid-column-space-desktop;
        }

        @include media($min: $bp-xl) {
          // Calculate the approximate spacing between where x equals $grid-columns-space-desktop
          // -x subtracts the margin from the width and x/5 adds the 5th items margin back
          // (-x + x/4) = -4x/4 + x/4 = (-4x + x)/4 = (x(-4 + 1))/4 = -3x/4
          width: calc(100% / 4 - #{(4 * $grid-column-space-desktop) / 4});
          margin-right: $grid-column-space-desktop;
        }
      }
    }

    &.flickity-enabled {
      cursor: grab;

      .productgrid--item {
        height: inherit;
      }
    }

    .flickity-viewport {
      position: relative;
    }

    .flickity-slider--wrapper {
      position: absolute;
      top: 0;
      left: 0;
      // Because the overflow is on this element, but this element is within ancestors that have
      // padding that we must exceed, we need to accomodate that in both the width, margin, and padding.
      // These values are taken from the extends %layout-container.
      width: calc(100% + #{2 * $gutter-outer-small});
      // By inheriting the height, and then expecting a minimum of twice that amount
      // we can successfully hide the overflow in the horizontal axis without impacting
      // the overflow over the vertical axis. This is because this element is absolutely positioned
      // and only available when Flickity is visible, which means we do not get elements breaking
      // onto a new line when the additional height is set.
      height: inherit;
      min-height: 200%;
      padding-right: $gutter-outer-small;
      padding-left: $gutter-outer-small;
      margin-left: -$gutter-outer-small;
      overflow: hidden;
      pointer-events: none;
    }

    .flickity-slider {
      height: inherit;
      pointer-events: auto;
    }
    .flickity-prev-next-button {
      display: flex;
      justify-content: center;
      width: 48px;
      height: 48px;
      background-color: transparent;
      border-radius: 24px;
      opacity: 1;
      transition: (
        transform 150ms ease,
        box-shadow 150ms ease,
        opacity 150ms ease,
        background-color 150ms ease
      );

      &.next {
        right: 0;

        svg {
          height: auto;
          transform: translateX(1px);
        }
      }

      &.previous {
        left: 0;

        svg {
          height: auto;
          transform: translateX(-1px);
        }
      }

      .flickity-button-icon {
        transition: fill 100ms ease;
      }

      @include media($max: $bp-larger) {
        display: none;
      }

      @include media($min: $bp-larger) {
        &.next {
          margin-right: -25px;
        }

        &.previous {
          margin-left: -25px;
        }
      }

      @include media($min: $bp-xxl) {
        &.next {
          margin-right: -45px;
        }

        &.previous {
          margin-left: -45px;
        }
      }

      &:disabled {
        cursor: initial;
        opacity: 0.5;
        svg {
          opacity: 0.3;
        }
      }

      &:not(:disabled) {
        &:hover {
          background-color: #fff;
          box-shadow: 0 0 0 1px transparentize($color-border, 0.96), 0 3px 10px transparentize($color-border, 0.6);
          transform: translateY(-50%) scale(1.125);
        }
      }
    }
  }
}

.product-row--no-spacing {
  .productitem--swatches-show-on-hover .productitem--swatches-container {
    margin-bottom: 0;
  }
}

.featured-collection--banner {
  height: auto;
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: cover;
  min-height: 275px;
  &.featured-collection--banner-placeholder {
    background-color: $color-placeholder-background;

    svg {
      position: absolute;
      top: 50%;
      left: 50%;
      z-index: -1;
      fill: $color-placeholder-fill;
      transform: translate(-50%, -50%);
    }
  }
}

.featured-collection--banner-outer {
  display: flex;
  flex-grow: 1;
  align-items: center;
  width: 100%;
  height: 100%;
  padding: $local-padding-small;
  color: currentColor;
  text-decoration: none;

  @include media($min: $bp-medium) {
    padding: $local-padding-medium;
  }
}

.featured-collection--banner-inner {
  z-index: 1;
  flex-grow: 0;
  align-self: center;
  width: 100%;
  text-align: center;
  vertical-align: middle;
}

.featured-collection--banner-subtitle {
  @include font($font-body, $font-weight: lighter);
  @include font-size-body-smaller;
  line-height: 1.2;
  text-transform: none;
  letter-spacing: none;
}

.featured-collection--banner-title {
  @include font($font-heading);
  @include font-size-heading-3;
  margin-top: $space-xx-small;
  margin-bottom: 0;
  white-space: normal;
}

.featured-collections--container {
  @extend %section-container;
}

.featured-collections--content {
  display: flex;
  align-items: flex-start;
  flex-direction: column;
  overflow-wrap: break-word;

  @include media($min: $bp-small) {
    flex-direction: row;
  }

  .promo-block-mosaic {
    flex-grow: 1;
    flex-shrink: 1;
    width: 100%;

    @include media($min: $bp-small) {
      margin-right: $gutter-outer-small;
    }

    @include media($min: $bp-larger) {
      margin-right: $gutter-content;
    }
  }

  .promo-block-mosaic--background {
    position: static;
    width: 100%;
    height: auto;
  }

  .promo-block-mosaic--content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    margin-top: 0;

    @include media($max: $bp-small) {
      padding-right: $space-medium;
    }
  }

  .promo-block-mosaic--button {
    @include button-size(small);
    display: inline-block;
    opacity: 1;

    @include media($min: $bp-small, $max: $bp-larger) {
      @include button-size(medium);
    }

    @include media($min: $bp-larger) {
      @include button-size(large);
    }
  }

  .promo-block-mosaic--text,
  .promo-block-mosaic--header {
    max-width: 80%;
  }

  .promo-block-mosaic--header {
    @include font-size-heading-1;

    @include media($min: $bp-small) {
      @include font-size-heading-medium;
    }

    @include media($min: $bp-larger) {
      @include font-size-heading-large;
    }
  }

  .promo-block-mosaic--text {
    @include font-size-body-medium;

    @include media($max: $bp-small) {
      max-width: 85%;
      white-space: normal;
    }

    @include media($min: $bp-larger) {
      @include font-size-body-large;
    }
  }
}

.featured-collections--grid-items-container {
  display: flex;
  flex-grow: 0;
  flex-shrink: 0;
  flex-wrap: wrap;
  justify-content: space-between;
  width: 100%;

  @include media($max: $bp-small) {
    margin-top: 10px;
  }

  @include media($min: $bp-small) {
    width: 45%;

    &.featured-collections--lte-2-grid-items {
      width: 27%;
    }
  }

  @include media($min: $bp-larger) {
    margin-bottom: #{-$gutter-content};
  }
}

.featured-collections--grid-item {
  width: 100%;
  padding-bottom: 15px;
  border-radius: $container-border-radius;

  @include media($max: $bp-small) {
    width: 50%;

    &:nth-child(even) {
      padding-left: $gutter-outer-small / 2;
    }

    &:nth-child(odd) {
      padding-right: $gutter-outer-small / 2;
    }
  }

  @include media($min: $bp-larger) {
    padding-bottom: 30px;
  }
}

// Grid with more than 2 items
.featured-collections--grid-items-container:not(.featured-collections--lte-2-grid-items) .featured-collections--grid-item {
  &:not(.featured-collections--lte-2-grid-items) {
    width: 50%;

    &:nth-child(even) {
      padding-left: $gutter-outer-small / 2;
    }

    &:nth-child(odd) {
      padding-right: $gutter-outer-small / 2;
    }

    @include media($min: $bp-larger) {
      &:nth-child(even) {
        padding-left: $gutter-content / 2;
      }

      &:nth-child(odd) {
        padding-right: $gutter-content / 2;
      }
    }
  }
}

.featured-collections--grid-item-image-wrapper {
  position: relative;
  display: block;
  line-height: 0;
  border-radius: $container-border-radius;

  &.featured-collections--grid-item-image-placeholder {
    padding-bottom: 81.5%;
  }

  .placeholder--image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: $container-border-radius;
  }

  .featured-collections--grid-item-image {
    width: 100%;
    height: auto;
    border-radius: $container-border-radius;
  }
}

.featured-collections-grid-item-title {
  @include font-size-body;
  margin-top: 10px;
  margin-bottom: 0;
  line-height: 1.4;

  &.align-center {
    text-align: center;
  }

  &.align-right {
    text-align: right;
  }

  &.style-heading {
    @include font($font-heading);
    color: $color-text-headings;
    letter-spacing: $font-heading-spacing;
    text-transform: $font-heading-capitalize;
  }

  &.style-body {
    @include font($font-body);
    letter-spacing: $font-body-spacing;
    color: $color-text-regular-text;
    text-transform: initial;
  }

  &:hover {
    color: $color-text-links;
  }

  a {
    color: currentColor;
    text-decoration: none;
  }
}

.featured-collections-item-title-desktop {
  @include media($max: $bp-small) {
    display: none;
  }
}

.featured-collections-item-title-mobile {
  display: none;

  @include media($max: $bp-small) {
    display: inline;
  }
}

.featured-product--container {
  @extend %section-container;

  .featured-product--inner {
    padding: $gutter-outer;
    border-radius: $container-border-radius;
    background-color: $color-content-containers-background;

    .video {
      iframe {
        left: 0;
      }
    }
  }

  .product-main,
  & .product-gallery--slider {
    text-align: center;
    @include media($max: $bp-small){
      padding-right: 0;
      padding-left: 0;
    }
  }

  @include media($max: $bp-small){
    .product-gallery--navigation {
      margin-left: 0;
    }
    .product-gallery--thumbnail-trigger:last-child {
      margin-right: 0;
    }
  }

  .product-pricing {
    justify-content: center;
  }

  .product--outer {
    @include media($min: $bp-small) {
      display: flex;
      align-items: center;
    }
  }
}

.highlights-banners-container {
  @extend %layout-container;
}

.highlights-banners {
  position: relative;
  display: flex;
  justify-content: center;
  padding: $space-medium 0;
  outline: 0;

  .flickity-slider {
    height: 100%;
    display: flex;
    align-items: center;
  }

  &:before,
  &:after {
    position: absolute;
    top: 0;
    right: calc(100% - #{$gutter-content});
    bottom: 0;
    left: 0;
    z-index: 2;
    content: '';
  }

  &:after {
    right: 0;
    left: calc(100% - #{$gutter-content});
  }

  @include media($max: $bp-large) {
    overflow: hidden;
  }

  @include media($min: $bp-large) {
    height: auto;
    padding: {
      top: $space-large;
      bottom: $space-large;
    };

    &:before,
    &:after {
      display: none;
    }
  }
}

.highlights-banners-block {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0 $space-medium;
  color: $color-text-regular-text;
  text-decoration: none;

  .highlight-banners-align-center & {
    flex-direction: column;
    justify-content: center;
    text-align: center;
  }

  .highlight-banners-align-right & {
    justify-content: flex-end;
    text-align: right;
  }

  @include media($max: $bp-large) {
    max-width: rem(275px);
    min-width: rem(200px);
    height: auto;

    .flickity-slider & {
      //these fix some alignment issues in IE11
      top: 0;
    }

    .highlight-banners-count-2 & {
      width: 50%;
    }

    .highlight-banners-count-3 & {
      width: 33%;
    }

    .highlight-banners-count-4 & {
      width: 25%;
    }
  }

  @include media($min: $bp-large) {
    .highlight-banners-count-2 &,
    .highlight-banners-count-3 & {
      width: 33%;
      max-width: rem(340px);
    }

    .highlight-banners-count-4 & {
      width: 25%;
    }
  }

  &:not(:last-of-type) {
    &::after {
      position: absolute;
      top: 0;
      right: 0;
      width: 1px;
      height: 100%;
      content: "";
    }
  }
}

.highlights-banners-icon {
  width: auto;
  height: rem(36px);
  margin-right: $space-small;
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;

  @include media($min: $bp-smaller) {
    height: rem(40px);
  }

  @include media($min: $bp-large) {
    height: rem(46px);
    margin-right: $space-medium;
  }

  svg {
    height: 100%;
    max-width: rem(60px); //keep things from going weird in IE
  }

  .highlights-banners-custom-icon {
    width: auto;
    height: 100%;
  }

  .highlight-banners-align-center & {
    margin-right: 0;
    margin-bottom: $space-x-small;

    @include media($min: $bp-large) {
      margin-bottom: $space-small;
    }
  }

  .highlight-banners-align-right & {
    margin-right: 0;
    margin-left: $space-medium;
  }
}

.highlights-banners-text {
  @include font-size-body-smaller;
  max-width: 100%;
  line-height: 1.4;

  p {
    margin: 0;
  }

  @include media($min: $bp-large) {
    @include font-size-body;
  }

  a {
    position: relative;
    z-index: 1;
    color: inherit;
    text-decoration: underline;
  }
}

.highlights-banners-heading {
  @include font-size-highlight-banner-heading;
  @include font($font-highlights-bar);
  @include capitalize($font-highlights-capitalize);
  letter-spacing: $font-highlights-spacing;
  margin: 0;
}

.highlights-banners-block-link {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}

.flickity-viewport,
.flickity-slider {
  width: 100%;
}

$image-with-text-space-smallest: 4px !default;
$image-with-text-space-smaller: 8px !default;
$image-with-text-space-small: 12px !default;
$image-with-text-space-medium: 20px !default;
$image-with-text-space-large: 28px !default;
$image-with-text-space-larger: 32px !default;
$image-with-text-space-largest: 36px !default;

$image-with-text-breakpoint-small: 480px !default;
$image-with-text-breakpoint-medium: 720px !default;
$image-with-text-breakpoint-large: 1024px !default;

$image-with-text-content-width-small: 60% !default;
$image-with-text-content-width-large: 85% !default;

$image-with-text-section-height-small: 100px !default;
$image-with-text-section-height-medium: 150px !default;
$image-with-text-section-height-large: 200px !default;
$image-with-text-section-height-original: 0 !default;

$local-section-height-small: "small";
$local-section-height-medium: "medium";
$local-section-height-large: "large";
$local-section-height-original: "original";

$image-original-aspect-mobile-color: #000 !default;

$local-heights:
  $local-section-height-small,
  $local-section-height-medium,
  $local-section-height-large,
  $local-section-height-original;

$local-height-values:
  $image-with-text-section-height-small,
  $image-with-text-section-height-medium,
  $image-with-text-section-height-large,
  $image-with-text-section-height-original;

.image-with-text {
  @extend %section-container;
  margin-top: 0;
  margin-bottom: 0;
  &:not(.image-with-text-section-height-original) {
    .image-with-text-background {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    .image-with-text-image {
      position: absolute;
      width: 1px;
      height: 1px;
      overflow: hidden;
      opacity: 0;

      &[data-rimg="noscript"] {
        width: 100%;
        height: 100%;
        opacity: 1;
        object-fit: cover;
      }
    }
  }

  &.image-with-text-section-height-original {
    .image-with-text-content-wrapper {
      @media (min-width: $image-with-text-breakpoint-small) {
        position: absolute;
        top: $image-with-text-space-medium;
        right: $image-with-text-space-medium;
        bottom: $image-with-text-space-medium;
        left: $image-with-text-space-medium;
      }
    }
  }
}

.image-with-text-wrapper {
  position: relative;
}

.image-with-text-background {
  background-size: cover;
  border-radius: $container-border-radius;

  svg {
    width: 100%;
    height: 100%;
    max-height: 100%;
    //scss-lint:disable PlaceholderInExtend
    @extend .placeholder--image;
    //scss-lint:Enable PlaceholderInExtend
    border-radius: $container-border-radius;
  }
}

.image-with-text-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  border-radius: $container-border-radius;

  @media (max-width: $image-with-text-breakpoint-small) {
    .image-with-text-section-height-original & {
      display: none;
    }
  }
}

.image-with-text-content-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;

  .image-with-text-section-height-original & {
    @media (max-width: $image-with-text-breakpoint-small) {
      align-items: center;
      justify-content: center;
      text-align: center;
    }
  }
}

.image-with-text-content-wrapper,
.image-with-text-section-height-original .image-with-text-content-wrapper {
  @include media($max: $bp-small) {
    padding: $space-medium;
  }

  @include media($min: $bp-small, $max: $bp-larger) {
    padding: $space-large;
  }

  @include media($min: $bp-larger) {
    padding: $space-x-large;
  }
}

.image-with-text.image-with-text-section-height-original {
  .image-with-text-content-wrapper {
    @include media($max: $image-with-text-breakpoint-small) {
      justify-content: center;
      padding-bottom: 0;
      padding-top: $space-medium;
      text-align: center;
    }

    @include media($min: $image-with-text-breakpoint-small) {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;

    }
  }
}

@for $i from 1 through 4 {
  .image-with-text-section-height-#{nth($local-heights, $i)} {
    .image-with-text-content-position-y-top {
      align-items: flex-start;
      padding-bottom: #{nth($local-height-values, $i) * 1.2 - $image-with-text-space-medium};

      @media (min-width: $image-with-text-breakpoint-medium) {
        padding-bottom: #{nth($local-height-values, $i) * 2 - $image-with-text-space-large};
      }

      @media (min-width: $bp-larger) {
        padding-bottom: #{nth($local-height-values, $i) * 2 - $image-with-text-space-larger};
      }
    }

    .image-with-text-content-position-y-center {
      padding-top: #{nth($local-height-values, $i)};
      padding-bottom: #{nth($local-height-values, $i)};

      @media (min-width: $image-with-text-breakpoint-medium) {
        padding-top: #{nth($local-height-values, $i)};
        padding-bottom: #{nth($local-height-values, $i)};
      }

      @media (min-width: $bp-larger) {
        padding-top: #{nth($local-height-values, $i)};
        padding-bottom: #{nth($local-height-values, $i)};
      }
    }

    .image-with-text-content-position-y-bottom {
      align-items: flex-end;
      padding-top: #{nth($local-height-values, $i) * 1.2 - $image-with-text-space-medium};

      @media (min-width: $image-with-text-breakpoint-medium) {
        padding-top: #{nth($local-height-values, $i) * 2 - $image-with-text-space-large};
      }

      @media (min-width: $bp-larger) {
        padding-top: #{nth($local-height-values, $i) * 2 - $image-with-text-space-larger};
      }
    }

    .image-with-text-content-position-x-left {
      justify-content: flex-start;
      text-align: left;
    }

    .image-with-text-content-position-x-right {
      justify-content: flex-end;
      text-align: right;
    }
  }
}

.image-with-text-content {
  width: $image-with-text-content-width-large;
  padding: $image-with-text-space-smaller 0;

  @media (min-width: $image-with-text-breakpoint-medium) {
    width: $image-with-text-content-width-small;
    padding: $image-with-text-space-small 0;
  }
}

.image-with-text-text-alignment-left {
  text-align: left;
}

.image-with-text-text-alignment-center {
  text-align: center;
}

.image-with-text-text-alignment-right {
  text-align: right;
}

.image-with-text-heading,
.image-with-text-subheading {
  color: inherit;

  @media (max-width: $image-with-text-breakpoint-small) {
    .image-with-text-section-height-original & {
      color: $image-original-aspect-mobile-color;
    }
  }
}

.image-with-text-heading {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: $image-with-text-space-smallest;
  line-height: 1.2;

  @include media ($min: $bp-small) {
    font-size: $font-heading-medium;
  }

  @media (min-width: $image-with-text-breakpoint-medium) {
    margin-bottom: $image-with-text-space-small;
  }

  @include media ($min: $bp-large) {
    font-size: $font-heading-large;
  }
}

.image-with-text-subheading {
  @include font-size-body;
  margin: 0;
  line-height: 1.5625;

  p {
    margin-top: 0;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.image-with-text-button {
  @extend %button-primary;
  margin-top: $image-with-text-space-medium;

  @media (min-width: $bp-small) {
    @include button-size(medium);
  }

  @include media($min: $bp-large) {
    @include button-size(large);
  }
  @media (min-width: $image-with-text-breakpoint-medium) {
    margin-top: $image-with-text-space-large;
  }

  @media (min-width: $image-with-text-breakpoint-large) {
    margin-top: $image-with-text-space-largest;
  }
}

.image-with-text-link {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.alt-img-with-text--container {
  @extend %section-container;

  .home-section--title-container {
    padding: 0 5%;
    margin-top: 0;
    margin-bottom: $space-large;
    text-align: center;

    @include media($min: $bp-small) {
      margin-bottom: $space-section-heading;
    }

    .home-section--title {
      margin-bottom: rem(10px);
    }

    .home-section--subheading {
      line-height: 1.5;
      text-align: center;
    }
  }

  .block-link {
    color: $color-text-headings;
    text-decoration: none;
  }
}

.alt-img-with-text--content {
  display: flex;
  border-radius: $container-border-radius;

  &.image-top {
    flex-direction: column-reverse;

    .alt-img-with-text--image {

      &.image-mobile {
        border-radius: $container-border-radius $container-border-radius 0 0;
      }
    }
  }

  &.image-bottom {
    flex-direction: column;
    .alt-img-with-text--image {

      &.image-mobile {
        border-radius: 0 0 $container-border-radius $container-border-radius;
      }
    }
  }

  @include media($min: $bp-small) {
    &.image-right {
      flex-direction: row;
      .alt-img-with-text--image {
        &.image-desktop {
          border-radius: 0 $container-border-radius $container-border-radius 0;
        }
      }
    }

    &.image-left {
      flex-direction: row-reverse;
      .alt-img-with-text--image {
        &.image-desktop {
          border-radius: $container-border-radius 0 0 $container-border-radius;
        }
      }
    }
  }

  .alt-img-with-text--image {
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    flex-basis: auto;

    &.image-mobile {
      display: block;
      width: 100%;

      @include media($min: $bp-small) {
        display: none;
      }
    }

    &.image-desktop {
      display: none;
      @include media($min: $bp-small) {
        display: block;
      }
    }
  }

  .alt-img-with-text--text {
    flex: 1 1 auto;
    max-width: 85%;
    padding: $space-large 0 2.5rem;
    margin-right: auto;
    margin-left: auto;
    text-align: center;

    @include media($min: $bp-medium) {
      max-width: none;
      margin: 0 $gutter-outer-small;
    }

    .preheading {
      @include font($font-body);
      @include font-size-body-medium;
      margin: 0 0 $space-x-small;
      letter-spacing: $font-body-spacing;
    }

    .heading {
      margin: 0;
      line-height: 1.3;

      &.small {
        @include font-size-heading-4;
      }

      &.medium {
        @include font-size-heading-3;
      }

      &.large {
        @include font-size-heading-1;
      }

      &.xlarge {
        @include font-size-heading-large;
      }
    }

    .text-content {
      @include font-size-body;
      margin: $space-x-small 0 0;
      line-height: 1.5;

      @include media($min: $bp-medium) {
        margin: $space-small 0 0;
      }
    }

    @include media($min: $bp-small) {
      padding: 2.75rem $space-large;
      margin: 0;

      &.position-top {
        align-self: flex-start;
      }

      &.position-middle {
        align-self: center;
      }

      &.position-bottom {
        align-self: flex-end;
      }

      &.alignment-left {
        text-align: left;
      }

      &.alignment-center {
        text-align: center;
      }

      &.alignment-right {
        text-align: right;
      }
    }

    .button-link {
      text-decoration: none;
    }

    .alt-img-with-text--button {
      &:not(.button-signpost) {
        @include button-size(small);
        margin-top: $space-medium;

        @include media($min: $bp-medium) {
          @include button-size(medium);
          margin-top: $space-large;
        }
      }
    }
  }

  &.onboarding {
    .alt-img-with-text--image {
      height: rem(500px);
      background: $color-placeholder-background;
      background-position: center;
      background-size: cover;
    }
  }
}

$local-space-small: rem(10px);
$local-space-medium: rem(15px);
$local-space-large: rem(20px);

$logo-size-small: 90px;
$logo-size-medium: 120px;
$logo-size-large: 160px;

.logolist--container {
  @extend %section-container;
}

.logolist--inner {
  @include grid-gutter($local-space-small);
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  justify-content: center;

  @include media($min: $bp-small) {
    @include grid-gutter($local-space-medium);
  }

  @include media($min: $bp-xl) {
    @include grid-gutter($local-space-large);
  }
}

.logolist--item {
  @include font-size-body;
  position: relative;
  width: $logo-size-small;
  margin-top: $local-space-small * 2;
  margin-right: $local-space-small;
  margin-left: $local-space-small;
  transition: width 0.1s ease, margin 0.1s ease;

  &:nth-child(-n + 2) {
    @include media($max: 345px) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 3) {
    @include media($min: 345px, $max: 455px) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 4) {
    @media screen and (min-width: 455px) and (max-width: (565px - 1px)),
      screen and (min-width: $bp-small) and (max-width: (755px - 1px)) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 5) {
    @media screen and (min-width: 565px) and (max-width: (675px - 1px)),
      screen and (min-width: 755px) and (max-width: (905px - 1px)),
      screen and (min-width: $bp-large) and (max-width: (1175px - 1px)) {
      margin-top: 0;
    }
  }

  &:nth-child(-n + 6) {
    @media screen and (min-width: 675px) and (max-width: ($bp-small - 1px)),
      screen and (min-width: 905px) and (max-width: ($bp-large - 1px)),
      screen and (min-width: 1175px) {
      margin-top: 0;
    }
  }

  @include media($min: $bp-small) {
    width: $logo-size-medium;
    margin-top: $local-space-medium * 2;
    margin-right: $local-space-medium;
    margin-left: $local-space-medium;
  }

  @include media($min: $bp-large) {
    width: $logo-size-large;
  }

  @include media($min: $bp-xl) {
    margin-top: $local-space-large * 2;
    margin-right: $local-space-large;
    margin-left: $local-space-large;

    &:nth-child(-n + 6) {
      margin-top: 0;
    }
  }
}

.logolist--link {
  display: block;
}

.logolist--link--text {
  display: block;
  max-width: 100%;
  text-align: center;
  text-decoration: none;
  color: #f3027a;
}

.logolist--image {
  display: block;
  max-width: 100%;
  max-height: $logo-size-small;
  margin: 0 auto;

  @include media($min: $bp-small) {
    max-height: $logo-size-medium;
  }

  @include media($min: $bp-large) {
    max-height: $logo-size-large;
  }
}

$dynamic-map-height-small: 400px !default;
$dynamic-map-height-medium: 500px !default;
$dynamic-map-height-large: 600px !default;

$dynamic-map-space-smaller: 5px !default;
$dynamic-map-space-small: 10px !default;
$dynamic-map-space-medium: 20px !default;
$dynamic-map-space-large: 25px !default;
$dynamic-map-space-larger: 50px !default;

$dynamic-map-content-max-width: 40% !default;
$dynamic-map-content-min-width: 280px !default;

$dynamic-map-heading-margin: 26px !default;

.dynamic-map {
  @extend %section-container;
  position: relative;
  display: flex;
  justify-content: space-between;

  @include media($max: $bp-smaller) {
    flex-wrap: wrap;
  }
}

.dynamic-map-wrapper {
  position: relative;
  height: $dynamic-map-height-small * 0.7;
  padding: 0;
  background-size: cover;
  border: 0;
  border-radius: $container-border-radius;

  @include media($min: $bp-smaller) {
    height: $dynamic-map-height-small;
  }

  &.dynamic-map-wrapper-height-medium {
    height: $dynamic-map-height-medium * 0.7;

    @include media($min: $bp-smaller) {
      height: $dynamic-map-height-medium;
    }
  }

  &.dynamic-map-wrapper-height-large {
    height: $dynamic-map-height-large * 0.7;

    @include media($min: $bp-smaller) {
      height: $dynamic-map-height-large;
    }
  }

  @include media($max: $bp-smaller) {
    .dynamic-map-section-layout-mobile-above & {
      border-radius: 0 0 $container-border-radius $container-border-radius;
    }

    .dynamic-map-section-layout-mobile-below & {
      border-radius: $container-border-radius $container-border-radius 0 0;
    }
  }

  .dynamic-map-image {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    opacity: 0;
    border-radius: $container-border-radius;

    &[data-rimg="noscript"] {
      position: relative;
      width: 100%;
      height: 100%;
      opacity: 1;
      object-fit: cover;
    }
  }
}

.dynamic-map-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  border-radius: $container-border-radius;

  .dynamic-map-section-layout-x-outside-left &,
  .dynamic-map-section-layout-x-outside-right & {
    display: none;
  }

  @include media($max: $bp-smaller) {
    display: none;
  }
}

.dynamic-map-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.dynamic-map-error-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  padding: $dynamic-map-space-medium;
  line-height: 1.5;

  p {
    margin: 0;
    text-align: center;
  }

  a {
    color: inherit;
  }
}

.dynamic-map-card-wrapper {

  @include media($max: $bp-smaller) {
    .dynamic-map-section-layout-mobile-above & {
      order: -1;
      margin-bottom: 0;
    }

    .dynamic-map-section-layout-mobile-below & {
      margin-top: 0;
    }
  }

  @include media($min: $bp-smaller) {
    position: absolute;
    top: $dynamic-map-space-medium;
    right: $dynamic-map-space-medium;
    bottom: $dynamic-map-space-medium;
    left: 0;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    padding: 0 $dynamic-map-space-medium;

    .dynamic-map-section-layout-outside & {
      position: static;
      padding: 0;
      background-color: $color-content-containers-background;

    }

    .dynamic-map-section-layout-x-outside-left & {
      order: -1;
    }

    .dynamic-map-section-layout-y-outside-center &,
    .dynamic-map-section-layout-y-overlay-center & {
      align-items: center;
    }

    .dynamic-map-section-layout-y-outside-bottom &,
    .dynamic-map-section-layout-y-overlay-bottom & {
      align-items: flex-end;
    }

    .dynamic-map-section-layout-x-overlay-center & {
      justify-content: center;
    }

    .dynamic-map-section-layout-x-overlay-right & {
      justify-content: flex-end;
    }
  }

  @include media($min: $bp-larger) {
    top: $dynamic-map-space-large;
    bottom: $dynamic-map-space-large;
    padding: 0 $dynamic-map-space-large;
  }
}

.dynamic-map-card {
  width: 100%;
  padding: $dynamic-map-space-large;
  background-color: #fff;
  border: 0;
  word-wrap: break-word;

  .dynamic-map-section-layout-outside & {
    background-color: $color-content-containers-background;
    border-radius: $container-border-radius;
  }

  @include media($max: $bp-smaller) {
    max-width: 100%;

    .dynamic-map-section-layout-mobile-above & {
      border-radius: $container-border-radius $container-border-radius 0 0;
    }

    .dynamic-map-section-layout-mobile-below & {
      border-radius: 0 0 $container-border-radius $container-border-radius;
    }
  }

  @include media($min: $bp-smaller) {
    right: auto;
    bottom: $dynamic-map-space-large;
    left: $dynamic-map-space-large;
    width: auto;
    min-width: $dynamic-map-content-min-width;
    max-width: $dynamic-map-content-max-width;

    .dynamic-map-section-layout-x-outside-left &,
    .dynamic-map-section-layout-x-outside-right & {
      width: 100%;
      max-width: 100%;
    }
  }
}

.dynamic-map-card-text-alignment-left {
  text-align: left;
}

.dynamic-map-card-text-alignment-center {
  text-align: center;
}

.dynamic-map-card-text-alignment-right {
  text-align: right;
}

.dynamic-map-card-heading {
  @include font-size-heading-3;
  margin: 0 0 $dynamic-map-heading-margin;
  line-height: 1.2;
  color: $color-text-headings;
}

.dynamic-map-card-content p:last-child {
  margin-bottom: 0;
}

.dynamic-map-card-item-link {
  text-decoration: none;
}

.dynamic-map-wrapper,
.dynamic-map-card-wrapper {
  width: 100%;

  @include media($min: $bp-smaller) {
    .dynamic-map-section-layout-outside & {
      border-radius: $container-border-radius;
    }
  }

  @include media($min: $bp-smaller, $max: $bp-larger) {
    .dynamic-map-section-layout-outside & {
      width: calc(50% - #{$dynamic-map-space-smaller});
    }
  }

  @include media($min: $bp-larger) {
    .dynamic-map-section-layout-outside & {
      width: calc(50% - #{$dynamic-map-space-small});
    }
  }
}

$local-max-width: rem(520px);
$local-space: rem(20px);
$local-title-spacing: rem(24px);
$local-mobile-image: rem(48px);
$local-chevron-width: rem(14px);
$local-gutter-small: $gutter-content / 2;

.menulist--container {
  @extend %section-container;
}

.menulist--inner {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: center;
}

.menulist--item {
  position: relative;
  flex-grow: 0;
  flex-shrink: 0;
  width: 100%;
  background-color: $color-content-containers-background;
  border-bottom: 1px solid $color-layout-dividers;

  &:last-child {
    border-bottom: 0;
    border-radius: 0 0 $container-border-radius $container-border-radius;
  }

  &:first-child {
    border-radius: $container-border-radius $container-border-radius 0 0;
  }

  &:only-child {
    border-radius: $container-border-radius;
  }

  @include media($min: $bp-small) {
    padding: $space-medium;
    border: 0;
    border-radius: $container-border-radius;

    &:first-child,
    &:last-child {
      border-radius: $container-border-radius;
    }
  }

  @include media($min: $bp-small, $max: $bp-medium) {
    width: calc(50% - #{$local-gutter-small / 2});
    margin-right: #{$local-gutter-small};
    margin-bottom: #{$local-gutter-small};

    &:nth-child(2n),
    &:last-child {
      margin-right: 0;
    }

    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 & {
      margin-bottom: 0;
    }

    .menulist--blocks-count-3 &,
    .menulist--blocks-count-4 & {
      &:nth-child(n+3){
        margin-bottom: 0;
      }
    }

    .menulist--blocks-count-5 &,
    .menulist--blocks-count-6 & {
      &:nth-child(n+5){
        margin-bottom: 0;
      }
    }
  }

  @include media($min: $bp-medium) {
    width: calc(33.333% - #{$local-gutter-small * 2 / 3});
    margin-right: #{$local-gutter-small};
    margin-bottom: #{$local-gutter-small};

    &:nth-child(3n),
    &:last-child {
      margin-right: 0;
    }

    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 &,
    .menulist--blocks-count-3 & {
      margin-bottom: 0;
    }

    .menulist--blocks-count-4 &,
    .menulist--blocks-count-5 &,
    .menulist--blocks-count-6 & {
      &:nth-child(n+4){
        margin-bottom: 0;
      }
    }
  }

  @include media($min: $bp-larger) {
    width: calc(33.333% - #{$gutter-content * 2 / 3});
    margin-right: $gutter-content;
    margin-bottom: $gutter-content;

    .menulist--blocks-count-1 &,
    .menulist--blocks-count-2 &,
    .menulist--blocks-count-3 & {
      margin-bottom: 0;
    }

    .menulist--blocks-count-4 &,
    .menulist--blocks-count-5 &,
    .menulist--blocks-count-6 & {
      &:nth-child(n+4){
        margin-bottom: 0;
      }
    }
  }
}

.menulist--item--inner {
  @include media($min: $bp-small) {
    display: flex;
    width: 100%;
    max-width: $local-max-width;
    margin-right: auto;
    margin-left: auto;
  }
}

.menulist--image {
  position: relative;

  @include media($max: $bp-small) {
    position: absolute;
    top: rem(10px);
    right: $local-chevron-width + ($local-space * 1.5);
    width: $local-mobile-image;
    height: $local-mobile-image;
  }

  @include media($min: $bp-small) {
    @include font-size-body;
    display: inline-block;
    width: 35%;
    vertical-align: top;
  }

  img,
  svg {
    max-width: 100%;
  }
}

.menulist--content {

  @include media($min: $bp-small) {
    @include font-size-body;
    display: inline-block;
    width: 55%;
    margin-left: 10%;
    vertical-align: top;
  }
}

.menulist--title {
  @include font($font-heading, $font-weight: false, $font-style: false);
  @include font-size-heading-5;
  position: relative;
  padding: $local-title-spacing $local-space;
  margin: 0;
  color: $color-text-headings;
  cursor: pointer;

  @include media($max: $bp-small) {
    padding-right: $local-mobile-image + $local-chevron-width + ($local-space * 1.5);
  }

  @include media($min: $bp-small) {
    padding: 0;
    cursor: inherit;
  }
}

.menulist-title-icon {
  position: absolute;
  top: 50%;
  right: $local-space * 0.75;
  display: block;
  width: $local-chevron-width;
  height: 8px;
  margin-top: -4px;
  opacity: 0.5;

  @include media($min: $bp-small) {
    display: none;
  }

  .icon-chevron-down-left,
  .icon-chevron-down-right {
    transition-duration: 0s;
  }
}

.menulist--menu {
  @include font-size-body-small;
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.5;
  list-style: none;

  .accordion--active & {
    padding-bottom: $local-space + rem(10px);
  }

  @include media($min: $bp-small) {
    max-height: inherit;
    padding: 0;
    margin-top: rem(8px);
    opacity: 1;
  }
}

.menulist--menu-item {
  padding-right: $local-space;
  padding-left: $local-space;

  &:not(:first-child) {
    margin-top: rem(2px);
  }

  @include media($min: $bp-small) {
    padding-right: 0;
    padding-left: 0;
  }

  &.menulist--menu-item-hidden {
    display: none;
  }

  &.menulist--menu-item-trigger {
    margin-top: rem(8px);
  }
}

.menulist--menu-link {
  @extend %link--text;
  display: inline-block;
  text-decoration: none;

  @include media($max: $bp-small) {
    display: block;
    padding-top: rem(4px);
    padding-bottom: rem(4px);
  }

  .menulist--menu-item-trigger & {
    @extend %link--default;
    @include font-body-underline-links;
  }
}

// Newsletter variables
$dynamic-newsletter-header-width: 80% !default;

$dynamic-newsletter-space-smaller: 12px !default;
$dynamic-newsletter-space-small: 20px !default;
$dynamic-newsletter-space-medium: 36px !default;
$dynamic-newsletter-space-large: 50px !default;
$dynamic-newsletter-space-larger: 68px !default;

.dynamic-newsletter-section {
  .form-fields-inline {
    text-align: center;
  }

  .newsletter-success {
    font-weight: bold;
    text-align: center;
  }
}

.dynamic-newsletter {
  @extend %section-container;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;

  @include media($max: $bp-smaller) {
    flex-direction: column;
  }
}

.dynamic-newsletter-figure {
  position: relative;
  flex-shrink: 1;
  order: 0;
  margin: 0;
  background-size: cover;

  @include media($max: $bp-smaller) {
    .dynamic-newsletter-mobile-alignment-bottom & {
      order: 1;
    }
  }

  @include media($min: $bp-smaller) {
    .dynamic-newsletter-desktop-alignment-right & {
      order: 1;
    }
  }
}

.dynamic-newsletter-content {
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  order: 0;
  width: 100%;

  @include media($min: $bp-large) {
    padding: 0 $dynamic-newsletter-space-large;
  }
}

.dynamic-newsletter-figure,
.dynamic-newsletter-figure + .dynamic-newsletter-content {
  @include media ($min: $bp-smaller) {
    width: 50%;
  }
}


.dynamic-newsletter-figure + .dynamic-newsletter-content {
  @include media ($max: $bp-smaller) {
    .dynamic-newsletter-mobile-alignment-top & {
      padding-top: $space-x-large;
      padding-bottom: 0;
    }

    .dynamic-newsletter-mobile-alignment-bottom & {
      padding-top: 0;
      padding-bottom: $space-x-large;
    }
  }
}

.dynamic-newsletter-image {
  display: block;
  width: 100%;
  opacity: 0;

  &[data-rimg="noscript"] {
    opacity: 1;
  }
}

.dynamic-newsletter-header {
  margin: 0 auto;
  text-align: center;

  @include media($min: $bp-smaller) {
    max-width: $dynamic-newsletter-header-width;
  }
}

.dynamic-newsletter-heading {
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: $dynamic-newsletter-space-smaller;
  color: $color-text-headings;

  @include media ($min: $bp-large) {
    @include font-size-heading-3;
  }
}

.dynamic-newsletter-text {
  @extend %rte;
  @include font-size-body;
  margin-top: 0;
  margin-bottom: $dynamic-newsletter-space-medium;
  line-height: 1.5625;

  &.home-section--subheading {
    a {
      -webkit-text-decoration-line: underline;
              text-decoration-line: underline;
    }
  }
}

.dynamic-newsletter-form {
  .contact-form {
    margin: 0;
  }
}

.dynamic-newsletter-form-fields {
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.dynamic-newsletter-form-label {
  display: none;
}

.dynamic-newsletter-form-input {
  height: 100%;
  margin: 0;
}

.dynamic-newsletter-form-button {
  height: 100%;
}

$local-space-small: 10px;
$local-space-large: 20px;
$local-expander-width: rem(70px);

.promo-grid--container {
  @extend %section-container;

  .promo-grid--static & {
    margin-top: $space-x-large;
    margin-bottom: -$space-x-large;

    @include media($min: $bp-large) {
      margin-top: $space-xx-large;
      margin-bottom: -$space-xx-large;
    }
  }

  .home-section--title-container {
    margin-top: 0;
    margin-bottom: $space-section-heading;
    text-align: center;

    @include media($max: $bp-small) {
      margin-bottom: $space-large;
    }

    .home-section--title {
      margin-bottom: rem(10px);
    }

    .home-section--subheading {
      text-align: center;
    }
  }
}

.promo-grid--inner {
  width: 100%;

  @include media($min: $bp-small) {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: flex-start;
    justify-content: space-between;
  }

  .promo-block-grid {
    position: relative;
    background-repeat: no-repeat;
    background-position: 50% 50%;
    background-size: cover;
    border-radius: $container-border-radius;

    &.desktop-block {
      display: none;
    }

    &.mobile-block {
      display: block;
    }

    @include media($min: $bp-small) {
      flex-shrink: 0;
      margin-top: $local-space-small;

      &.mobile-block {
        display: none;
      }

      &.desktop-block {
        display: block;
        &.promo-grid--half-width {
          flex-grow: 0;
          width: calc(50% - #{$local-space-small / 2});
          &:nth-of-type(-n + 2) {
            margin-top: 0;
          }
        }
      }

      &.desktop-block {
        display: block;
        &.promo-grid--onethird-width {
          flex-grow: 0;
          width: calc(33% - #{$local-space-small / 3});
          &:nth-of-type(-n + 3) {
            margin-top: 0;
          }
        }
      }

      &.promo-grid--full-width {
        flex-grow: 1;
        width: 100%;

        &:first-child {
          margin-top: 0;

          + .promo-grid--half-width {
            margin-top: $local-space-small;
          }
        }
      }
    }

    @include media($min: $bp-larger) {
      margin-top: $local-space-large;

      &.promo-grid--half-width {
        &.desktop-block {
          width: calc(50% - #{$local-space-large / 2});
          &:nth-of-type(-n + 2) {
            margin-top: 0;
          }
        }
      }

      &.promo-grid--full-width {

        &:first-child {
          margin-top: 0;

          + .promo-grid--half-width {
            margin-top: $local-space-large;
          }
        }
      }
    }
  }
}

.promo-block-grid--content {
  position: relative;
  display: block;
  height: 100%;
  padding: $space-large $space-medium;
  color: currentColor;
  text-decoration: none;
  border-radius: $container-border-radius;
  transition: height 0.23s $ease-bubble;

  @include media($min: $bp-small) {
    &.onboarding {
      min-height: 300px;
    }
  }

  .promo-block-grid--content-wrapper {
    padding: $space-large $space-medium;
  }

  &.promo-block-grid--content-align-top-center,
  &.promo-block-grid--content-align-bottom-center,
  .promo-block-grid--content-wrapper {
    padding-top: $space-x-large;
    padding-bottom: $space-x-large;
  }

  @include media($max: $bp-small) {
    height: 120px;
    padding-right: $local-expander-width + $space-medium;
    margin-top: 10px;
    cursor: pointer;

    .promo-block-grid--content-wrapper {
      padding-right: $local-expander-width + $space-medium;
    }

    .promo-block-grid--index-1 & {
      margin-top: 0;
    }

    &.promo-block-grid--content-align-top-center,
    &.promo-block-grid--content-align-bottom-center,
    .promo-block-grid--content-wrapper {
      padding-top: $space-large;
      padding-bottom: $space-large;
    }

    &.animating,
    &.promo-block-grid--expanded {
      overflow: hidden;
    }

    &.animating-in,
    &.promo-block-grid--expanded:not(.animating-out) {
      height: 270px;
    }

    &.promo-block-grid--expanded,
    &.promo-block-grid--expanded:not(.animating-out) {
      padding-right: 1.25em;

      .promo-block-grid--content-wrapper {
        padding-right: 1.25em;
      }
    }

    &.promo-block-grid--expanded.promo-block-grid--unlinked {
      cursor: default;
    }
  }

  @include media($min: $bp-larger) {
    padding: $space-large;

    .promo-block-grid--content-wrapper {
      padding: $space-large;
    }
  }
}

.promo-block-grid--content-wrapper {
  position: absolute;
  left: 0;
  width: 100%;
  transition: font-size 0.23s $ease-bubble;

  .promo-block-grid--content-align-top-center &,
  .promo-block-grid--content-align-center-center &,
  .promo-block-grid--content-align-bottom-center & {
    margin-right: auto;
    margin-left: auto;
    text-align: center;

    .promo-block-grid--preheading,
    .promo-block-grid--header,
    .promo-block-grid--text {
      max-width: 75%;
      margin-right: auto;
      margin-left: auto;
    }
  }
  .promo-block-grid--content-align-top-right &,
  .promo-block-grid--content-align-center-right &,
  .promo-block-grid--content-align-bottom-right & {
    text-align: right;
    left: 0;

    .promo-block-grid--preheading,
    .promo-block-grid--header,
    .promo-block-grid--text {
      max-width: 60%;
      margin-right: 0;
      margin-left: auto;
    }
  }


  .promo-block-grid--content-align-top-left &,
  .promo-block-grid--content-align-center-left &,
  .promo-block-grid--content-align-bottom-left & {
    .promo-block-grid--preheading,
    .promo-block-grid--header,
    .promo-block-grid--text {
      max-width: 60%;
    }
  }

  .promo-block-grid--content-align-center-left &,
  .promo-block-grid--content-align-center-center &,
  .promo-block-grid--content-align-center-right & {
    top: 50%;
    transform: translateY(-50%);
  }

  .promo-block-grid--content-align-bottom-left &,
  .promo-block-grid--content-align-bottom-center &,
  .promo-block-grid--content-align-bottom-right & {
    top: 100%;
    transform: translateY(-100%);
  }


  .promo-block-grid--content-align-top-left &,
  .promo-block-grid--content-align-top-center &,
  .promo-block-grid--content-align-top-right & {
    top: 0;
  }


  @include media($max: $bp-small) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    .promo-block-grid--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }
}

.promo-block-grid--background {
  position: absolute;
  width: 100%;
  height: 100%;
}

.promo-block-grid--expander {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: $local-expander-width;
  color: $color-white;
  cursor: pointer;
  background-color: transparent;
  border: 0;
  outline: 0;
  transition: opacity 0.23s $ease-bubble;

  @include media($min: $bp-small) {
    display: none;
  }

  // Button should be hidden when expanded
  .promo-block-grid--expanded & {
    visibility: hidden;
  }

  // Button should be visible when expanded, but is collapsing
  .promo-block-grid--expanded.animating-out & {
    visibility: visible;
  }

  // Button should be transparent when collapsing, then opaque as expanding
  .animating-in &,
  .promo-block-grid--expanded:not(.animating-out) & {
    opacity: 0;
    transition-delay: 0s;
  }

  svg {
    position: absolute;
    bottom: 50%;
    left: 50%;
    display: block;
    width: 20px;
    height: 12px;
    margin-bottom: -7px;
    margin-left: -10px;
    overflow: visible;
    filter: drop-shadow(0 0 4px rgba($color-black, 0.6));
    transform-origin: 50% 50%;
  }
}

.promo-block-grid--preheading,
.promo-block-grid--text,
.promo-block-grid--header {
  transition: font-size 0.23s $ease-bubble;

  @include media($max: $bp-small) {
    max-width: 75%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    .promo-block-grid--expanded,
    .promo-block-grid--expanded:not(.animating-out) & {
      max-width: 85%;
    }

    .promo-block-grid--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }

  .promo-grid--container &{
    @include media($min: $bp-small, $max: $bp-medium) {
      max-width: 80%
    }
  }
}


.promo-block-grid--expander {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: $local-expander-width;
  color: $color-white;
  cursor: pointer;
  background-color: transparent;
  border: 0;
  outline: 0;
  transition: opacity 0.23s $ease-bubble;

  @include media($min: $bp-small) {
    display: none;
  }

  // Button should be hidden when expanded
  .promo-block-grid--expanded & {
    visibility: hidden;
  }

  // Button should be visible when expanded, but is collapsing
  .promo-block-grid--expanded.animating-out & {
    visibility: visible;
  }

  // Button should be transparent when collapsing, then opaque as expanding
  .animating-in &,
  .promo-block-grid--expanded:not(.animating-out) & {
    opacity: 0;
    transition-delay: 0s;
  }

  svg {
    position: absolute;
    bottom: 50%;
    left: 50%;
    display: block;
    width: 20px;
    height: 12px;
    margin-bottom: -7px;
    margin-left: -10px;
    overflow: visible;
    filter: drop-shadow(0 0 4px rgba($color-black, 0.6));
    transform-origin: 50% 50%;
  }
}

.promo-block-grid--text,
.promo-block-grid--header,
.promo-block-grid--preheading {
  transition: font-size 0.23s $ease-bubble;

  @include media($max: $bp-small) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 75%;

    .promo-block-grid--expanded,
    .promo-block-grid--expanded:not(.animating-out) & {
      max-width: 85%;
    }

    .promo-block-grid--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }

  .promo-grid--container &{
    @include media($min: $bp-small, $max: $bp-medium) {
      max-width: 80%
    }
  }
}

.promo-block-grid--preheading {
  @include font($font-body);
  @include font-size-body-medium;
  margin: 0 0 $space-xx-small;
  letter-spacing: $font-body-spacing;

  @include media($min: $bp-small) {
    @include font-size-body-medium;
  }
}

.promo-block-grid--header {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($max: $bp-small) {
    .animating-in &,
    .promo-block-grid--expanded:not(.animating-out) & {
      @include font-size-heading-1;
    }
  }

  @include media($min: $bp-small) {
    .promo-grid--half-width & {
      @include font-size-heading-3;
    }

    .promo-grid--full-width & {
      @include font-size-heading-medium;
    }
  }

  @include media($min: $bp-larger) {

    .promo-grid--half-width & {
      @include font-size-heading-3;
    }

    .promo-grid--full-width & {
      @include font-size-heading-large;
    }
  }
}

.promo-block-grid--text {
  @include font-size-body;
  margin-top: $space-xx-small;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($max: $bp-small) {
    @include font-size-body-small;

    .animating-in &,
    .promo-block-grid--expanded & {
      @include font-size-body;
    }
  }

  @include media($min: $bp-larger) {
    .promo-grid--full-width & {
      @include font-size-body-medium;
    }
  }
}

.promo-block-grid--button {
  display: none;
  opacity: 0;
  transition:
  background-color 0.4s $ease-out-quad,
  font-size 0.15s $ease-out-quad,
  padding 0.15s $ease-out-quad,
  opacity 0.23s $ease-bubble;

  @include media($min: $bp-small) {
    position: relative;
    display: inline-block;
    opacity: 1;
  }

  &:not(.button-signpost) {
    @include button-size(small);
    margin-top: $space-x-large;

    @include media($min: $bp-small) {
      @include button-size(medium);

      .promo-grid--full-width & {
        @include button-size(medium);
      }
    }

    @include media($min: $bp-larger) {
      .promo-grid--container & {
        @include button-size(medium);
      }

      .promo-grid--full-width & {
        @include button-size(large);
      }
    }
  }

  .animating-in &,
  .promo-block-grid--expanded & {
    display: inline-block;
  }

  .promo-block-grid--expanded:not(.animating-out) & {
    opacity: 1;
  }
}

// Minimum tile heights for each layout (Small, Medium, Large)
$local-mosaic-heights-layout: (
(440px, 540px, 640px),
(440px, 540px, 640px),
(280px, 330px, 380px),
(430px, 480px, 530px),
(280px, 330px, 380px)
);

$local-space-small: 10px;
$local-space-large: 20px;
$local-expander-width: rem(70px);


.promo-mosaic--container {
  @extend %section-container;
}

.promo-mosaic--inner {
  transition: height 0.2s $ease-out-ripple;

  @include media($min: $bp-small) {
    display: grid;
    grid-gap: $local-space-small;
  }

  @include media($min: $bp-larger) {
    grid-gap: $local-space-large;
  }


  // The extra selectors are to beat out specificity rules :P
  html body .home-section--content & {
    &.promo-mosaic--compressed {
      .promo-block-mosaic {
        @include media($max: $bp-small) {
          min-height: unset;
        }
      }
    }
  }

  @for $i from 1 through 5 {
    &.promo-mosaic--layout-#{$i} {
      .promo-mosaic--height-small & {
        .promo-block-mosaic {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 1) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 1);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block-mosaic {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 1));
            }
          }
        }
      }

      .promo-mosaic--height-medium & {
        .promo-block-mosaic {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 2) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 2);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block-mosaic {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 2));
            }
          }
        }
      }

      .promo-mosaic--height-large & {
        .promo-block-mosaic {
          min-height: nth(nth($local-mosaic-heights-layout, $i), 3) * 0.85;

          @include media($min: $bp-medium) {
            min-height: nth(nth($local-mosaic-heights-layout, $i), 3);
          }
        }

        &.promo-mosaic--maintain-aspect-ratio {
          @include media($min: $bp-small, $max: $max-width) {
            .promo-block-mosaic {
              min-height: vw(nth(nth($local-mosaic-heights-layout, $i), 3));
            }
          }
        }
      }
    }
  }

  @include media($min: $bp-larger) {
    .promo-block-mosaic--header {
      @include font-size-heading-2;
    }

    .promo-block-mosaic--text {
      @include font-size-body-medium;
    }

    .promo-block-mosaic--button {
      @include button-size(medium);
      margin-top: $font-heading-medium;
    }
  }

  &.promo-mosaic--layout-1 {
    @include media($min: $bp-small) {
      .promo-block-mosaic--header {
        @include font-size-heading-medium;
      }

      .promo-block-mosaic--text {
        @include font-size-body-medium;
      }

      .promo-block-mosaic--button {
        @include button-size(medium);
      }
    }

    @include media($min: $bp-larger) {
      .promo-block-mosaic--header {
        @include font-size-heading-large;
      }

      .promo-block-mosaic--text {
        @include font-size-body-large;
      }

      .promo-block-mosaic--button {
        @include button-size(large);
      }
    }
  }

  &.promo-mosaic--layout-2 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block-mosaic--index-1 {
        .promo-block-mosaic--header {
          @include font-size-heading-medium;
        }

        .promo-block-mosaic--text {
          @include font-size-body-medium;
        }

        .promo-block-mosaic--button {
          @include button-size(medium);
        }
      }
    }

    @include media($min: $bp-larger) {
      .promo-block-mosaic--index-1 {
        .promo-block-mosaic--header {
          @include font-size-heading-large;
        }

        .promo-block-mosaic--text {
          @include font-size-body-large;
        }

        .promo-block-mosaic--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-3 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block-mosaic--index-1 {
        grid-row-start: span 2;

        .promo-block-mosaic--header {
          @include font-size-heading-medium;
        }

        .promo-block-mosaic--text {
          @include font-size-body-medium;
        }

        .promo-block-mosaic--button {
          @include button-size(medium);
        }
      }
    }

    @include media($min: $bp-larger) {
      .promo-block-mosaic--index-1 {
        .promo-block-mosaic--header {
          @include font-size-heading-large;
        }

        .promo-block-mosaic--text {
          @include font-size-body-large;
        }

        .promo-block-mosaic--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-4 {
    @include media($min: $bp-small) {
      grid-template-columns: 1fr 1fr 1fr;

      .promo-block-mosaic--index-1,
      .promo-block-mosaic--index-4 {
        grid-column-start: span 2;

        .promo-block-mosaic--header {
          @include font-size-heading-medium;
        }

        .promo-block-mosaic--text {
          @include font-size-body-medium;
        }

        .promo-block-mosaic--button {
          @include button-size(medium);
        }
      }
    }

    @include media($min: $bp-larger) {
      .promo-block-mosaic--index-1,
      .promo-block-mosaic--index-4 {
        .promo-block-mosaic--header {
          @include font-size-heading-large;
        }

        .promo-block-mosaic--text {
          @include font-size-body-large;
        }

        .promo-block-mosaic--button {
          @include button-size(large);
        }
      }
    }
  }

  &.promo-mosaic--layout-5 {
    @include media($min: $bp-small) {
      grid-template-columns: 2fr 1fr;

      .promo-block-mosaic--index-1,
      .promo-block-mosaic--index-4 {
        grid-row-start: span 3;

        .promo-block-mosaic--header {
          @include font-size-heading-medium;
        }

        .promo-block-mosaic--text {
          @include font-size-body-medium;
        }

        .promo-block-mosaic--button {
          @include button-size(medium);
        }
      }

      .promo-block-mosaic--index-2,
      .promo-block-mosaic--index-3,
      .promo-block-mosaic--index-5 {
        grid-row-start: span 2;
      }
    }

    @include media($min: $bp-larger) {
      .promo-block-mosaic--index-1,
      .promo-block-mosaic--index-4 {
        .promo-block-mosaic--header {
          @include font-size-heading-large;
        }

        .promo-block-mosaic--text {
          @include font-size-body-large;
        }

        .promo-block-mosaic--button {
          @include button-size(large);
        }
      }
    }
  }

  // This is the fallback for IE11 because display: grid does not work there
  @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    @include media($min: $bp-small) {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: stretch;
      justify-content: space-between;
    }

    &.promo-mosaic--layout-1 {
      .promo-block-mosaic {
        @include media($min: $bp-small) {
          width: 100%;
          margin: 0;
        }
      }
    }

    .promo-block-mosaic {
      @include media($min: $bp-small) {
        flex: 0 1 auto;
        width: calc(50% - #{$local-space-small / 2});
        margin-top: $local-space-small;

        &:nth-child(1),
        &:nth-child(2) {
          margin-top: 0;
        }

        &:nth-child(2n - 1) {
          margin-right: $local-space-small / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-small / 2;
        }

        .promo-block-mosaic--header {
          @include font-size-heading-medium;
        }

        .promo-block-mosaic--text {
          @include font-size-body-medium;
        }

        .promo-block-mosaic--button {
          @include button-size(medium);
        }
      }

      @include media($min: $bp-larger) {
        width: calc(50% - #{$local-space-large / 2});
        margin-top: $local-space-large;

        &:nth-child(2n - 1) {
          margin-right: $local-space-large / 2;
        }

        &:nth-child(2n) {
          margin-left: $local-space-large / 2;
        }
      }
    }

    .promo-block-mosaic--content {
      min-height: inherit;
    }
  }
}

.promo-block-mosaic {
  position: relative;
  height: 100%;
  background-repeat: no-repeat;
  background-position: 50% 50%;
  background-size: cover;
  border-radius: $container-border-radius;
}

.promo-block-mosaic--content {
  position: relative;
  display: block;
  height: 100%;
  padding: $space-x-large $space-medium;
  color: currentColor;
  text-decoration: none;
  border-radius: $container-border-radius;
  transition: height 0.23s $ease-bubble;

  @include media($max: $bp-small) {
    height: 120px;
    padding-right: $local-expander-width + $space-medium;
    margin-top: 10px;
    cursor: pointer;

    .promo-block-mosaic--index-1 & {
      margin-top: 0;
    }

    &.animating,
    &.promo-block-mosaic--expanded {
      overflow: hidden;
    }

    &.animating-in,
    &.promo-block-mosaic--expanded:not(.animating-out) {
      height: 270px;
      min-height: inherit;
    }

    .promo-block-mosaic--expanded,
    &.promo-block-mosaic--expanded:not(.animating-out) {
      padding-right: 1.25em;
    }

    &.promo-block-mosaic--expanded.promo-block-mosaic--unlinked {
      cursor: default;
    }
  }

  @include media($min: $bp-larger) {
    padding: $space-large;
  }
}

.promo-block-mosaic--content-wrapper {
  position: relative;
  width: 100%;
  transition: font-size 0.23s $ease-bubble;

  .promo-block-mosaic--content-align-top-center &,
  .promo-block-mosaic--content-align-center-center &,
  .promo-block-mosaic--content-align-bottom-center & {
    text-align: center;

    .promo-block-mosaic--header,
    .promo-block-mosaic--text {
      margin-right: auto;
      margin-left: auto;
    }
  }

  .promo-block-mosaic--content-align-top-right &,
  .promo-block-mosaic--content-align-center-right &,
  .promo-block-mosaic--content-align-bottom-right & {
    text-align: right;

    .promo-block-mosaic--header,
    .promo-block-mosaic--text {
      margin-right: 0;
      margin-left: auto;
    }
  }

  .promo-block-mosaic--content-align-center-left &,
  .promo-block-mosaic--content-align-center-center &,
  .promo-block-mosaic--content-align-center-right & {
    top: 50%;
    transform: translateY(-50%);
  }

  .promo-block-mosaic--content-align-bottom-left &,
  .promo-block-mosaic--content-align-bottom-center &,
  .promo-block-mosaic--content-align-bottom-right & {
    top: 100%;
    transform: translateY(-100%);
  }

  @include media($max: $bp-small) {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    .promo-block-mosaic--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }
}

.promo-block-mosaic--background {
  position: absolute;
  width: 100%;
  height: 100%;
}

.promo-block-mosaic--expander {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: $local-expander-width;
  color: $color-white;
  cursor: pointer;
  background-color: transparent;
  border: 0;
  outline: 0;
  transition: opacity 0.23s $ease-bubble;

  @include media($min: $bp-small) {
    display: none;
  }

  // Button should be hidden when expanded
  .promo-block-mosaic--expanded & {
    visibility: hidden;
  }

  // Button should be visible when expanded, but is collapsing
  .promo-block-mosaic--expanded.animating-out & {
    visibility: visible;
  }

  // Button should be transparent when collapsing, then opaque as expanding
  .animating-in &,
  .promo-block-mosaic--expanded:not(.animating-out) & {
    opacity: 0;
    transition-delay: 0s;
  }

  svg {
    position: absolute;
    bottom: 50%;
    left: 50%;
    display: block;
    width: 20px;
    height: 12px;
    margin-bottom: -7px;
    margin-left: -10px;
    overflow: visible;
    filter: drop-shadow(0 0 4px rgba($color-black, 0.6));
    transform-origin: 50% 50%;
  }
}


.promo-block-mosaic--text,
.promo-block-mosaic--header {
  max-width: 60%;
  transition: font-size 0.23s $ease-bubble;

  @include media($max: $bp-small) {
    max-width: 75%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;

    .promo-block-mosaic--expanded,
    .promo-block-mosaic--expanded:not(.animating-out) & {
      max-width: 85%;
    }

    .promo-block-mosaic--expanded:not(.animating-out) & {
      white-space: normal;
    }
  }
}

.promo-block-mosaic--header {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.2;

  @include media($max: $bp-small) {
    .animating-in &,
    .promo-block-mosaic--expanded:not(.animating-out) & {
      @include font-size-heading-1;
    }
  }

  @include media($min: $bp-larger) {
    line-height: 1.4;

    .promo-mosaic--column-narrow {
      @include font-size-heading-medium;
    }
  }
}

.promo-block-mosaic--text {
  @include font-size-body-small;
  margin-top: $space-xxx-small;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($max: $bp-small) {
    .animating-in &,
    .promo-block-mosaic--expanded & {
      @include font-size-body-medium;
    }
  }

  @include media($min: $bp-small) {
    .promo-grid--full-width & {
      @include font-size-body-medium;
    }
  }

  @include media($min: $bp-larger) {
    .promo-mosaic--column-narrow &,
    .promo-grid--container & {
      @include font-size-body-medium;
    }

    .promo-grid--full-width & {
      @include font-size-body-large;
    }
  }
}

.promo-block-mosaic--button {
  display: none;
  margin-top: $space-medium;
  opacity: 0;
  transition:
  background-color 0.4s $ease-out-quad,
  font-size 0.15s $ease-out-quad,
  padding 0.15s $ease-out-quad,
  opacity 0.23s $ease-bubble;

  .animating-in &,
  .promo-block-mosaic--expanded & {
    display: inline-block;
  }

  .promo-block-mosaic--expanded:not(.animating-out) & {
    opacity: 1;
  }

  @include media($min: $bp-small) {
    position: relative;
    display: inline-block;
    opacity: 1;
  }

  @include media($min: $bp-larger) {
    .promo-mosaic--column-narrow & {
      @include button-size(medium);
    }
  }
}

.rich-text--container {
  @extend %section-container;
  margin: 0 auto;
}

.rich-text-regular {
  max-width: rem(650px);
}

.rich-text-wide {
  max-width: rem(850px);
}

.rich-text-block {
  margin-bottom: $space-xx-large;

  &:last-child {
    margin-bottom: 0;
  }

  @include media($min: $bp-medium) {
    margin-bottom: $space-xx-large * 1.5;
  }
}

.rich-text-alignment-left {
  text-align: left;
}

.rich-text-alignment-center {
  text-align: center;
}

.rich-text-alignment-right {
  text-align: right;
}

.rich-text-heading {
  @include font-size-heading-4;
  margin-bottom: $space-medium;
  -webkit-margin-before: 0;
          margin-block-start: 0;
  line-height: 1.5;
  color: $color-text-headings;
}

.rich-text-heading-medium {
  @include font-size-heading-3;
}

.rich-text-heading-large {
  @include font-size-heading-1;
}

.rich-text-content {
  line-height: 1.5;
  word-wrap: break-word;

  p {
    -webkit-margin-before: 0;
            margin-block-start: 0;
    -webkit-margin-after: 0;
            margin-block-end: 0;
  }
}

.search-section {
  margin: 0 auto;
  position: relative;

  & .live-search-form {
    border: none;
  }

  .live-search-form-field {
    color: $color-forms-input-text;
    background-color: $color-forms-input-background;

    &:-ms-input-placeholder {
      color: $color-forms-input-placeholder-text;
    }

    &::placeholder {
      color: $color-forms-input-placeholder-text;
    }
  }

  .live-search-button {
    color: $color-buttons-primary-button-text;
    background-color: $color-buttons-primary-button-background;

    @if (alpha($color-forms-input-border) != 0) {
      border-color: $color-forms-input-border;
      border-top-width: 1px;
      border-right-width: 1px;
      border-bottom-width: 1px;
    }

    &:hover {
      background-color: $color-buttons-primary-button-background-hover;
    }
  }

  .form-field {
    .live-search-form-field {
      @if (alpha($color-forms-input-border) != 0) {
        border-color: $color-forms-input-border;
        border-top-width: 1px;
        border-bottom-width: 1px;
        border-left-width: 1px;
      }

      &:focus {
        border-color: $color-forms-input-border-hover;
        outline: 0;

        ~ .live-search-button {
          border-color: $color-forms-input-border-hover;
          outline: 0;
        }
      }
    }
  }
}

.search-section-background,
.search-section-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-size: cover;
}

.search-section-position-top-left {
  background-position: left top;
}

.search-section-position-top-center {
  background-position: center top;
}

.search-section-position-top-right {
  background-position: right top;
}

.search-section-position-center-left {
  background-position: left center;
}

.search-section-position-center-center {
  background-position: center;
}

.search-section-position-center-right {
  background-position: right center;
}

.search-section-position-bottom-left {
  background-position: left bottom;
}

.search-section-position-bottom-center {
  background-position: center bottom;
}

.search-section-position-bottom-right {
  background-position: right bottom;
}

.search-section-content {
  @extend %section-container;
  position: relative;

  .search-section-overlay + & {
    &,
    .search-section-heading {
      color: inherit;
    }
  }
}

.search-section-form {
  max-width: 85%;
  padding: 0;
  margin: 0 auto;

  @include media($min: $bp-larger) {
    max-width: 65%;
  }
}

.search-section-header {
  margin: 0 auto;
  text-align: center;

  @include media($min: $bp-smaller) {
    max-width: 80%;
  }

  p {
    margin-top: 0;
  }
}

.search-section-heading {
  @include font-size-heading-3;
  margin-top: 0;
  margin-bottom: $space-x-small;
  color: $color-text-headings;
}

.search-section-text {
  margin-top: 0;
  margin-bottom: $space-x-large;
  line-height: 1.5625;
}

.testimonials-section {
  @extend %section-container;
  padding-top: 0;
  padding-bottom: 0;
  overflow: hidden;
}

.testimonials-header {
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  margin-top: 0;
  margin-bottom: $space-section-heading;

  .testimonials-heading {
    margin-top: 0;
    margin-bottom: 0;
  }
}

.testimonials-heading {
  + .testimonials-subheading {
    margin-top: $space-medium;
  }
}

.testimonials-subheading {
  p {
    &:first-child {
      margin-top: 0;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.testimonials {
  position: relative;
  display: block;

  &:focus {
    outline: none;
  }

  @include media($min: $bp-medium) {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    margin: 0 auto;
  }

  .flickity-viewport {
    position: relative;
  }

  .flickity-slider {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .flickity-page-dots {
    position: relative;
    bottom: 0;
    margin-top: $space-medium;
  }

  .dot {
    width: 6px;
    height: 6px;

    &:not(.is-selected) {
      opacity: 0.25;
    }
  }
}

.testimonial {
  display: flex;
  align-items: center;
  width: 100%;
  padding: $space-x-large;
  background-color: $color-content-containers-background;
  border-radius: $container-border-radius;

  @include media($max: $bp-medium) {
    min-height: 100%;
    margin-right: 5px;
  }

  @include media($min: $bp-medium) {
    flex-grow: 1;
    width: 100%;
    max-width: 80%;

    &:not(:first-child) {
      margin-left: 20px;
    }

    .testimonials-1 & {
      max-width: 75%;
      padding: 2.5rem;
    }

    .testimonials-2 & {
      width: calc(50% - 20px);
      padding: 2rem;
    }

    .testimonials-3 & {
      width: calc(33.33% - 20px);
      padding: $space-large;
    }

    .testimonials-4 & {
      width: calc(50% - 20px);
      padding: $space-large;

      &:nth-child(3) {
        margin-left: 0;
      }

      &:nth-child(n+3) {
        margin-top: 20px;
      }
    }

    .testimonials-5 & {
      width: calc(33.33% - 20px);
      padding: $space-large;

      &:nth-child(n + 4) {
        width: calc(50% - 20px);
      }

      &:nth-child(4) {
        margin-left: 0;
      }

      &:nth-child(n + 4) {
        margin-top: 20px;
      }
    }
  }
}

.testimonial-inner {
  display: flex;
}

.testimonial-figure {
  @include font-size-heading-4;
  flex-shrink: 0;
  width: 60px;
  height: auto;
  margin-top: 0;
  margin-right: calc(#{$space-large} - 0.5em);
  margin-bottom: 0;
  margin-left: 0;

  @include media($min: $bp-small) {
    .testimonials-1 &,
    .testimonials-2 &,
    .testimonials-3 &,
    .testimonials-4 &,
    .testimonials-5 & {
      width: 90px;
    }
  }

  @include media($min: $bp-medium) {
    width: 70px;
    margin-right: calc(#{$space-x-large} - 0.5em);

    .testimonials-1 & {
      @include font-size-heading-1;
      width: 120px;
    }

    .testimonials-2 & {
      @include font-size-heading-3;
      width: 70px;
    }

    .testimonials-3 &,
    .testimonials-4 &,
    .testimonials-5 & {
      @include font-size-heading-4;
      width: 70px;
    }
  }
}

.testimonial-image {
  display: block;
  width: 100%;
}

.testimonial-blockquote {
  @include font-size-heading-4;
  padding-left: 0.5em;
  margin: 0;

  @include media($min: $bp-medium) {
    .testimonials-1 & {
      @include font-size-heading-1;
    }

    .testimonials-2 & {
      @include font-size-heading-3;
    }

    .testimonials-3 &,
    .testimonials-4 &,
    .testimonials-5 & {
      @include font-size-heading-4;
    }
  }
}

.testimonial-blockquote-quote {
  @include font($font-body);
  position: relative;
  letter-spacing: $font-body-spacing;

  a {
    @extend %link--default;
    @include font-body-underline-links;
  }

  p {
    margin-top: $space-small;
    margin-bottom: $space-small;
    line-height: 1.35;

    &:first-child {
      margin-top: 0;
    }

    .testimonial-show-quotations & {
      &:first-child::before {
        position: absolute;
        top: 0;
        left: -0.5em;
        content: "\201C";
      }

      &:last-child::after {
        content: "\201D";
      }
    }
  }
}

.testimonial-blockquote-citation {
  @include font-size-body;
  font-style: normal;
  line-height: 1.4;

  .testimonials-3 &,
  .testimonials-4 &,
  .testimonials-5 & {
    @include font-size-body-small;
  }

  p {
    margin: 0;
  }

  a {
    text-decoration: none;
    color: $color-text-regular-text;
    @include font-body-underline-links;
  }
}

$local-avatar-size: rem(45px);
$local-tweet-width: 276px;

$local-padding-small: rem(20px);
$local-padding-large: rem(25px);

.twitter--container {
  @extend %section-container;
  position: relative;
  overflow: hidden;
}

.twitter--inner {
  outline: 0;

  &:not(.flickity-enabled),
  .flickity-slider {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
    transition: width 0.1s ease;
  }

  &:not(.flickity-enabled) {
    @include media($max: $bp-medium) {
      flex-direction: column;
    }
  }

  &.flickity-enabled {
    display: block;
    width: 100%;
    cursor: grab;
  }

  .flickity-slider {
    @include media($max: $bp-medium) {
      @for $i from 1 through 3 {
        .tweet--count-#{$i} & {
          width: rem($local-tweet-width * $i);
        }
      }
    }
  }
}

.tweet--wrapper {
  display: flex;
  flex-direction: column;
  flex-grow: 0;
  flex-shrink: 0;
  align-items: flex-start;
  justify-content: flex-start;
  min-width: $local-tweet-width;
  min-height: 100%;
  padding: $local-padding-small;
  margin-right: $gutter-outer-small;
  overflow: hidden;
  white-space: normal;
  background-color: $color-content-containers-background;
  border-radius: $container-border-radius;
  transition: width 0.15s ease, padding 0.15s ease;

  // Mobile styling before flickity kicks in
  .twitter--inner:not(.flickity-enabled) &{
    @include media($max: $bp-medium) {
      display: block;
      width: 100%;
      border-right: 0;

      &:not(:first-child) {
        border-top: 1px solid $color-border-soft;
      }
    }
  }

  @include media($min: $bp-larger) {
    margin-right: $gutter-content;
    padding: $local-padding-large;
  }

  .tweet--count-1 & {
    width: 100%;
  }

  .tweet--count-2 & {
    width: 50%;

    @include media($min: $bp-large) {
      width: calc(50% - #{$gutter-outer-small});
    }

    @include media($min: $bp-larger) {
      width: calc(50% - #{$gutter-content});
    }
  }

  .tweet--count-3 & {
    width: percentage(1 / 3);

    @include media($min: $bp-large) {
      width: calc(#{percentage(1 / 3)} - #{$gutter-outer-small * 2 / 3});
    }

    @include media($min: $bp-larger) {
      width: calc(#{percentage(1 / 3)} - #{$gutter-content * 2 / 3});
    }
  }

  &:last-child {
    margin-right: 0;
  }

  a {
    text-decoration: none;
    word-wrap: break-word;
  }
}

.tweet--header {
  display: block;
  flex-grow: 0;
  flex-shrink: 0;
}

.tweet--header-image,
.tweet--header-authorinfo {
  display: inline-block;
  vertical-align: middle;
}

.tweet--header-image {
  display: none;
}

.tweet--header-authorinfo {
  max-width: 100%;
  margin-top: 1px;
  margin-bottom: 0;
}

.tweet--header-name {
  @include font-size-heading-5;
  display: block;
  color: $color-text-headings;
  text-decoration: none;
}

.tweet--header-screenname {
  @extend %link--text;
  @include font($font-body);
  @include font-size-heading-6;
  display: block;
  line-height: 1.5;
  letter-spacing: $font-body-spacing;
  color: $color-text-light-text;
  text-transform: none;
}

.tweet--content {
  flex-grow: 0;
  flex-shrink: 0;
  max-width: 100%;
  max-height: 100%;
  margin-top: $space-large;

  a {
    @extend %link--default;
    display: inline-block;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: normal;
    vertical-align: top;
  }

  // offset content vertically by the difference of the line-height minus font size
  .tweet {
    @include font-size-body;
    margin-top: -1px * ((1.6 * $font-body-size) - $font-body-size) / 2;
    margin-bottom: 0;
    line-height: 1.6;
    text-overflow: ellipsis;
    word-wrap: break-word;

    img {
      display: inline-block;
      height: rem($font-body-size + 6px);
      margin-top: -1 * rem(5px);
      vertical-align: baseline;
    }
  }

  .media {
    display: inline-block;
    float: left;
    width: 35%;
    max-width: 140px;
    margin-right: rem(25px);
    margin-bottom: rem(7px);

    img {
      display: block;
      max-width: 100%;
    }
  }
}

.tweet--footer {
  @extend %link--text;
  display: flex;
  align-items: center;
  padding-top: $space-small;
  margin-top: auto;
  clear: left;
}

.tweet--footer--posted,
.tweet--footer--icon {
  @include font-size-body-small;
  display: inline-block;
  vertical-align: middle;
}

.tweet--footer--posted {
  margin-left: rem(8px);
  color: $color-text-light-text;

  &:hover {
    color: $color-text-links;
  }
}

.tweet--footer--icon {

  svg {
    display: block;
    color: $color-twitter;
  }
}

.twitter--placeholder-posted,
.twitter--placeholder-name,
.twitter--placeholder-screenname {
  display: inline-block;
  vertical-align: middle;
}

.twitter--placeholder-name {
  width: 100px;
  height: $font-h5-size;
}

.twitter--placeholder-screenname {
  width: 100px;
  height: $font-h6-size;
}

.twitter--placeholder-tweet {
  width: 100%;
}

.twitter--placeholder-tweet-line {
  display: block;
  height: 1em;
  max-width: 100%;
  margin-top: 0.44em;

  &:nth-child(1) {
    width: 204px;
  }

  &:nth-child(2) {
    width: 180px;
  }

  &:nth-child(3) {
    width: 160px;
  }
}

.twitter--placeholder-posted {
  width: 80px;
  height: 1em;
}

.fourohfour--container {
  @extend %layout-container;
  margin-top: $space-xx-large * 2;
  margin-bottom: $space-xxx-large * 3;
  text-align: center;

  .fourohfour-title h1 {
    margin-top: 0;
    color: $color-text-headings;
  }
}

.fourohfour--inner {

  p {
    margin-bottom: $space-large;
    color: $color-text-regular-text;

    &:last-child {
      margin-bottom: 0;
    }
  }

  .button-primary {
    @include button-size(large);
  }
}

.announcement-bar {
  @include font($font-body, $font-family: false, $font-weight: bolder);
  @include font-size-body-smaller;
  display: block;
  padding: $gutter-outer-medium 0;
  line-height: 1.3;
  letter-spacing: $font-body-spacing;
  text-align: center;
  text-decoration: none;
  transform: translate3d(0, 0, 0) scale(1);

  &.only-mobile {
    @include media($min: $bp-small) {
      display: none;
    }
  }

  p {
    margin: 0;
  }

  a {
    color: currentColor;
  }

  @include media($min: $bp-small) {
    @include font-size-body-small;
  }
}

.announcement-bar-text {
  @extend %layout-container;
  display: none;

  @include media($min: $bp-small) {
    display: block;
  }
}

.announcement-bar-text-mobile {
  @extend %layout-container;

  @include media($min: $bp-small) {
    display: none;
  }
}

.announcement-bar-link {
  position: absolute;
  // Leave space for the outline while using keyboard
  top: 2px;
  right: 2px;
  bottom: 2px;
  left: 2px;
}

.announcement-bar-text a,
.announcement-bar-text-mobile a {
  position: relative;
  z-index: 1;
}

$local-max-width: 700px;

.article-image {
  position: relative;
  width: 100%;
  height: 250px;
  margin: 0;
  overflow: hidden;
  background-position: 50% 50%;
  background-size: cover;

  @include media($min: $bp-smaller) {
    height: 350px;
  }

  @include media($min: $bp-medium) {
    height: 400px;
  }

  @include media($min: $bp-large) {
    height: 500px;
  }
}

.article--container {
  @extend %layout-container;
  position: relative;
  margin-top: $space-x-large;

  @include media($max: $bp-large) {
    @extend %layout-container;
    margin-right: auto;
    margin-left: auto;
  }

  @include media($min: $bp-smaller, $max: $bp-large) {
    display: flex;
  }

  @include media($min: $bp-large) {
    padding-right: 0;
    padding-left: 0;
  }
}

.article--sidebar {
  padding-right: $space-medium;

  @include media($max: $bp-smaller) {
    display: none;
  }

  @include media($min: $bp-smaller, $max: $bp-large) {
    width: 18%;
  }

  @include media($min: $bp-large) {
    position: absolute;
    left: $space-large;
  }

  .share-buttons {
    margin-top: 0;

    .share-buttons--button {
      @include media($min: $bp-smaller, $max: $bp-xl) {
        display: block;
        margin-bottom: $space-xx-small;
        margin-left: 0 !important; //scss-lint:disable ImportantRule
      }
    }
  }
}

.article--share-buttons {
  margin-top: $space-x-large;

  @include media($min: $bp-smaller) {
    display: none;
  }
}

.article--inner {
  margin-right: auto;
  margin-left: auto;

  @include media($max: $bp-smaller) {
    width: 100%;
  }

  @include media($min: $bp-smaller, $max: $bp-large) {
    width: 82%;
  }

  @include media($min: $bp-large) {
    @extend %layout-container;
    max-width: $local-max-width;
  }
}

.article--meta {
  display: flex;
  align-items: center;
  color: $color-text-light-text;
}

.article--meta-item {
  @include media($max: $bp-small) {
    @include font-size-body-small;
  }

  &:nth-child(2) {
    padding-left: 11px;
    margin-left: 10px;
    border-left: 1px solid transparentize($color-border, 0.65);

    @include media($max: $bp-small) {
      padding-left: 6px;
      margin-left: 5px;
    }
  }
}

.article--title {
  @include font-size-heading-1;
  margin-top: 0;
  margin-bottom: $space-x-large;
  color: $color-text-headings;

  .article--meta + & {
    margin-top: $space-x-small;
  }
}

.article--tags {
  @include font($font-body, $font-family: false);
  @include font-size-body-smaller;
  margin-top: $space-xx-large;
  letter-spacing: $font-body-spacing;
  color: $color-text-light-text;

  .article--tags-title {
    color: $color-text-regular-text;
  }

  a {
    @extend %link--default;
    margin-left: $space-xxx-small;
    color: $color-text-light-text;

    &:hover {
      color: transparentize($color-text-regular-text, 0.4);
    }
  }
}

.article--pagination {
  @extend %clearfix;
  width: 100%;
  margin-top: $space-xxx-large;
  font-size: 0;
  letter-spacing: 0;

  .article--pagination-item-left,
  .article--pagination-item-right {
    position: relative;
    display: inline-block;
    max-width: 40%;
    width: 100%;

    > a {
      @extend %link--default;
    }
  }

  .article--pagination-item-right {
    float: right;
    text-align: right;
  }

  .article--pagination-chevron-right,
  .article--pagination-chevron-left {
    @extend %inline-chevron;
    margin-top: rem(8px);
  }

  .article--pagination-chevron-left {
    margin-right: rem(5px);
    margin-left: 0;

    svg {
      transform: rotate(90deg);
    }

    @include media($min: $bp-smaller) {
      position: absolute;
      left: calc(-8px - #{rem(5px)});
    }
  }

  .article--pagination-text {
    @include font-body-bold;
    @include font-size-body;
    display: inline-block;
    width: calc(100% - (8px + #{rem(5px)}));
    letter-spacing: $font-body-spacing;
    vertical-align: top;
  }

  .article--pagination-title {
    @include font($font-body, $font-style: italic);
    @include font-size-body-small;
    display: none;
    margin-top: $space-xxx-small;
    line-height: 1.46;
    letter-spacing: $font-body-spacing;
    color: $color-text-regular-text;

    @include media($min: $bp-smaller) {
      display: block;
    }
  }
}

$local-space-small: 10px;
$local-space-large: 20px;

.blog-title {
  margin-top: $space-x-small;
  margin-bottom: $space-small;
  color: $color-text-headings;

  @include media($min: $bp-large) {
    margin-top: $space-large;
    margin-bottom: $space-small;
  }

  h1,
  a {
    display: inline-block;
  }

  a {
    padding: rem(2px) rem(10px);
    color: inherit;
  }

  svg {
    display: block;
  }
}

.blog--container {
  @extend %layout-container;
}

.blog--inner {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  padding: 0;
  list-style-type: none;

  .article--excerpt-wrapper {

    @include media($max: $bp-smaller) {
      width: 100%;
      margin-right: 0;
    }

    @include media($min: $bp-smaller) {
      width: calc(#{percentage(1 / 2)} - #{$local-space-small * 1 / 2});
      margin-right: $local-space-small;
    }

    @include media($min: $bp-smaller, $max: $bp-medium) {
      &:nth-child(2n) {
        margin-right: 0;
      }
    }

    @include media($max: $bp-small) {
      margin-bottom: $space-large;
    }

    @include media($min: $bp-small) {
      margin-bottom: $space-xx-large;
    }

    @include media($min: $bp-medium) {
      &:nth-child(3n) {
        margin-right: 0;
      }
    }

    @include media($min: $bp-medium, $max: $bp-larger) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-small * 2 / 3});
    }

    @include media($min: $bp-larger) {
      width: calc(#{percentage(1 / 3)} - #{$local-space-large * 2 / 3});
      margin-right: $local-space-large;
    }
  }
}

.blog--no-results {
  @extend %no-results--wrapper;
}

.blog--no-results-title {
  @extend %no-results--title;
}

$local-xs-tween: 480px;
$local-cart-items-maxwidth: 860px;
$local-cart-sidebar-width: 280px;

.cart--section {
  @extend %layout-container;
}

.cart {
  display: block;
  max-width: $local-cart-items-maxwidth;
  margin: 0 auto;

  &.has-sidebar {
    @include media($min: $bp-medium) {
      max-width: calc(#{$local-cart-items-maxwidth} + #{$local-cart-sidebar-width} + #{$space-medium});
    }

    @include media($min: $bp-large) {
      max-width: calc(#{$local-cart-items-maxwidth} + #{$local-cart-sidebar-width} + #{$space-x-large});
    }

    @include media($min: $bp-xl) {
      max-width: calc(#{$local-cart-items-maxwidth} + #{$local-cart-sidebar-width} + #{$space-xx-large});
    }
  }
}

.cart-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: $space-large;
  margin-bottom: $space-large;
  color: $color-text-headings;

  @include media($min: $bp-small) {
    margin-bottom: $space-x-large;
  }

  @include media($min: $bp-large) {
    margin-top: $space-xx-large;
    margin-bottom: $space-xx-large;
  }

  h1 {
    margin-top: 0;
    margin-bottom: 0;
  }
}

.cart-title-right {
  display: flex;
  align-items: center;
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 0;
}

.cart-title-button {
  @include button-size(small);
  display: flex;
  align-items: center;
  font-weight: bold;

  @include media($min: $local-xs-tween) {
    @include button-size(medium);
  }

  svg {
    display: block;
    width: 19px;
    height: 18px;
    margin-right: 10px;
  }
}

.cart-title-total {
  @include font-size-body-smaller;
  margin-top: $space-xxx-small;
  color: $color-text-light-text;

  span {
    @include font($font-product-price);
    display: inline-block;
    margin-left: $space-xxx-small;
    color: $color-text-headings;
  }
}

.cart-title-total--small {
  width: 100%;
}

.cart-title-total--large {

  .cart-title-total {
    margin-top: 0;
    margin-right: $space-medium;
    text-align: right;
  }

  span {
    @include font-size-heading-4;
    display: block;
    margin-top: $space-xxx-small;
    margin-left: 0;
  }
}

.cartitems--container {
  .cart.has-sidebar & {
    @include media($min: $bp-medium) {
      display: flex;
    }

    .cartitems {
      @include media($min: $bp-medium) {
        width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-medium}));
        margin-right: $space-medium;
      }

      @include media($min: $bp-large) {
        width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-x-large}));
        margin-right: $space-x-large;
      }

      @include media($min: $bp-xl) {
        width: calc(100% - (#{$local-cart-sidebar-width} + #{$space-xx-large}));
        margin-right: $space-xx-large;
      }
    }
  }
}

.cartitems {
  .cartitems--list {
    padding-left: 0;
  }
}

.cartitems-empty {
  @include font-size-body;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 358px;
  padding: $space-medium;
  text-align: center;
  border: 1px solid $color-border-soft;
  box-shadow: 0 1px 4px 0 rgba($color-black, 0.06);
}

.cartitems-empty--inner {

  p {
    margin-top: 0;
    margin-bottom: $space-medium;
  }

  .button-primary {
    @include button-size(medium);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;

    svg {
      display: block;
      width: 19px;
      height: 18px;
      margin-right: 6px;
      margin-bottom: 1px;
    }
  }
}

.cart-total {
  margin-top: $space-x-large;
  margin-bottom: $space-large;
}

.cart-notifications {
  display: flex;
  flex-direction: column;
  margin-top: $space-medium;
  margin-bottom: $space-medium;

  > * {
    padding: $space-medium;
    margin-bottom: $space-medium;
    font-size: $font-body-size-small;
    color: $color-text-regular-text;
    background-color: $color-layout-secondary-backgrounds;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.cart-tools {
  display: flex;
  flex-direction: column;
  margin-top: $space-medium;
  margin-bottom: $space-small;

  > * {
    margin-bottom: $space-small;

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.cart-ordernote {
  .form-field {
    max-width: 450px;
  }

  textarea {
    min-height: 118px;
  }
}

.cart-ordernote-heading {
  display: block;
  margin-bottom: $space-x-small;
  color: $color-text-regular-text;
}

.cart-subtotal {
  display: table;
  width: 100%;
  padding-top: $space-large;
  margin-top: $space-x-large;
  margin-bottom: $space-small;
  font-size: rem(22px);
  color: $color-text-headings;
  border-top: 1px solid $color-layout-dividers;

  span {
    display: table-cell;
    vertical-align: middle;
  }

  .money {
    @include font($font-product-price);
    font-size: rem(28px);
    text-align: right;
  }
}

.cart-shipping {
  @include font-size-body;
  margin-bottom: $space-large;
  color: $color-text-regular-text;
  line-height: 1.56;

  .cart-shipping-toggle {
    @extend %button-reset, %link--default;
    @include font-body-underline-links;
    display: block;
    line-height: 1.56;
  }
}

.cart-shippingcalc--container {
  display: none;
  margin-bottom: $space-xxx-large;

  &.open {
    display: block;
  }
}

.cart-shippingcalc-form {
  margin-top: $space-large;
  margin-bottom: $space-large;

  .cart-shippingcalc--inner {
    margin-bottom: $space-small;

    @include media($min: $local-xs-tween) {
      display: flex;
    }
  }

  .form-field {
    width: 100%;

    @include media($max: $local-xs-tween) {
      margin-bottom: $space-small;

      &:last-child {
        margin-bottom: 0;
      }
    }

    @include media($min: $local-xs-tween) {
      width: calc(#{percentage(1 / 3)} - #{$space-small / 2} - 2px);
      margin-right: $space-small;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .button-primary {
    @include button-size(medium);
  }
}

.cart-shippingcalc-none {
  margin-top: 0;
}

.cart-shippingcalc-response {
  display: none;
  padding: $space-medium;
  color: $color-text-regular-text;
  background-color: $color-layout-secondary-backgrounds;
  border-radius: $container-border-radius;

  &.visible {
    display: block;
  }

  > *:first-child {
    margin-top: 0;
  }

  > *:last-child {
    margin-bottom: 0;
  }
}

.cart-shippingcalc-rates {
  margin-top: $space-medium;

  &:empty {
    display: none;
  }
}

.cart-checkout {
  text-align: center;

  .button-primary {
    @include button-size(x-large);
    width: 100%;

    svg {
      display: inline-block;
      width: 21px;
      height: 21px;
      margin-right: 5px;
      margin-bottom: 2px;
      vertical-align: top;
    }
  }

  .cart-continue {
    margin-top: $space-medium;
  }
}

.additional-checkout-buttons {
  margin-top: $space-medium;
  margin-bottom: $space-medium;
}

// Adds style to the dynamic checkout buttons according to the Shopify spec
[data-shopify-buttoncontainer] {
  justify-content: center;
}

.cart-continue {
  @include font-size-body;
  @extend %link--default;
  display: block;

  svg {
    position: relative;
    top: -1px;
    margin-left: 2px;
    transform: rotate(-90deg);
  }
}

.cart-sidebar {
  width: 100%;

  @include media($max: $local-xs-tween) {
    margin-top: $space-large;
  }

  @include media($min: $local-xs-tween, $max: $bp-medium) {
    display: flex;
    margin-top: $space-xx-large;
  }

  @include media($min: $bp-medium) {
    width: $local-cart-sidebar-width;
  }
}

.cart-sidebar-item {
  position: relative;
  margin-bottom: $space-medium;

  @include media($max: $local-xs-tween) {
    width: 100%;
  }

  @include media($min: $local-xs-tween, $max: $bp-medium) {
    width: calc(50% - #{$space-medium / 2});

    &:first-child {
      margin-right: $space-medium;
    }
  }

  @include media($min: $bp-medium) {
    &:last-child {
      margin-bottom: 0;
    }
  }

  .cart-sidebar-item-image {
    display: block;
    width: 100%;
    max-width: 100%;
    border-radius: $container-border-radius;
  }
}

.cart-sidebar-item--text {
  padding: $space-medium;
  background-color: $color-layout-secondary-backgrounds;

  > *:first-child {
    margin-top: 0;
  }
  > *:last-child {
    margin-bottom: 0;
  }
}

$loading-icon-size: 77px;

.collection--section {
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;
  }

  .productgrid--masthead.no-breadcrumbs {
    margin-top: 0;

    @include media($min: $bp-small) {
      margin-top: $space-xx-small;
    }
  }
}

.collection--image {
  position: relative;
  margin: 0;

  img {
    display: block;
    max-width: 100%;
    border-radius: $container-border-radius;
  }
}

.collection--information {
  margin-top: $space-large;

  &:first-child {
    margin-top: 0;
  }
}

.collection--title {
  @include font-size-heading-large;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.3;
  color: $color-text-headings;
}

.collection--description {
  margin-top: $space-xx-small;

  > *:first-child {
    margin-top: 0;
  }
}

.results--container {
  position: relative;
  .processing-overlay {
    opacity: 0;
    height: 100%;
    width: 100%;
    z-index: 0;
    transition: opacity 0.2s;
  }

  .icon-loading {
    position: absolute;
    display: block;
    height: $loading-icon-size;
    width: $loading-icon-size;
    top: rem(120px);
    left: calc(50% - #{$loading-icon-size} / 2);
    opacity: 0;
    color: $color-text-links;
    @include media($min: $bp-medium) {
      top: rem(190px);
    }
  }

  &.processing--filter {

    .processing-overlay {
      position: absolute;
      opacity: 0.7;
      background-color: $color-layout-site-background;
      z-index: 10;
    }
    .icon-loading {
      opacity: 1;
      transition: opacity 200ms ease-in-out;
      z-index: 11;
    }
  }
}

.click-to-load {
  ~ .pagination--container {
    display: none;
  }

  .button-primary {
    @include button-size(medium);
    margin: rem(50px) auto;
    display: block;
  }
}

.productgrid--outer {

  .pagination--container:empty {
    margin-top: 0;
    margin-bottom: 0;
  }

  .collection--information.collection--minimal {
    margin: $space-xx-large 0;
    text-align: center;

    @include media($min: $bp-small) {
      margin: $space-xxx-large 0;
    }

    &.has-image-with-text {
      margin-bottom: $space-large;

      @include media($min: $bp-small) {
        margin-bottom: $space-x-large;
      }
    }

    .collection--description.rte {
      max-width: rem(550px);
      margin: $space-medium auto 0;
      text-align: center;
    }
  }

  .alt-img-with-text--container {
    padding-right: 0;
    padding-left: 0;
  }

/*
 * Additional display: grid styles are located in:
 * source/styles/components/product-grid/_product-grid-layout.scss
 *
 */
  @supports (display: grid) {
    &.products-per-row--3 {
      .productgrid--items {
        grid-template-columns: repeat(2, 1fr);

        @include media($min: $bp-smaller){
          grid-template-columns: repeat(3, 1fr);
        }
      }
    }

    &.products-per-row--4 {
      .productgrid--items {
        grid-template-columns: repeat(2, 1fr);

        @include media($min: $bp-xs){
          grid-template-columns: repeat(3, 1fr);
        }

        @include media($min: $bp-large){
          grid-template-columns: repeat(4, 1fr);
        }
      }
    }

    &.products-per-row--5 {
      .productgrid--items {
        grid-template-columns: repeat(2, 1fr);

        @include media($min: $bp-xs){
          grid-template-columns: repeat(3, 1fr);
        }

        @include media($min: $bp-small) {
          grid-template-columns: repeat(4, 1fr);
        }

        @include media($min: $bp-large){
          grid-template-columns: repeat(5, 1fr);
        }
      }
    }

    &.products-per-row--6 {
      .productgrid--items {
        grid-template-columns: repeat(2, 1fr);

        @include media($min: $bp-xs){
          grid-template-columns: repeat(3, 1fr);
        }

        @include media($min: $bp-small) {
          grid-template-columns: repeat(4, 1fr);
        }

        @include media($min: $bp-large){
          grid-template-columns: repeat(5, 1fr);
        }

        @include media($min: $bp-xl){
          grid-template-columns: repeat(6, 1fr);
        }
      }
    }
  }
}

$local-font-size-small: rem(13px);

.site-footer {
  z-index: $index-footer;
  display: flex;
  flex-direction: column;
  padding-top: 0.75rem;
  padding-bottom: 1.75rem;
  color: $color-footer-text;
  background-color: $color-footer-background;

  a {
    text-decoration: none;
    transition: color 0.1s ease;
  }

  @include media($min: $bp-large) {
    padding-top: ($space-xxx-large - $space-small);
    padding-bottom: $space-xx-large;
  }
}

.site-footer-item {
  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;

  @include media($min: $bp-small, $max: $bp-larger) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: calc(#{$gutter-content * 2});
    padding-left: calc(#{$gutter-content * 2});
  }
}

.site-footer-information {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-top: $space-xx-large;
  text-align: left;

  [data-mobile-alignment="centered"] & {
    @include media($max: $bp-large) {
      text-align: center;
    }
  }

  @include media($min: $bp-large) {
    flex-wrap: nowrap;
    width: 100%;
    max-width: $max-width;
    margin-top: $space-xxx-large;
    margin-right: auto;
    margin-left: auto;
  }
}

.site-footer-information-nav-credits {
  flex-grow: 1;
  flex-shrink: 0;
  max-width: 100%;
  font-size: $local-font-size-small;

  &:not(:only-child) {
    @include media($min: $bp-large) {
      padding-right: $gutter-outer / 2;
    }
  }
}

.site-footer-navigation {
  .navmenu {
    display: flex;
    flex-wrap: wrap;
    padding: 0;
    margin: 0;
    list-style: none;

    [data-mobile-alignment="centered"] & {
      @include media($max: $bp-large) {
        justify-content: center;
      }
    }

    .navmenu-item {
      display: block;
      margin-bottom: 6px;
      font-size: $local-font-size-small;

      &:not(:last-child) {
        padding-right: 11px;
        margin-right: 10px;
        border-right: 1px solid $color-additional-accent;
      }
    }
  }

  .navmenu-link {
    color: $color-footer-additional-menu-link;

    &:hover {
      color: $color-footer-additional-menu-link-hover;
    }
  }
}

.site-footer-credits {
  margin-bottom: 0;
  color: $color-footer-copyright-text;
  overflow-wrap: break-word;

  a {
    color: $color-footer-copyright-text;
  }

  p {
    margin: rem(6px) 0;
  }

  &:not(:first-child) {
    margin-top: 6px;
  }
}

.site-footer-information__payment-icons-cross-border {
  display: flex;
  align-items: flex-start;
  flex-grow: 1;
  flex-shrink: 1;
  flex-wrap: wrap;
  order: -1;
  width: 100%;
  padding-left: 0;
  margin-bottom: $space-x-large;
  list-style: none;

  @include media($min: $bp-large) {
    justify-content: flex-end;
    order: 1;
    width: 40%;
    padding-left: $gutter-outer;
    margin-bottom: 0;
  }

  :first-child {
    margin-top: 0;
  }
}

.payment-icons {
  display: flex;
  align-items: flex-start;
  flex-wrap: wrap;
  padding: 0;
  margin-top: $space-small;
  margin-right: -1 * ($gutter-content / 4);
  margin-bottom: -1 * ($gutter-content / 2);
  margin-left: -1 * ($gutter-content / 4);

  [data-mobile-alignment="centered"] & {
    @include media($max: $bp-large) {
      justify-content: center;
      width: calc(100% + #{$gutter-content / 2});
    }
  }

  @include media($min: $bp-large) {
    justify-content: flex-end;
  }
}

.payment-icons-item {
  @include font-size-body;
  display: block;
  margin-right: $gutter-content / 4;
  margin-bottom: $gutter-content / 2;
  margin-left: $gutter-content / 4;

  svg {
    display: block;
    width: auto;
    height: 30px;
  }
}

.shopify-localization-form {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
  width: 100%;
  margin-right: -1 * ($gutter-outer-small / 2);
  margin-bottom: -$space-x-small;
  margin-left: -1 * ($gutter-outer-small / 2);

  [data-mobile-alignment="centered"] & {
    @include media($max: $bp-large) {
      justify-content: center;
      width: calc(100% + #{$gutter-outer-small});
    }
  }

  @include media($min: $bp-large) {
    justify-content: flex-end;
  }
}



.listcollections--container {
  @extend %layout-container;
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;

    &.no-breadcrumbs {
      margin-top: $space-x-large;
    }
  }
}

.listcollections--inner {
  @extend %clearfix;
  list-style-type: none;
  padding-left: 0;
}

$local-max-width: 600px;
$local-header-height: $header-content-height + ($header-padding-vertical-mobile * 2);

.template-password {

  &,
  .site-main,
  .password--section {
    height: 100%;
  }
}

.password--section {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.password-page-header,
.password-page-content,
.password-page-footer {
  flex-basis: auto;
  flex-grow: 0;
  flex-shrink: 0;
}

.password-mailinglist--container,
.password-social--container {
  margin-top: $space-x-large;

  @include media($min: $bp-small) {
    margin-top: $space-xxx-large;
  }
}

// Header
.password-page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  height: auto;
  padding: $header-padding-vertical-mobile $gutter-outer-small;
  background-color: $color-header-background;

  @include media($min: $bp-small) {
    padding-right: $gutter-outer-medium;
    padding-left: $gutter-outer-medium;
  }

  @include media($min: $bp-large) {
    padding-right: $gutter-outer;
    padding-left: $gutter-outer;
  }
}

.password-header-logo {
  width: 50%;
  padding-right: $gutter-content / 2;
  line-height: 1.1;
  color: currentColor;
  text-decoration: none;
  vertical-align: middle;

  .desktop-logo-image,
  .mobile-logo-image {
    margin: 0;
  }
}

.password-header-logo-image {
  display: block;
  max-width: $header-logo-image-max-width;
  max-height: 100%;
}

.password-header-logo-text {
  @include font-size-body;
  display: block;
  width: 100%;
  color: $color-header-logo-text;
  text-decoration: none;
}

.password-header-login {
  width: 50%;
  height: $header-content-height;
  padding-left: $gutter-content / 2;
  text-align: right;
}

.password-header-lock {
  display: inline-block;
  padding: 8px 10px;
  margin-top: 4px;
  margin-right: -10px;
  color: $color-header-navigation-main-menu-text;
  cursor: pointer;
  background-color: transparent;
  border: 0;

  svg {
    display: block;
  }
}

// Main content
.password-page-content--inner {
  @extend %layout-container;
  display: flex;
  flex-direction: column;
  justify-content: center;
  max-width: $local-max-width;
  padding-top: $space-x-large;
  padding-bottom: $space-x-large;
  text-align: center;

  @include media($min: $bp-small) {
    padding-top: $space-xxx-large;
    padding-bottom: $space-xxx-large;
  }
}

.password-title {
  margin-top: 0;
  margin-bottom: $space-medium;
  color: $color-text-headings;
}

.password-message {
  margin-bottom: 0;
  line-height: 1.56;
  color: $color-text-regular-text;
}

// Newsleter Signup
.password-mailinglist--container {
  .password-mailinglist-title {
    @include font-size-heading-4;
    margin-top: 0;
    margin-bottom: $space-medium;
    color: $color-text-headings;

    h1 {
      margin-top: 0;
      margin-bottom: 0;
    }
  }

  .password-mailinglist-text {
    @include font-size-body-small;
  }

  .newsletter {
    margin: 0 auto;
  }
}

.password-social--title {
  @include font($font-body, $font-family: false);
  @include font-size-body;
  letter-spacing: $font-body-spacing;
}

// Footer
.password-page-footer {
  @extend %layout-container;
  padding-top: $space-small;
  padding-bottom: $space-small;
  text-align: center;
}

.password-page-footer--item {
  display: block;

  a {
    @extend %link--default;
  }

  &:not(:first-child) {
    margin-top: $space-xx-small;
  }

  @include media($min: $bp-smaller) {
    display: inline-block;
    margin-top: 0;
  }
}

// Password modal
.passwordentry-container {
  display: none;
}

.passwordentry-title {
  @include font-size-heading-4;
  margin-top: 0;
  margin-bottom: $space-large;
  color: $color-text-headings;
}

.passwordentry-contents {

  .passwordentry-message {
    @extend %form-message;
    margin-bottom: $space-medium;
  }

  .form-fields-inline {
    display: table;
    width: 100%;
  }

  .passwordentry-input {
    display: table-cell;
    width: 100%;
    padding-right: $space-x-small;
    vertical-align: middle;
  }

  .passwordentry-submit {
    display: table-cell;
    vertical-align: middle;
  }

  .button-primary {
    @include button-size(large);
    display: block;
    width: 100%;
    white-space: nowrap;

    @include media($max: $bp-small) {
      padding-right: $space-small;
      padding-left: $space-small;
    }
  }

  a {
    @extend %link--default;
  }
}

.passwordentry-owner {
  margin-top: $space-large;
  margin-bottom: 0;
  color: $color-text-regular-text;
}

.modal--passwordentry {

  .modal-inner {
    max-width: 450px;
    padding: $space-large $space-medium;
    text-align: center;
    white-space: normal;

    @include media($min: $bp-smaller) {
      padding: $space-xx-large;
    }
  }
}

.product--container {
  @extend %layout-container;
  margin-top: $space-medium;

  @include media($min: $bp-small) {
    margin-top: $space-large;

    &.no-breadcrumbs {
      margin-top: $space-x-large;
    }
  }

  @include media($max: $bp-small) {
    padding-right: 0;
    padding-left: 0;

    &.no-breadcrumbs {
      margin-top: $gutter-outer-small;
    }
  }
}

.product--outer {
  display: flex;
  flex-wrap: wrap;
}

// Column structure
.product-gallery,
.product-main {
  @include media($max: $bp-small) {
    padding-right: $gutter-outer-small;
    padding-left: $gutter-outer-small;
  }
}

.product-gallery,
.product-form--alt,
.product-main {
  @include font-size-body;
  width: 100%;
}

.product-form--alt,
.product-main,
.product-readmore,
.product--section ~ .shopify-section {
  transition: opacity 0.2s ease;

  .product-gallery--fade & {
    opacity: 0.3;
  }
}

$static-product-first-col-width-small: 50%;
$static-product-first-col-width-medium: 56%;
$static-product-first-col-width-large: 62%;
$static-product-col-gap: 2.5%;

.product-gallery {
  @include media($min: $bp-small) {
    width: $static-product-first-col-width-small;

    .layout--two-col-medium &,
    .layout--two-col-large & {
      width: $static-product-first-col-width-medium;
    }

  }

  @include media($min: $bp-medium) {
    .layout--two-col-large & {
      width: $static-product-first-col-width-large;
    }
  }

  @include media($min: $bp-large) {
    .layout--three-col & {
      width: 35%;
    }
  }
}

.product-main {
  @include media($min: $bp-small) {
    width: 100% - $static-product-first-col-width-small - $static-product-col-gap;
    margin-left: $static-product-col-gap;

    .layout--two-col-medium &,
    .layout--two-col-large & {
      width: 100% - $static-product-first-col-width-medium - $static-product-col-gap;
    }

  }

  @include media($min: $bp-medium) {
    .layout--two-col-large & {
      width: 100% - $static-product-first-col-width-large - $static-product-col-gap;
    }
  }

  @include media($min: $bp-large) {
    .layout--three-col & {
      width: 36.5%;
    }
  }
}

.product-description {
  margin-top: $space-large;
}

.product-form--alt {
  @include font-size-body;
  display: none;

  @include media($min: $bp-large) {
    display: block;
    width: 23.5%;
    margin-left: 2.5%;
  }

  @include media($min: $bp-xl) {
    width: 22%;
    margin-left: 4%;
  }
}

.product-link {
  @extend %link--default;
  @include font-body-underline-links;
  display: inline-block;
  margin-top: $gutter-outer;
}

.search--section {
  .processing-overlay {
    z-index: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .icon-loading {
    position: absolute;
    top: rem(120px);
    left: 50%;
    display: block;
    height: auto;
    color: $color-text-links;
    opacity: 0;
    transform: translateX(-50%);
    @include media($min: $bp-medium) {
      top: rem(190px);
    }
  }

  .processing {
    * {
      cursor: default;
    }

    .processing-overlay {
      position: absolute;
      z-index: 10;
      background-color: $color-layout-site-background;
      opacity: 0.7;
    }

    .icon-loading {
      z-index: 11;
      opacity: 1;
      transition: opacity 200ms ease-in-out;
    }
  }

  .productgrid--masthead.no-breadcrumbs {
    margin-top: $gutter-outer-small;

    @include media($min: $bp-small) {
      margin-top: $space-x-large;
    }
  }
}

$local-slideshow-small: 440px;
$local-slideshow-medium: 500px;
$local-slideshow-large: 560px;

$local-slideshow-button-gap: $space-x-small;

.slideshow {
  position: relative;
  overflow: hidden;

  .flickity-viewport {
    transition: height 0.2s linear;
  }

  .flickity-slider {
    height: 100%;
  }

  .flickity-page-dots {
    bottom: $gutter-content;

    @include media($max: $bp-small) {
      bottom: auto;
    }

    .dot {
      width: 5px;
      height: 5px;
      margin: 0 4px;
      transition: background 0.3s;

      @include media($min: $bp-small) {
        width: 7px;
        height: 7px;
        margin: 0 7.5px;
      }
    }
  }

  .flickity-prev-next-button {
    opacity: 1;

    svg {
      transform: scale(1);
      transition: transform .15s cubic-bezier(.3, 0, 0, 1), fill 0.3s;
    }

    @include media($max: $bp-small) {
      display: none;
    }

    &:disabled {
      cursor: default;
      opacity: 0.25;
    }

    &:hover {
      &:not([disabled]) {
        opacity: 1;

        svg {
          transform: scale(1.2);
        }
      }
    }

    &:active {
      &:not([disabled]) {
        opacity: 0.5;
      }
    }
  }

  &.flickity-enabled:focus {
    outline: none;
  }
}

.slideshow-height-small {
  height: 42vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-small;
  }
}

.slideshow-height-medium {
  height: 48vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-medium;
  }
}

.slideshow-height-large {
  height: 54vw;

  @include media($min: $bp-large) {
    height: $local-slideshow-large;
  }
}

.slideshow-height-fullscreen {
  height: 100vh;
}

.slideshow-slide:not(.slideshow-height-original) {
  height: auto;
}

.slideshow-slide {
  width: 100%;
  display: none;

  .flickity-enabled &,
  &:nth-of-type(1) {
    display: block;
  }

  &.slideshow-height-fullscreen {
    height: 100%;
  }

  &:focus {
    .slideshow-background {
      box-shadow: inset 0 0 3px 3px #19F;
    }
  }
}

.slideshow-background {
  position: relative;
  width: 100%;
  font-size: 0;
  letter-spacing: 0;
  background-position: center;
  background-size: cover;
}

.slideshow-slide-overlay {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  @include media($max: $bp-small) {
    .slideshow-height-small &,
    .slideshow-height-medium &,
    .slideshow-height-large & {
      display: none;
    }
  }
}

.slideshow-slide-content {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 100%;
  margin: $gutter-outer * 2 auto;
  text-align: center;

  .slideshow-height-fullscreen + & {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: 0;
    transform: translate(-50%, -50%);
  }

  @include media($max: $bp-small) {
    max-width: 90%;
    text-align: center;
  }
  @include media($min: $bp-small) {
    position: absolute;
    top: 50%;
    left: 50%;
    margin: 0;
    transform: translate(-50%, -50%);

    &.text-align-left {
      padding-right: 40%;
      padding-left: 6.25em;
      text-align: left;
    }
    &.text-align-left .slideshow-button {
      margin-right: $local-slideshow-button-gap;
      margin-left: 0;
    }
    &.text-align-top-left {
      padding-right: 40%;
      padding-left: 6.25em;
      text-align: left;
      top: 27%;
    }
    &.text-align-top-center {
      max-width: 60%;
      text-align: center;
      top: 27%;
    }
    &.text-align-top-right {
      padding-right: 6.25em;
      padding-left: 40%;
      margin-right: 0;
      text-align: right;
      top: 27%;
    }

    &.text-align-bottom-left {
      padding-right: 40%;
      padding-left: 6.25em;
      text-align: left;
      bottom: 2rem;
      top: auto;
      transform: none;
      left: 2rem;
    }
    &.text-align-bottom-center {
      max-width: 60%;
      text-align: center;
      bottom: 3rem;
      top: auto;
      transform: none;
      left: 20%;
    }
    &.text-align-bottom-right {
      padding-right: 6.25em;
      padding-left: 40%;
      margin-right: 0;
      text-align: right;
      bottom: 2rem;
      top: auto;
      transform: none;
      right: 0;
      left: auto;
    }

    &.text-align-center {
      max-width: 60%;
      text-align: center;
    }
    &.text-align-right {
      padding-right: 6.25em;
      padding-left: 40%;
      text-align: right;
    }
    &.text-align-right .slideshow-button {
      margin-right: 0;
      margin-left: $local-slideshow-button-gap;
    }



    &.text-font-size-smaller .slideshow-slide-heading {
      font-size: 1.5rem;
    }
    &.text-font-size-small .slideshow-slide-heading {
      font-size: 1.8rem;
    }
    &.text-font-size-big .slideshow-slide-heading {
      font-size: 2.5rem;
    }
    &.text-font-size-bigger .slideshow-slide-heading {
      font-size: 2.8rem;
    }
  }
}

.slideshow-link {
  color: $color-text-headings;
  text-decoration: none;
}

.slideshow-background-link {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 1;
  cursor: pointer;
}

.slideshow-slide-heading {
  @extend %h1;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 1.2;

  @include media($min: $bp-small) {
    @include font-size-heading-large($font-heading-capitalize, -2);
  }
}

.slideshow-slide-text {
  @include font-size-body-medium;
  margin-top: $space-x-small;
  margin-bottom: 0;
  line-height: 1.4;

  @include media($min: $bp-large) {
    @include font-size-body-large;
  }
}

.slideshow-button-wrapper {
  margin-top: $space-medium - $local-slideshow-button-gap;

  @include media($max: $bp-small) {
    display: inline-grid;
    grid-template-columns: repeat(2, 1fr);

    @supports (grid-column-gap: 1rem) {
      margin-top: $space-medium;
      grid-column-gap: $local-slideshow-button-gap;
      grid-row-gap: $local-slideshow-button-gap;

      .slideshow-button {
        margin: 0;

        &:only-child {
          grid-column: span 2;
        }
      }
    }
  }

  @include media($min: $bp-large) {
    margin-top: $font-heading-medium - $local-slideshow-button-gap;
  }
}

.slideshow-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin: $local-slideshow-button-gap $local-slideshow-button-gap / 2 0;

  @include media($min: $bp-small) {
    @include button-size(medium);
  }

  @include media($min: $bp-large) {
    @include button-size(large);
  }
}

$local-utility-bar-horizontal-spacing: rem(24px);

.utility-bar {
  @include media($max: $bp-large) {
    display: none;
  }
}

.utility-bar-content {
  @extend %layout-container;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: $space-x-small;
  padding-bottom: $space-x-small;

  .utility-bar-full-width & {
    width: 100%;
    max-width: 100%;
  }

  a {
    @include font($font-body);
    @include font-size-body-smallest;
    text-decoration: none;
  }
}

.utility-bar-left,
.utility-bar-right {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
}

.utility-bar-left {
  justify-content: flex-start;
  margin-right: auto;

  a {
    margin-right: $local-utility-bar-horizontal-spacing;
  }
}

.utility-bar-right {
  justify-content: flex-end;
  margin-left: auto;

  a {
    margin-left: $local-utility-bar-horizontal-spacing;
  }
}

.dynamic-video-with-text-wrapper {

  max-width: $max-width;
  padding-right: $gutter-outer-small;
  padding-left: $gutter-outer-small;
  margin-right: auto;
  margin-left: auto;

  @include media($min: $bp-medium) {
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  @include media($max: $bp-small) {
    display: flex;
    flex-direction: column;
  }

  @include media($min: $bp-small) {
    padding-right: $space-large;
    padding-left: $space-large;
  }

  @include media($min: $bp-larger) {
    padding-right: calc(#{$gutter-content * 2});
    padding-left: calc(#{$gutter-content * 2});
  }

  .dynamic-video-with-text {

    padding: $gutter-outer-small;

    @include media($min: $bp-medium) {
      padding: 2.75rem 1.75rem;
      width: 50%;
    }

    .preheading {
      @include font($font-body);
      @include font-size-body-medium;
      margin: 0 0 $space-x-small;
      letter-spacing: $font-body-spacing;

      font-family: "Lato", serif;
      font-size: 3em;
      color: #333 !important;
    }

    .heading {
      margin: 0;
      line-height: 1.3;

      &.small {
        @include font-size-heading-4;
      }

      &.medium {
        @include font-size-heading-3;
      }

      &.large {
        @include font-size-heading-1;
      }

      &.xlarge {
        @include font-size-heading-large;
      }
    }

    .text-content {
      @include font-size-body;
      margin: $space-x-small 0 0;
      line-height: 1.5;

      @include media($min: $bp-medium) {
        margin: $space-small 0 0;
      }
    }

    @include media($min: $bp-small) {
      padding: 2.75rem $space-large;
      margin: 0;

      &.position-top {
        align-self: flex-start;
      }

      &.position-middle {
        align-self: center;
      }

      &.position-bottom {
        align-self: flex-end;
      }

      &.alignment-left {
        text-align: left;
      }

      &.alignment-center {
        text-align: center;
      }

      &.alignment-right {
        text-align: right;
      }
    }

    .button-link {
      text-decoration: none;
    }

    .video-with-text--button {
      &:not(.button-signpost) {
        @include button-size(small);
        margin-top: $space-medium;

        @include media($min: $bp-medium) {
          @include button-size(medium);
          margin-top: $space-large;
        }
      }
    }

  }
  .dynamic-video {
    @include media($min: $bp-medium) {
      width: 50%;
    }
  }
}

.cart-checkout .button-primary {
  color: $color-buttons-primary-button-cta-text;
  background-color: $color-buttons-primary-button-cta-background;
}

.container {
  @extend .promo-grid--container
}

.cart-creditcard-icons {
  text-align: center;
  padding: 10px;
  margin-bottom: 15px;
  height: 64px;
}

.CCcardLogo {
   max-width: 100%;
  max-height: 100%
}

.NoShow-Virtual {
  display: none;
}



.product-meta-infos {
  margin-bottom: 20px;
}

[data-accordion-button] {
  border-bottom: 1px solid #757575;
  cursor: pointer;
  display: flex;
  font-family: 'Lato', sans-serif;
  justify-content: space-between;
  padding-top: 15px;
  padding-bottom: 15px;
}
[data-accordion-button] svg {
  width: 14px;
  height: auto;
  transform: rotate(-90deg);
  transition: all .3s ease;
}

[data-accordion-button].is-open svg {
  transform: unset;
}

[data-accordion-content] {
  border-bottom: 1px solid #757575;
  line-height: 1.4;
  padding-top: 12px;
  padding-bottom: 15px;
  .image_wrapper {
    max-width: 50%;
    img {
      width: 100%;
      height: auto;
    }
  }
}

[data-accordion-button].is-open + [data-accordion-content] {
}

.hide--desktop {
  @media (min-width: 750px) {
    display: none !important;
  }
}

.hide--mobile {
  @media (max-width: 749px) {
    display: none !important;
  }
}

[data--hidden] {
  display: none !important;
}

body.template-product .delivery-info {
  font-size: 1.2rem;
  margin-top: 10px;
}

body.template-product .discount_table {
  border: 1px solid #a8aeb3;
  margin-top: 20px;
  width: fit-content;
  &.text-center {
    text-align: center;
  }
  .table_header {
    background: #e7d9c5;
    border-bottom: 1px solid #f3047d;
    color: #f3047d;
    font-family: Lato,sans-serif;
    font-size: 22px;
    font-style: italic;
    padding: 20px;
  }
  .table_content {
    font-family: Lato,sans-serif;
    line-height: 1.5;
    max-width: 300px;
    padding: 20px 25px;
    & > div {
      margin-top: 5px;
      margin-bottom: 5px;
    }
  }
}


body.template-cart {
  .cart-subtotal, .cart-title-total {
    span.money {
      display: flex;
      justify-content: flex-end;
    }
    .was-price {
      opacity: .6;
      text-decoration: line-through;
    }
    .regular-price {
      margin-left: 10px;
    }
  }
}

.c0c-mars1 {
  display: none !important;
}

.product-form-gift #see__more_brand {
  display: none;
}
.cart-item--sale-price.money{
  display:none;
}
.whichlist-icon {
    position: absolute;
    right: 20px;
    top:10px;
}
ul.productgrid--items.productgrid--no-spacing li {
    position: relative;
}
/* .whichlist-icon i.fa.fa-star-o {
    color: #f3027a;
}
.whichlist-icon i.fa.fa-star-o {
    color: #f3027a;
    background: white;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size:25px;
} */
.product-recently-viewed-wrapper ul li {
    position: relative;
}
.product-recently-viewed-wrapper ul li .swym-add-to-wishlist-view-product {
    position: absolute!important;
    top: 40px;
    right: 10px;
}
i.icon-swym-wishlist {
font-family: 'swym-font';
font-style: normal;
vertical-align: middle;
}
i.icon-swym-wishlist+span {
vertical-align: middle;
}
i.icon-swym-wishlist:after {
content: '';
font-size: 130%;
line-height: 18px;
text-align: center;
display: inline;
}
/*content rendered after swym is ready to avoid showing block/invalid chars*/
.swym-ready i.icon-swym-wishlist:after {
content: '\f004';
}
.site-header-main-actions i.fa.fa-heart {
    color: #f3027a;
}
#swym-plugin-name {
    padding-top: 30px;
}
.site-header-main-actions a.swym-wishlist {
    text-decoration: none;
    padding: 0px 8px;
}


.site-header-item-label {
  color: #000;
}

.money.sale--price, .badge-order-soon {
  color: #f3027a;
}

.badge-order-soon {
  font-weight: bold;
  margin-top: 15px;
}

.vday-sale {
  color: #f3027a;
}

body.template-product {
  .vday-sale {
    font-size: 1.25rem; 
    margin-bottom: .25rem;
    margin-left: 10px;
    @media (max-width: 859px) {
      font-size: 1.18125rem;
    }
  }
}

.vday-sale:not(.vday-sale-product) {
  display: block;
}

.product-recently-viewed--content .vday-sale-product {
  display: none !important;
}


// -------------------- Product page ------------------------

body.template-product-onebox {
  .product-swatches {
    [data-popup-open] {
      border: 1px solid #212121;
      color: #000;
      display: flex;
      height: 50px;
      align-items: center;
      justify-content: space-between;
      font-family: 'Lato', sans-serif;
      margin-top: 10px;
      text-decoration: none;
      padding: 0 10px;
    }
  }
}

.variants-popup {
  display: none;
  font-family: 'Lato', sans-serif;
  * {
    font-family: 'Lato', sans-serif !important;
  }
  .popup-wrapper {
    background: #FFF;
    top: 0;
    right: 0;
    width: 500px;
    height: 100%;
    padding: 75px 50px;
    position: fixed;
    transform: translateX(100%);
    transition: all .3s ease;
    z-index: 999;
    @media (max-width: 859px)  {
      width: 100%;
      padding: 60px 15px;
      overflow: auto;
    }
  }

  div[data-popup-bg] {
    background: #0000004f;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    opacity: 0;
    position: fixed;
    transition: all .15s ease;
    z-index: 998;
    
  }
  &.open {
    div[data-popup-bg] {
      opacity: 1
    } 
    .popup-wrapper {
      transform: unset;
    }
  }

  a.close {
    background: transparent;
    border: none;
    cursor: pointer;
    outline: none;
    top: 15px;
    right: 15px;
    position: absolute;
    svg {
      width: 16px;
      height: auto;
    }
  }

  .popup-header {
    font-size: 22px;
    text-align: center;
    .popup-price {
      margin-top: 15px;
    }
    @media (max-width: 859px) {
      margin-bottom: 15px;
    }
  }

  .product-options-group-wrapper {
    margin-top: 75px;
    @media (max-width: 759px) {
      margin-top: 30px;
    }
  }
  
  
  fieldset.form-options {
    margin-top: 45px;
    .option-header .option-name {
      font-size: 16px;
    }
    @media (max-width: 859px) {
      margin-top: 25px;
    }
  }

  fieldset.form-options .option-values {
    display: flex;
    flex-wrap: wrap;
    margin-left: -10px;
    & > div.option-value {
      margin-bottom: 10px;
      margin-left: 10px;
      width: calc(25% - 10px);
      span.option-value-name {
        width: 100%;
        height: 100%;
        margin: 0px !important;
        padding: 10px 0px;
        text-align: center;
        @media (max-width: 859px) {
          font-size: 13px;
        }
      }
    }

    .option-value[data-option="Color"] {
      position: relative;
      height: 0px;
      padding-top: 0px;
      padding-bottom: calc(25% - 10px);
      label {
        position: absolute;
        width: 100%;
        height: 100%;
        span.option-value-name {
          padding: 0px;
        }
        .swatch-inner {
          width: 100% !important;
        }
      }
    }
    .option-value-input+.option-value-swatch-wrapper .swatch {
      transform: scale(0.9, 0.9);
    }
  }


  [data-option='Color'] .option-swatch {
    border-radius: 50%;
    height: 0px;
    overflow: hidden;
    padding-top: 0px;
    padding-bottom: calc(25% - 10px);
    position: relative;
    span {
      background-size: cover;
      height: 100%;
      width: 100%;
      top: 0px;
      left: 0px;
      position: absolute;
    }
  }
  .product-form--atc {
    bottom: 30px;
    width: calc(100% - 100px);
    position: absolute;
    button {
      border: none;
      outline: none;
      width: 100%;
    }
    @media (max-width: 859px) {
      bottom: 0px;
      width: 100%;
      position: relative;
    }
  }
}

#shopify-chat-dummy {
  z-index: 998 !important;
}

body.template-product.popup-open main {
  z-index: 9999;
}


section.atc-banner--container {
  z-index: 99999;
}



// --------------------- Homepage -----------------------

body.template-index {
  main#site-main > .shopify-section:nth-child(3) {
    margin-top: 60px;
    @media (max-width: 859px) {
      margin-top: 100px;
      section.featured-collection--container {
        padding-top: 45px;
      }
    }
  }
}


// --------------- Megamenu -------------

.navmenu-item.navmenu-item-parent.navmenu-meganav-item-parent:hover {
  @media (min-width: 860px) {
    background: #faf9f7;
  }
}

.navmenu-submenu.megamenu-item-megamenu {
  background: transparent !important;
  box-shadow: none !important;
  @media (max-width: 859px) {
    background: #FFF !important;
  }
  .navmenu-meganav--scroller {
    max-width: 1200px;
    @media (min-width: 860px) {
      background: #FAF9F7;
    }
  }
  @media (max-width: 859px) {
    .navmenu-meganav-items {
        flex-direction: column;
    }
    .meganav-inner {
      flex: 1;
    }
    .mob-menu-back {
      background: #faf9f7;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      height: 45px;
      margin-bottom: 15px;
      padding-left: 15px;
      padding-right: 15px;
      svg {
        left: 15px;
        transform: rotate(90deg);
        position: absolute;
      }
    }
  }
  .megamenu-wrapper {
    .menu-item-link {
      a {
        font-size: 16px;
      }
    }
    @media (max-width: 859px) {
      padding-left: 15px;
      padding-right: 15px;
      .menu-item-link {
        border-bottom: 1px solid #ddd;
        a {
          display: block;
          font-family: 'Lato', sans-serif;
          padding: 12px 0 !important;
        }
      } 
    }
    @media (min-width: 860px) {
      display: flex;
      flex-wrap: wrap;
      width: 100%;
      padding: 30px 60px;
      .main_title {
        font-family: 'Lato', sans-serif;
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 15px;
        width: 100%;
      }
      .menu-item-link {
        a {
          font-size: 16px;
          margin: 10px 0;
          padding: 0px;
          white-space: break-spaces;
        }
        a:hover {
          text-decoration: underline;
        }
      }
      .menu_left {
        border-right: 1px solid #707070;
        width: 50%;
        .menu-items-wrapper {
          display: flex;
          flex-wrap: wrap;
          .menu-group {
            width: 50%;
          }
        }
      }
      .menu_right {
        display: flex;
        width: 50%;
        padding-left: 80px;
        & > div {
          width: 50%;
        }
        .menu-image-wrapper {
          text-align: center;
          a {
            font-size: 18px;
            font-weight: bold;
            text-transform: unset;
          }
          label {
            display: block;
            margin-top: 12px;
          }
        }
        img {
          display: block;
          width: 100%;
          height: auto;
        }
        .menu-subtitle {
          font-size: 16px;
          font-weight: bold;
          font-family: 'Lato', sans-serif;
          margin-bottom: 10px;
        }
      }
    }
  }
}

@media (max-width: 859px) {
  .mobile-nav-content .navmenu-depth-2 {
    background: transparent !important;
  }
  .mobile-nav-content .navmenu-submenu {
    background: #FFF !important;
    display: block !important;
    max-height: unset;
    opacity: 1;
    width: 100%;
    height: calc(100% - 130px);
    top: 130px;
    left: 0;
    overflow-y: auto !important;
    position: fixed;
    transform: translateX(100%);
    transition: all .3s ease !important;
    z-index: 1002;
  }
  .mobile-nav-content .navmenu-submenu.visible {
    transform: unset;
  }
  .mobile-nav-content {
    padding-bottom: 0px;
    ul {
      padding-left: 15px !important;
      padding-right: 15px !important;
      li {
        border-bottom: 1px solid #ddd;
        a {
          padding: 16px 0 !important;
        }
        button {
          width: 16px !important;
          margin-right: 0px !important;
          transform: rotate(-90deg);
        }
        svg {
          width: 16px !important;
          height: auto !important;
          path {
            stroke-width: 0.5;
          }
        }
      }
    }
  }
  .mobile-nav-panel {
    .header-actions-wrapper {
      justify-content: space-between;
      & > button.site-header-search-button {
        margin-left: unset;
        left: unset;
        position: relative;
      }
    }
  }
  .mob-menu-logo {
    text-align: center;
    img {
      display: block;
      margin-top: -10px;
      margin-left: auto;
      margin-right: auto;
    }
    em {
      display: block;
      margin-top: 5px;
      margin-bottom: 20px;
    }
  }
  .mob-account-menu {
    background: #faf9f7;
    color: #e81f76;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 45px;
    a {
      align-items: center;
      display: flex;
      font-family: Lato,sans-serif;
      font-weight: bold;
    }
    a:first-child {
      border-right: 1px solid #e81f76;
      margin-right: 6px;
      padding-right: 6px;
    }
    svg {
      margin-left: 5px;
      width: 18px;
      height: auto;
    }
  }

  .mobile-submenu {
    list-style: none;
    padding-left: 0px;
  }
  .mob-social-icons {
    background: #ebebeb;
    padding: 30px 15px !important;
    label {
      display: block;
      font-family: Lato,sans-serif;
      font-size: 16px;
      margin-bottom: 10px;
    }
  }
  .menu_right .menu-image-wrapper a {
    display: block;
    font-family: Lato,sans-serif;
    font-weight: bold;
    text-align: center;
  }
  .menu_right img {
    width: 100%;
    height: auto;
  }
  .menu_right .menu-subtitle {
    font-family: Lato,sans-serif;
    font-weight: bold;
    margin-top: 20px;
    margin-bottom: 10px;
  }
}